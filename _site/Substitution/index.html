<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Substitution in the untyped lambda calculus | Programming Language Foundations in Agda
</title><!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Substitution in the untyped lambda calculus" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Programming Language Foundations in Agda" />
<meta property="og:description" content="Programming Language Foundations in Agda" />
<link rel="canonical" href="https://plfa.github.io/Substitution/" />
<meta property="og:url" content="https://plfa.github.io/Substitution/" />
<meta property="og:site_name" content="Programming Language Foundations in Agda" />
<script type="application/ld+json">
{"description":"Programming Language Foundations in Agda","@type":"WebPage","url":"https://plfa.github.io/Substitution/","headline":"Substitution in the untyped lambda calculus","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"></head>
<body><header class="site-header" role="banner">

    <div class="wrapper">

        <a class="site-title" href="/">Programming Language Foundations in Agda
</a>

        <nav class="site-nav">
            <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span>

            <div class="trigger">
                <a class="page-link" href="/">Table of Contents</a>
                <a class="page-link" href="/GettingStarted/">Getting Started</a>
            </div>
        </nav>

    </div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
      <h1 class="post-title">Substitution in the untyped lambda calculus</h1>
  </header>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/Untyped/">Prev</a>
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/Substitution.lagda">Source</a>
    
    
    &bullet;
    <a alt="Next chapter" href="/LambdaReduction/">Next</a>
    
</p>


  <div class="post-content">
    <pre class="Agda"><a id="178" class="Keyword">module</a> <a id="185" href="/Substitution/" class="Module">plfa.Substitution</a> <a id="203" class="Keyword">where</a></pre>

<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="246" class="Keyword">open</a> <a id="251" class="Keyword">import</a> <a id="258" href="/Untyped/" class="Module">plfa.Untyped</a>
  <a id="273" class="Keyword">using</a> <a id="279" class="Symbol">(</a><a id="280" href="/Untyped/#2675" class="Datatype">Type</a><a id="284" class="Symbol">;</a> <a id="286" href="/Untyped/#2980" class="Datatype">Context</a><a id="293" class="Symbol">;</a> <a id="295" href="/Untyped/#4150" class="Datatype Operator">_⊢_</a><a id="298" class="Symbol">;</a> <a id="300" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="301" class="Symbol">;</a> <a id="303" href="/Untyped/#3365" class="Datatype Operator">_∋_</a><a id="306" class="Symbol">;</a> <a id="308" href="/Untyped/#3002" class="InductiveConstructor">∅</a><a id="309" class="Symbol">;</a> <a id="311" href="/Untyped/#3018" class="InductiveConstructor Operator">_,_</a><a id="314" class="Symbol">;</a> <a id="316" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="317" class="Symbol">;</a> <a id="319" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a><a id="321" class="Symbol">;</a> <a id="323" href="/Untyped/#4186" class="InductiveConstructor Operator">`_</a><a id="325" class="Symbol">;</a> <a id="327" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a><a id="329" class="Symbol">;</a> <a id="331" href="/Untyped/#4298" class="InductiveConstructor Operator">_·_</a><a id="334" class="Symbol">;</a>
         <a id="345" href="/Untyped/#6171" class="Function">rename</a><a id="351" class="Symbol">;</a> <a id="353" href="/Untyped/#6931" class="Function">subst</a><a id="358" class="Symbol">;</a> <a id="360" href="/Untyped/#5845" class="Function">ext</a><a id="363" class="Symbol">;</a> <a id="365" href="/Untyped/#6623" class="Function">exts</a><a id="369" class="Symbol">;</a> <a id="371" href="/Untyped/#7475" class="Function Operator">_[_]</a><a id="375" class="Symbol">;</a> <a id="377" href="/Untyped/#7359" class="Function">subst-zero</a><a id="387" class="Symbol">)</a>
<a id="389" class="Keyword">open</a> <a id="394" class="Keyword">import</a> <a id="401" href="/Denotational/" class="Module">plfa.Denotational</a> <a id="419" class="Keyword">using</a> <a id="425" class="Symbol">(</a><a id="426" href="/Denotational/#23286" class="Function">Rename</a><a id="432" class="Symbol">;</a> <a id="434" href="/Denotational/#3262" class="Postulate">extensionality</a><a id="448" class="Symbol">)</a>
<a id="450" class="Keyword">open</a> <a id="455" class="Keyword">import</a> <a id="462" href="/Soundness/" class="Module">plfa.Soundness</a> <a id="477" class="Keyword">using</a> <a id="483" class="Symbol">(</a><a id="484" href="/Soundness/#2673" class="Function">Subst</a><a id="489" class="Symbol">)</a>

<a id="492" class="Keyword">import</a> <a id="499" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="537" class="Symbol">as</a> <a id="540" class="Module">Eq</a>
<a id="543" class="Keyword">open</a> <a id="548" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="551" class="Keyword">using</a> <a id="557" class="Symbol">(</a><a id="558" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">_≡_</a><a id="561" class="Symbol">;</a> <a id="563" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="567" class="Symbol">;</a> <a id="569" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#838" class="Function">sym</a><a id="572" class="Symbol">;</a> <a id="574" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a><a id="578" class="Symbol">;</a> <a id="580" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1408" class="Function">cong₂</a><a id="585" class="Symbol">;</a> <a id="587" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1274" class="Function">cong-app</a><a id="595" class="Symbol">)</a>
<a id="597" class="Keyword">open</a> <a id="602" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#3975" class="Module">Eq.≡-Reasoning</a> <a id="617" class="Keyword">using</a> <a id="623" class="Symbol">(</a><a id="624" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin_</a><a id="630" class="Symbol">;</a> <a id="632" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">_≡⟨⟩_</a><a id="637" class="Symbol">;</a> <a id="639" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">_≡⟨_⟩_</a><a id="645" class="Symbol">;</a> <a id="647" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">_∎</a><a id="649" class="Symbol">)</a>
<a id="651" class="Keyword">open</a> <a id="656" class="Keyword">import</a> <a id="663" href="https://agda.github.io/agda-stdlib/Function.html" class="Module">Function</a> <a id="672" class="Keyword">using</a> <a id="678" class="Symbol">(</a><a id="679" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">_∘_</a><a id="682" class="Symbol">)</a></pre>

<h2 id="overview">Overview</h2>

<p>The primary purpose of this chapter is to prove that substitution
commutes with itself. Barendgredt (1984) refers to this
as the substitution lemma:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>M [x:=N] [y:=L] = M [y:=L] [x:= N[y:=L] ]
</code></pre></div></div>

<p>In our setting, with de Bruijn indices for variables, the statement of
the lemma becomes:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>M [ N ] [ L ] ≡  M〔 L 〕[ N [ L ] ]                     (substitution)
</code></pre></div></div>

<p>where the notation M 〔 L 〕 is for subsituting L for index 1 inside
M.  In addition, because we define substitution in terms of parallel
substitution, we have the following generalization, replacing the
substitution of L with an arbitrary parallel substitution σ.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>subst σ (M [ N ]) ≡ (subst (exts σ) M) [ subst σ N ]
                                                        (subst-commute)
</code></pre></div></div>

<p>The special case for renamings is also useful.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rename ρ (M [ N ]) ≡ (rename (ext ρ) M) [ rename ρ N ]
                                                 (rename-subst-commute)
</code></pre></div></div>

<p>The secondary purpose of this chapter is to define the σ algebra of
parallel substitution due to Abadi, Cardelli, Curien, and Levy
(1991). The equations of this algebra not only help us prove the
substitution lemma, but they are generally useful. Futhermore, when
the equations are applied from left to right, they form a rewrite
system that <em>decides</em> whether any two substitutions are equal.</p>

<p>We use the following more succinct notation the <code class="highlighter-rouge">subst</code> function.</p>

<pre class="Agda"><a id="⧼_⧽"></a><a id="2131" href="/Substitution/#2131" class="Function Operator">⧼_⧽</a> <a id="2135" class="Symbol">:</a> <a id="2137" class="Symbol">∀{</a><a id="2139" href="/Substitution/#2139" class="Bound">Γ</a> <a id="2141" href="/Substitution/#2141" class="Bound">Δ</a> <a id="2143" href="/Substitution/#2143" class="Bound">A</a><a id="2144" class="Symbol">}</a> <a id="2146" class="Symbol">→</a> <a id="2148" href="/Soundness/#2673" class="Function">Subst</a> <a id="2154" href="/Substitution/#2139" class="Bound">Γ</a> <a id="2156" href="/Substitution/#2141" class="Bound">Δ</a> <a id="2158" class="Symbol">→</a> <a id="2160" href="/Substitution/#2139" class="Bound">Γ</a> <a id="2162" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="2164" href="/Substitution/#2143" class="Bound">A</a> <a id="2166" class="Symbol">→</a> <a id="2168" href="/Substitution/#2141" class="Bound">Δ</a> <a id="2170" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="2172" href="/Substitution/#2143" class="Bound">A</a>
<a id="2174" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="2176" href="/Substitution/#2176" class="Bound">σ</a> <a id="2178" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="2180" class="Symbol">=</a> <a id="2182" class="Symbol">λ</a> <a id="2184" href="/Substitution/#2184" class="Bound">M</a> <a id="2186" class="Symbol">→</a> <a id="2188" href="/Untyped/#6931" class="Function">subst</a> <a id="2194" href="/Substitution/#2176" class="Bound">σ</a> <a id="2196" href="/Substitution/#2184" class="Bound">M</a></pre>

<h2 id="the-σ-algebra-of-substitution">The σ algebra of substitution</h2>

<p>Substitutions map de Bruijn indices (natural numbers) to terms, so we
can view a substitution simply as a sequence of terms, or more
precisely, as an infinite sequence of terms. The σ algebra consists of
four operations for building such sequences: identity <code class="highlighter-rouge">ids</code>, shift
<code class="highlighter-rouge">↑</code>, cons <code class="highlighter-rouge">M • σ</code>, and sequencing <code class="highlighter-rouge">σ ⨟ τ</code>.  The sequence <code class="highlighter-rouge">0, 1, 2, ...</code>
is constructed by the identity subsitution.</p>

<pre class="Agda"><a id="ids"></a><a id="2646" href="/Substitution/#2646" class="Function">ids</a> <a id="2650" class="Symbol">:</a> <a id="2652" class="Symbol">∀{</a><a id="2654" href="/Substitution/#2654" class="Bound">Γ</a><a id="2655" class="Symbol">}</a> <a id="2657" class="Symbol">→</a> <a id="2659" href="/Soundness/#2673" class="Function">Subst</a> <a id="2665" href="/Substitution/#2654" class="Bound">Γ</a> <a id="2667" href="/Substitution/#2654" class="Bound">Γ</a>
<a id="2669" href="/Substitution/#2646" class="Function">ids</a> <a id="2673" href="/Substitution/#2673" class="Bound">x</a> <a id="2675" class="Symbol">=</a> <a id="2677" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="2679" href="/Substitution/#2673" class="Bound">x</a></pre>

<p>The sequence <code class="highlighter-rouge">1, 2, 3, ...</code> is constructed by the shift operation.</p>

<pre class="Agda"><a id="↑"></a><a id="2774" href="/Substitution/#2774" class="Function">↑</a> <a id="2776" class="Symbol">:</a> <a id="2778" class="Symbol">∀{</a><a id="2780" href="/Substitution/#2780" class="Bound">Γ</a> <a id="2782" href="/Substitution/#2782" class="Bound">A</a><a id="2783" class="Symbol">}</a> <a id="2785" class="Symbol">→</a> <a id="2787" href="/Soundness/#2673" class="Function">Subst</a> <a id="2793" href="/Substitution/#2780" class="Bound">Γ</a> <a id="2795" class="Symbol">(</a><a id="2796" href="/Substitution/#2780" class="Bound">Γ</a> <a id="2798" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="2800" href="/Substitution/#2782" class="Bound">A</a><a id="2801" class="Symbol">)</a>
<a id="2803" href="/Substitution/#2774" class="Function">↑</a> <a id="2805" href="/Substitution/#2805" class="Bound">x</a> <a id="2807" class="Symbol">=</a> <a id="2809" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="2811" class="Symbol">(</a><a id="2812" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="2814" href="/Substitution/#2805" class="Bound">x</a><a id="2815" class="Symbol">)</a></pre>

<p>Given a term <code class="highlighter-rouge">M</code> and substitution <code class="highlighter-rouge">σ</code>, the operation
<code class="highlighter-rouge">M • σ</code> constructs the sequence <code class="highlighter-rouge">M , σ 0, σ 1, σ 2, ...</code>.
This operation is analogous to the <code class="highlighter-rouge">cons</code> operation of Lisp.</p>

<pre class="Agda"><a id="3015" class="Keyword">infixr</a> <a id="3022" class="Number">6</a> <a id="3024" href="/Substitution/#3029" class="Function Operator">_•_</a>

<a id="_•_"></a><a id="3029" href="/Substitution/#3029" class="Function Operator">_•_</a> <a id="3033" class="Symbol">:</a> <a id="3035" class="Symbol">∀{</a><a id="3037" href="/Substitution/#3037" class="Bound">Γ</a> <a id="3039" href="/Substitution/#3039" class="Bound">Δ</a> <a id="3041" href="/Substitution/#3041" class="Bound">A</a><a id="3042" class="Symbol">}</a> <a id="3044" class="Symbol">→</a> <a id="3046" class="Symbol">(</a><a id="3047" href="/Substitution/#3039" class="Bound">Δ</a> <a id="3049" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="3051" href="/Substitution/#3041" class="Bound">A</a><a id="3052" class="Symbol">)</a> <a id="3054" class="Symbol">→</a> <a id="3056" href="/Soundness/#2673" class="Function">Subst</a> <a id="3062" href="/Substitution/#3037" class="Bound">Γ</a> <a id="3064" href="/Substitution/#3039" class="Bound">Δ</a> <a id="3066" class="Symbol">→</a> <a id="3068" href="/Soundness/#2673" class="Function">Subst</a> <a id="3074" class="Symbol">(</a><a id="3075" href="/Substitution/#3037" class="Bound">Γ</a> <a id="3077" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="3079" href="/Substitution/#3041" class="Bound">A</a><a id="3080" class="Symbol">)</a> <a id="3082" href="/Substitution/#3039" class="Bound">Δ</a>
<a id="3084" class="Symbol">(</a><a id="3085" href="/Substitution/#3085" class="Bound">M</a> <a id="3087" href="/Substitution/#3029" class="Function Operator">•</a> <a id="3089" href="/Substitution/#3089" class="Bound">σ</a><a id="3090" class="Symbol">)</a> <a id="3092" href="/Untyped/#3401" class="InductiveConstructor">Z</a> <a id="3094" class="Symbol">=</a> <a id="3096" href="/Substitution/#3085" class="Bound">M</a>
<a id="3098" class="Symbol">(</a><a id="3099" href="/Substitution/#3099" class="Bound">M</a> <a id="3101" href="/Substitution/#3029" class="Function Operator">•</a> <a id="3103" href="/Substitution/#3103" class="Bound">σ</a><a id="3104" class="Symbol">)</a> <a id="3106" class="Symbol">(</a><a id="3107" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="3109" href="/Substitution/#3109" class="Bound">x</a><a id="3110" class="Symbol">)</a> <a id="3112" class="Symbol">=</a> <a id="3114" href="/Substitution/#3103" class="Bound">σ</a> <a id="3116" href="/Substitution/#3109" class="Bound">x</a></pre>

<p>Given two substitutions <code class="highlighter-rouge">σ</code> and <code class="highlighter-rouge">τ</code>, the sequencing operation <code class="highlighter-rouge">σ ⨟ τ</code>
produces the sequence <code class="highlighter-rouge">⧼τ⧽(σ 0), ⧼τ⧽(σ 1), ⧼τ⧽(σ 2), ...</code>.
That is, it composes the two substitutions by first applying
<code class="highlighter-rouge">σ</code> and then applying <code class="highlighter-rouge">τ</code>.</p>

<pre class="Agda"><a id="3361" class="Keyword">infixr</a> <a id="3368" class="Number">5</a> <a id="3370" href="/Substitution/#3375" class="Function Operator">_⨟_</a>

<a id="_⨟_"></a><a id="3375" href="/Substitution/#3375" class="Function Operator">_⨟_</a> <a id="3379" class="Symbol">:</a> <a id="3381" class="Symbol">∀{</a><a id="3383" href="/Substitution/#3383" class="Bound">Γ</a> <a id="3385" href="/Substitution/#3385" class="Bound">Δ</a> <a id="3387" href="/Substitution/#3387" class="Bound">Σ</a><a id="3388" class="Symbol">}</a> <a id="3390" class="Symbol">→</a> <a id="3392" href="/Soundness/#2673" class="Function">Subst</a> <a id="3398" href="/Substitution/#3383" class="Bound">Γ</a> <a id="3400" href="/Substitution/#3385" class="Bound">Δ</a> <a id="3402" class="Symbol">→</a> <a id="3404" href="/Soundness/#2673" class="Function">Subst</a> <a id="3410" href="/Substitution/#3385" class="Bound">Δ</a> <a id="3412" href="/Substitution/#3387" class="Bound">Σ</a> <a id="3414" class="Symbol">→</a> <a id="3416" href="/Soundness/#2673" class="Function">Subst</a> <a id="3422" href="/Substitution/#3383" class="Bound">Γ</a> <a id="3424" href="/Substitution/#3387" class="Bound">Σ</a>
<a id="3426" href="/Substitution/#3426" class="Bound">σ</a> <a id="3428" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="3430" href="/Substitution/#3430" class="Bound">τ</a> <a id="3432" class="Symbol">=</a> <a id="3434" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="3436" href="/Substitution/#3430" class="Bound">τ</a> <a id="3438" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="3440" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="3442" href="/Substitution/#3426" class="Bound">σ</a></pre>

<p>For the sequencing operation, Abadi et al. use the notation of
function composition, writting <code class="highlighter-rouge">σ ∘ τ</code>, but still with <code class="highlighter-rouge">σ</code> applied
before <code class="highlighter-rouge">τ</code>, which is the opposite of standard mathematical
practice. We instead write <code class="highlighter-rouge">σ ⨟ τ</code>, because the semicolon has become
the standard notation for forward function composition.</p>

<h2 id="the-σ-algebra-equations">The σ algebra equations</h2>

<p>The σ algebra includes the following equations.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(sub-head)  ⧼ M • σ ⧽ (` Z) ≡ M
(sub-tail)  ↑ ⨟ (M • σ)    ≡ σ
(sub-η)     (⧼ σ ⧽ (` Z)) • (↑ ⨟ σ) ≡ σ
(Z-shift)   (` Z) • ↑      ≡ ids

(sub-id)    ⧼ ids ⧽ M      ≡ M
(sub-app)   ⧼ σ ⧽ (L · M)  ≡ (⧼ σ ⧽ L) · (⧼ σ ⧽ M)
(sub-abs)   ⧼ σ ⧽ (ƛ N)    ≡ ƛ ⧼ σ ⧽ N
(sub-sub)   ⧼ τ ⧽ ⧼ σ ⧽ M  ≡ ⧼ σ ⨟ τ ⧽ M

(sub-idL)   ids ⨟ σ        ≡ σ
(sub-idR)   σ ⨟ ids        ≡ σ
(sub-assoc) (σ ⨟ τ) ⨟ θ    ≡ σ ⨟ (τ ⨟ θ)
(sub-dist)  (M • σ) ⨟ τ    ≡ (⧼ τ ⧽ M) • (σ ⨟ τ)
</code></pre></div></div>

<p>The first group of equations describe how the <code class="highlighter-rouge">•</code> operator acts like cons.
The equation <code class="highlighter-rouge">sub-head</code> says that the variable zero <code class="highlighter-rouge">Z</code> returns the
head of the sequence (it acts like the <code class="highlighter-rouge">car</code> of Lisp).  Similarly,
<code class="highlighter-rouge">sub-tail</code> says that sequencing with shift <code class="highlighter-rouge">↑</code> returns the tail of the
sequence (it acts like <code class="highlighter-rouge">cdr</code> of Lisp).  The <code class="highlighter-rouge">sub-η</code> equation is the
η-expansion rule for sequences, saying that taking the head and tail
of a sequence, and then cons’ing them together yields the original
sequence. The <code class="highlighter-rouge">Z-shift</code> equation says that cons’ing zero onto the
shifted sequence produces the identity sequence.</p>

<p>The next four equations involve applying substitutions to terms.  The
equation <code class="highlighter-rouge">sub-id</code> says that the identity substitution returns the term
unchanged. The equations <code class="highlighter-rouge">sub-app</code> and <code class="highlighter-rouge">sub-abs</code> says that
substitution is a congruence for the lambda calculus. The <code class="highlighter-rouge">sub-sub</code>
equation says that the sequence operator <code class="highlighter-rouge">⨟</code> behaves as intended.</p>

<p>The last four equations concern the sequencing of substitutions.
The first two equations, <code class="highlighter-rouge">sub-idL</code> and <code class="highlighter-rouge">sub-idR</code>, say that
<code class="highlighter-rouge">ids</code> is the left and right unit of the sequencing operator.
The <code class="highlighter-rouge">sub-assoc</code> equation says that sequencing is associative.
Finally, <code class="highlighter-rouge">sub-dist</code> says that post-sequencing distributes through cons.</p>

<h2 id="relating-the-σ-algebra-and-subsitution-functions">Relating the σ algebra and subsitution functions</h2>

<p>The definitions of substitution <code class="highlighter-rouge">N [ M ]</code> and parallel subsitution
<code class="highlighter-rouge">subst σ N</code> depend on several auxiliary functions: <code class="highlighter-rouge">rename</code>, <code class="highlighter-rouge">exts</code>,
<code class="highlighter-rouge">ext</code>, and <code class="highlighter-rouge">subst-zero</code>. We shall relate those functions to terms in
the σ algebra.</p>

<p>To begin with, renaming can be expressed in terms of substitution.
We have</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rename ρ M ≡ ⧼ ren ρ ⧽ M               (rename-subst-ren)
</code></pre></div></div>

<p>where <code class="highlighter-rouge">ren</code> turns a renaming <code class="highlighter-rouge">ρ</code> into a substitution by post-composing
<code class="highlighter-rouge">ρ</code> with the identity substitution.</p>

<pre class="Agda"><a id="ren"></a><a id="6144" href="/Substitution/#6144" class="Function">ren</a> <a id="6148" class="Symbol">:</a> <a id="6150" class="Symbol">∀{</a><a id="6152" href="/Substitution/#6152" class="Bound">Γ</a> <a id="6154" href="/Substitution/#6154" class="Bound">Δ</a><a id="6155" class="Symbol">}</a> <a id="6157" class="Symbol">→</a> <a id="6159" href="/Denotational/#23286" class="Function">Rename</a> <a id="6166" href="/Substitution/#6152" class="Bound">Γ</a> <a id="6168" href="/Substitution/#6154" class="Bound">Δ</a> <a id="6170" class="Symbol">→</a> <a id="6172" href="/Soundness/#2673" class="Function">Subst</a> <a id="6178" href="/Substitution/#6152" class="Bound">Γ</a> <a id="6180" href="/Substitution/#6154" class="Bound">Δ</a>
<a id="6182" href="/Substitution/#6144" class="Function">ren</a> <a id="6186" href="/Substitution/#6186" class="Bound">ρ</a> <a id="6188" class="Symbol">=</a> <a id="6190" href="/Substitution/#2646" class="Function">ids</a> <a id="6194" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="6196" href="/Substitution/#6186" class="Bound">ρ</a></pre>

<p>When the renaming is the increment function, then it is equivalent to
shift.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ren S_ ≡ ↑                           (ren-shift)

rename S_ M ≡ ⧼ ↑ ⧽ M                 (rename-shift)
</code></pre></div></div>

<p>Next we relate the <code class="highlighter-rouge">exts</code> function to the σ algebra.  Recall that the
<code class="highlighter-rouge">exts</code> function extends a substitution as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exts σ = ` Z, rename S_ (σ 0), rename S_ (σ 1), rename S_ (σ 2), ...
</code></pre></div></div>

<p>So <code class="highlighter-rouge">exts</code> is equivalent to cons’ing Z onto the sequence formed
by applying <code class="highlighter-rouge">σ</code> and then shifting.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exts σ ≡ ` Z • (σ ⨟ ↑)                (exts-cons-shift)
</code></pre></div></div>

<p>The <code class="highlighter-rouge">ext</code> function does the same job as <code class="highlighter-rouge">exts</code> but for renamings
instead of substitutions. So composing <code class="highlighter-rouge">ext</code> with <code class="highlighter-rouge">ren</code> is the same as
composing <code class="highlighter-rouge">ren</code> with <code class="highlighter-rouge">exts</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ren (ext ρ) ≡ exts (ren ρ)            (ren-ext)
</code></pre></div></div>

<p>Thus, we can recast the <code class="highlighter-rouge">exts-cons-shift</code> equation in terms of
renamings.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ren (ext ρ) ≡ ` Z • (ren ρ ⨟ ↑)       (ext-cons-Z-shift)
</code></pre></div></div>

<p>It is also useful to specialize the <code class="highlighter-rouge">sub-sub</code> equation of the σ
algebra to the situation where the first substitution is a renaming.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>⧼ σ ⧽ (rename ρ M) ≡ ⧼ σ ∘ ρ ⧽ M       (rename-subst)
</code></pre></div></div>

<p>Finally, the <code class="highlighter-rouge">subst-zero M</code> substitution is equivalent to cons’ing
<code class="highlighter-rouge">M</code> onto the identity substitution.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>subst-zero M ≡ M • ids                (subst-Z-cons-ids)
</code></pre></div></div>

<h2 id="proofs-of-sub-head-sub-tail-sub-η-z-shift-sub-idl-sub-dist-and-sub-app">Proofs of sub-head, sub-tail, sub-η, Z-shift, sub-idL, sub-dist, and sub-app</h2>

<p>We start with the proofs that are immediate from the definitions of
the operators.</p>

<pre class="Agda"><a id="sub-head"></a><a id="7654" href="/Substitution/#7654" class="Function">sub-head</a> <a id="7663" class="Symbol">:</a> <a id="7665" class="Symbol">∀</a> <a id="7667" class="Symbol">{</a><a id="7668" href="/Substitution/#7668" class="Bound">Γ</a> <a id="7670" href="/Substitution/#7670" class="Bound">Δ</a><a id="7671" class="Symbol">}</a> <a id="7673" class="Symbol">{</a><a id="7674" href="/Substitution/#7674" class="Bound">A</a><a id="7675" class="Symbol">}</a> <a id="7677" class="Symbol">{</a><a id="7678" href="/Substitution/#7678" class="Bound">M</a> <a id="7680" class="Symbol">:</a> <a id="7682" href="/Substitution/#7670" class="Bound">Δ</a> <a id="7684" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="7686" href="/Substitution/#7674" class="Bound">A</a><a id="7687" class="Symbol">}{</a><a id="7689" href="/Substitution/#7689" class="Bound">σ</a> <a id="7691" class="Symbol">:</a> <a id="7693" href="/Soundness/#2673" class="Function">Subst</a> <a id="7699" href="/Substitution/#7668" class="Bound">Γ</a> <a id="7701" href="/Substitution/#7670" class="Bound">Δ</a><a id="7702" class="Symbol">}</a>
         <a id="7713" class="Symbol">→</a> <a id="7715" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="7717" href="/Substitution/#7678" class="Bound">M</a> <a id="7719" href="/Substitution/#3029" class="Function Operator">•</a> <a id="7721" href="/Substitution/#7689" class="Bound">σ</a> <a id="7723" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="7725" class="Symbol">(</a><a id="7726" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="7728" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="7729" class="Symbol">)</a> <a id="7731" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="7733" href="/Substitution/#7678" class="Bound">M</a>
<a id="7735" href="/Substitution/#7654" class="Function">sub-head</a> <a id="7744" class="Symbol">=</a> <a id="7746" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<pre class="Agda"><a id="sub-tail"></a><a id="7776" href="/Substitution/#7776" class="Function">sub-tail</a> <a id="7785" class="Symbol">:</a> <a id="7787" class="Symbol">∀{</a><a id="7789" href="/Substitution/#7789" class="Bound">Γ</a> <a id="7791" href="/Substitution/#7791" class="Bound">Δ</a><a id="7792" class="Symbol">}</a> <a id="7794" class="Symbol">{</a><a id="7795" href="/Substitution/#7795" class="Bound">A</a> <a id="7797" href="/Substitution/#7797" class="Bound">B</a><a id="7798" class="Symbol">}</a> <a id="7800" class="Symbol">{</a><a id="7801" href="/Substitution/#7801" class="Bound">M</a> <a id="7803" class="Symbol">:</a> <a id="7805" href="/Substitution/#7791" class="Bound">Δ</a> <a id="7807" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="7809" href="/Substitution/#7795" class="Bound">A</a><a id="7810" class="Symbol">}</a> <a id="7812" class="Symbol">{</a><a id="7813" href="/Substitution/#7813" class="Bound">σ</a> <a id="7815" class="Symbol">:</a> <a id="7817" href="/Soundness/#2673" class="Function">Subst</a> <a id="7823" href="/Substitution/#7789" class="Bound">Γ</a> <a id="7825" href="/Substitution/#7791" class="Bound">Δ</a><a id="7826" class="Symbol">}</a>
         <a id="7837" class="Symbol">→</a> <a id="7839" class="Symbol">(</a><a id="7840" href="/Substitution/#2774" class="Function">↑</a> <a id="7842" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="7844" href="/Substitution/#7801" class="Bound">M</a> <a id="7846" href="/Substitution/#3029" class="Function Operator">•</a> <a id="7848" href="/Substitution/#7813" class="Bound">σ</a><a id="7849" class="Symbol">)</a> <a id="7851" class="Symbol">{</a><a id="7852" class="Argument">A</a> <a id="7854" class="Symbol">=</a> <a id="7856" href="/Substitution/#7797" class="Bound">B</a><a id="7857" class="Symbol">}</a> <a id="7859" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="7861" href="/Substitution/#7813" class="Bound">σ</a>
<a id="7863" href="/Substitution/#7776" class="Function">sub-tail</a> <a id="7872" class="Symbol">=</a> <a id="7874" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="7889" class="Symbol">λ</a> <a id="7891" href="/Substitution/#7891" class="Bound">x</a> <a id="7893" class="Symbol">→</a> <a id="7895" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<pre class="Agda"><a id="sub-η"></a><a id="7925" href="/Substitution/#7925" class="Function">sub-η</a> <a id="7931" class="Symbol">:</a> <a id="7933" class="Symbol">∀{</a><a id="7935" href="/Substitution/#7935" class="Bound">Γ</a> <a id="7937" href="/Substitution/#7937" class="Bound">Δ</a><a id="7938" class="Symbol">}</a> <a id="7940" class="Symbol">{</a><a id="7941" href="/Substitution/#7941" class="Bound">A</a> <a id="7943" href="/Substitution/#7943" class="Bound">B</a><a id="7944" class="Symbol">}</a> <a id="7946" class="Symbol">{</a><a id="7947" href="/Substitution/#7947" class="Bound">σ</a> <a id="7949" class="Symbol">:</a> <a id="7951" href="/Soundness/#2673" class="Function">Subst</a> <a id="7957" class="Symbol">(</a><a id="7958" href="/Substitution/#7935" class="Bound">Γ</a> <a id="7960" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="7962" href="/Substitution/#7941" class="Bound">A</a><a id="7963" class="Symbol">)</a> <a id="7965" href="/Substitution/#7937" class="Bound">Δ</a><a id="7966" class="Symbol">}</a> 
      <a id="7975" class="Symbol">→</a> <a id="7977" class="Symbol">(</a><a id="7978" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="7980" href="/Substitution/#7947" class="Bound">σ</a> <a id="7982" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="7984" class="Symbol">(</a><a id="7985" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="7987" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="7988" class="Symbol">)</a> <a id="7990" href="/Substitution/#3029" class="Function Operator">•</a> <a id="7992" class="Symbol">(</a><a id="7993" href="/Substitution/#2774" class="Function">↑</a> <a id="7995" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="7997" href="/Substitution/#7947" class="Bound">σ</a><a id="7998" class="Symbol">))</a> <a id="8001" class="Symbol">{</a><a id="8002" class="Argument">A</a> <a id="8004" class="Symbol">=</a> <a id="8006" href="/Substitution/#7943" class="Bound">B</a><a id="8007" class="Symbol">}</a> <a id="8009" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8011" href="/Substitution/#7947" class="Bound">σ</a>
<a id="8013" href="/Substitution/#7925" class="Function">sub-η</a> <a id="8019" class="Symbol">{</a><a id="8020" href="/Substitution/#8020" class="Bound">Γ</a><a id="8021" class="Symbol">}{</a><a id="8023" href="/Substitution/#8023" class="Bound">Δ</a><a id="8024" class="Symbol">}{</a><a id="8026" href="/Substitution/#8026" class="Bound">A</a><a id="8027" class="Symbol">}{</a><a id="8029" href="/Substitution/#8029" class="Bound">B</a><a id="8030" class="Symbol">}{</a><a id="8032" href="/Substitution/#8032" class="Bound">σ</a><a id="8033" class="Symbol">}</a> <a id="8035" class="Symbol">=</a> <a id="8037" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="8052" class="Symbol">λ</a> <a id="8054" href="/Substitution/#8054" class="Bound">x</a> <a id="8056" class="Symbol">→</a> <a id="8058" href="/Substitution/#8077" class="Function">lemma</a>
   <a id="8067" class="Keyword">where</a> 
   <a id="8077" href="/Substitution/#8077" class="Function">lemma</a> <a id="8083" class="Symbol">:</a> <a id="8085" class="Symbol">∀</a> <a id="8087" class="Symbol">{</a><a id="8088" href="/Substitution/#8088" class="Bound">x</a><a id="8089" class="Symbol">}</a> <a id="8091" class="Symbol">→</a> <a id="8093" class="Symbol">((</a><a id="8095" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="8097" href="/Substitution/#8032" class="Bound">σ</a> <a id="8099" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="8101" class="Symbol">(</a><a id="8102" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="8104" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="8105" class="Symbol">))</a> <a id="8108" href="/Substitution/#3029" class="Function Operator">•</a> <a id="8110" class="Symbol">(</a><a id="8111" href="/Substitution/#2774" class="Function">↑</a> <a id="8113" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="8115" href="/Substitution/#8032" class="Bound">σ</a><a id="8116" class="Symbol">))</a> <a id="8119" href="/Substitution/#8088" class="Bound">x</a> <a id="8121" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8123" href="/Substitution/#8032" class="Bound">σ</a> <a id="8125" href="/Substitution/#8088" class="Bound">x</a>
   <a id="8130" href="/Substitution/#8077" class="Function">lemma</a> <a id="8136" class="Symbol">{</a><a id="8137" class="Argument">x</a> <a id="8139" class="Symbol">=</a> <a id="8141" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="8142" class="Symbol">}</a> <a id="8144" class="Symbol">=</a> <a id="8146" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
   <a id="8154" href="/Substitution/#8077" class="Function">lemma</a> <a id="8160" class="Symbol">{</a><a id="8161" class="Argument">x</a> <a id="8163" class="Symbol">=</a> <a id="8165" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="8167" href="/Substitution/#8167" class="Bound">x</a><a id="8168" class="Symbol">}</a> <a id="8170" class="Symbol">=</a> <a id="8172" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<pre class="Agda"><a id="Z-shift"></a><a id="8202" href="/Substitution/#8202" class="Function">Z-shift</a> <a id="8210" class="Symbol">:</a> <a id="8212" class="Symbol">∀{</a><a id="8214" href="/Substitution/#8214" class="Bound">Γ</a><a id="8215" class="Symbol">}{</a><a id="8217" href="/Substitution/#8217" class="Bound">A</a> <a id="8219" href="/Substitution/#8219" class="Bound">B</a><a id="8220" class="Symbol">}</a>
        <a id="8230" class="Symbol">→</a> <a id="8232" class="Symbol">((</a><a id="8234" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="8236" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="8237" class="Symbol">)</a> <a id="8239" href="/Substitution/#3029" class="Function Operator">•</a> <a id="8241" href="/Substitution/#2774" class="Function">↑</a><a id="8242" class="Symbol">)</a> <a id="8244" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8246" href="/Substitution/#2646" class="Function">ids</a> <a id="8250" class="Symbol">{</a><a id="8251" href="/Substitution/#8214" class="Bound">Γ</a> <a id="8253" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="8255" href="/Substitution/#8217" class="Bound">A</a><a id="8256" class="Symbol">}</a> <a id="8258" class="Symbol">{</a><a id="8259" href="/Substitution/#8219" class="Bound">B</a><a id="8260" class="Symbol">}</a>
<a id="8262" href="/Substitution/#8202" class="Function">Z-shift</a> <a id="8270" class="Symbol">{</a><a id="8271" href="/Substitution/#8271" class="Bound">Γ</a><a id="8272" class="Symbol">}{</a><a id="8274" href="/Substitution/#8274" class="Bound">A</a><a id="8275" class="Symbol">}{</a><a id="8277" href="/Substitution/#8277" class="Bound">B</a><a id="8278" class="Symbol">}</a> <a id="8280" class="Symbol">=</a> <a id="8282" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="8297" href="/Substitution/#8316" class="Function">lemma</a> 
   <a id="8307" class="Keyword">where</a>
   <a id="8316" href="/Substitution/#8316" class="Function">lemma</a> <a id="8322" class="Symbol">:</a> <a id="8324" class="Symbol">(</a><a id="8325" href="/Substitution/#8325" class="Bound">x</a> <a id="8327" class="Symbol">:</a> <a id="8329" href="/Substitution/#8271" class="Bound">Γ</a> <a id="8331" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="8333" href="/Substitution/#8274" class="Bound">A</a> <a id="8335" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="8337" href="/Substitution/#8277" class="Bound">B</a><a id="8338" class="Symbol">)</a> <a id="8340" class="Symbol">→</a> <a id="8342" class="Symbol">((</a><a id="8344" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="8346" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="8347" class="Symbol">)</a> <a id="8349" href="/Substitution/#3029" class="Function Operator">•</a> <a id="8351" href="/Substitution/#2774" class="Function">↑</a><a id="8352" class="Symbol">)</a> <a id="8354" href="/Substitution/#8325" class="Bound">x</a> <a id="8356" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8358" href="/Substitution/#2646" class="Function">ids</a> <a id="8362" href="/Substitution/#8325" class="Bound">x</a>
   <a id="8367" href="/Substitution/#8316" class="Function">lemma</a> <a id="8373" href="/Untyped/#3401" class="InductiveConstructor">Z</a> <a id="8375" class="Symbol">=</a> <a id="8377" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
   <a id="8385" href="/Substitution/#8316" class="Function">lemma</a> <a id="8391" class="Symbol">(</a><a id="8392" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="8394" href="/Substitution/#8394" class="Bound">y</a><a id="8395" class="Symbol">)</a> <a id="8397" class="Symbol">=</a> <a id="8399" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<pre class="Agda"><a id="sub-idL"></a><a id="8429" href="/Substitution/#8429" class="Function">sub-idL</a> <a id="8437" class="Symbol">:</a> <a id="8439" class="Symbol">∀{</a><a id="8441" href="/Substitution/#8441" class="Bound">Γ</a> <a id="8443" href="/Substitution/#8443" class="Bound">Δ</a><a id="8444" class="Symbol">}</a> <a id="8446" class="Symbol">{</a><a id="8447" href="/Substitution/#8447" class="Bound">σ</a> <a id="8449" class="Symbol">:</a> <a id="8451" href="/Soundness/#2673" class="Function">Subst</a> <a id="8457" href="/Substitution/#8441" class="Bound">Γ</a> <a id="8459" href="/Substitution/#8443" class="Bound">Δ</a><a id="8460" class="Symbol">}</a> <a id="8462" class="Symbol">{</a><a id="8463" href="/Substitution/#8463" class="Bound">A</a><a id="8464" class="Symbol">}</a>
       <a id="8473" class="Symbol">→</a> <a id="8475" href="/Substitution/#2646" class="Function">ids</a> <a id="8479" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="8481" href="/Substitution/#8447" class="Bound">σ</a> <a id="8483" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8485" href="/Substitution/#8447" class="Bound">σ</a> <a id="8487" class="Symbol">{</a><a id="8488" href="/Substitution/#8463" class="Bound">A</a><a id="8489" class="Symbol">}</a>
<a id="8491" href="/Substitution/#8429" class="Function">sub-idL</a> <a id="8499" class="Symbol">=</a> <a id="8501" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="8516" class="Symbol">λ</a> <a id="8518" href="/Substitution/#8518" class="Bound">x</a> <a id="8520" class="Symbol">→</a> <a id="8522" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>

<a id="8528" class="Comment">{- todo: remove this and directly use sub-idL  -}</a>
<a id="sub-idL-x"></a><a id="8578" href="/Substitution/#8578" class="Function">sub-idL-x</a> <a id="8588" class="Symbol">:</a> <a id="8590" class="Symbol">∀{</a><a id="8592" href="/Substitution/#8592" class="Bound">Γ</a> <a id="8594" href="/Substitution/#8594" class="Bound">Δ</a><a id="8595" class="Symbol">}</a> <a id="8597" class="Symbol">{</a><a id="8598" href="/Substitution/#8598" class="Bound">B</a><a id="8599" class="Symbol">}</a> <a id="8601" class="Symbol">{</a><a id="8602" href="/Substitution/#8602" class="Bound">σ</a> <a id="8604" class="Symbol">:</a> <a id="8606" href="/Soundness/#2673" class="Function">Subst</a> <a id="8612" href="/Substitution/#8592" class="Bound">Γ</a> <a id="8614" href="/Substitution/#8594" class="Bound">Δ</a><a id="8615" class="Symbol">}</a> <a id="8617" class="Symbol">{</a><a id="8618" href="/Substitution/#8618" class="Bound">x</a> <a id="8620" class="Symbol">:</a> <a id="8622" href="/Substitution/#8592" class="Bound">Γ</a> <a id="8624" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="8626" href="/Substitution/#8598" class="Bound">B</a><a id="8627" class="Symbol">}</a>
       <a id="8636" class="Symbol">→</a> <a id="8638" class="Symbol">(</a><a id="8639" href="/Substitution/#2646" class="Function">ids</a> <a id="8643" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="8645" href="/Substitution/#8602" class="Bound">σ</a><a id="8646" class="Symbol">)</a> <a id="8648" href="/Substitution/#8618" class="Bound">x</a> <a id="8650" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8652" href="/Substitution/#8602" class="Bound">σ</a> <a id="8654" href="/Substitution/#8618" class="Bound">x</a>
<a id="8656" href="/Substitution/#8578" class="Function">sub-idL-x</a> <a id="8666" class="Symbol">=</a> <a id="8668" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<pre class="Agda"><a id="sub-dist"></a><a id="8698" href="/Substitution/#8698" class="Function">sub-dist</a> <a id="8707" class="Symbol">:</a>  <a id="8710" class="Symbol">∀{</a><a id="8712" href="/Substitution/#8712" class="Bound">Γ</a> <a id="8714" href="/Substitution/#8714" class="Bound">Δ</a> <a id="8716" href="/Substitution/#8716" class="Bound">Σ</a> <a id="8718" class="Symbol">:</a> <a id="8720" href="/Untyped/#2980" class="Datatype">Context</a><a id="8727" class="Symbol">}</a> <a id="8729" class="Symbol">{</a><a id="8730" href="/Substitution/#8730" class="Bound">A</a> <a id="8732" href="/Substitution/#8732" class="Bound">B</a><a id="8733" class="Symbol">}</a> <a id="8735" class="Symbol">{</a><a id="8736" href="/Substitution/#8736" class="Bound">σ</a> <a id="8738" class="Symbol">:</a> <a id="8740" href="/Soundness/#2673" class="Function">Subst</a> <a id="8746" href="/Substitution/#8712" class="Bound">Γ</a> <a id="8748" href="/Substitution/#8714" class="Bound">Δ</a><a id="8749" class="Symbol">}</a> <a id="8751" class="Symbol">{</a><a id="8752" href="/Substitution/#8752" class="Bound">τ</a> <a id="8754" class="Symbol">:</a> <a id="8756" href="/Soundness/#2673" class="Function">Subst</a> <a id="8762" href="/Substitution/#8714" class="Bound">Δ</a> <a id="8764" href="/Substitution/#8716" class="Bound">Σ</a><a id="8765" class="Symbol">}</a>
              <a id="8781" class="Symbol">{</a><a id="8782" href="/Substitution/#8782" class="Bound">M</a> <a id="8784" class="Symbol">:</a> <a id="8786" href="/Substitution/#8714" class="Bound">Δ</a> <a id="8788" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="8790" href="/Substitution/#8730" class="Bound">A</a><a id="8791" class="Symbol">}</a> <a id="8793" class="Symbol">{</a><a id="8794" href="/Substitution/#8794" class="Bound">x</a> <a id="8796" class="Symbol">:</a> <a id="8798" href="/Substitution/#8712" class="Bound">Γ</a> <a id="8800" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="8802" href="/Substitution/#8730" class="Bound">A</a> <a id="8804" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="8806" href="/Substitution/#8732" class="Bound">B</a><a id="8807" class="Symbol">}</a>
         <a id="8818" class="Symbol">→</a> <a id="8820" class="Symbol">((</a><a id="8822" href="/Substitution/#8782" class="Bound">M</a> <a id="8824" href="/Substitution/#3029" class="Function Operator">•</a> <a id="8826" href="/Substitution/#8736" class="Bound">σ</a><a id="8827" class="Symbol">)</a> <a id="8829" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="8831" href="/Substitution/#8752" class="Bound">τ</a><a id="8832" class="Symbol">)</a> <a id="8834" href="/Substitution/#8794" class="Bound">x</a> <a id="8836" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="8838" class="Symbol">((</a><a id="8840" href="/Untyped/#6931" class="Function">subst</a> <a id="8846" href="/Substitution/#8752" class="Bound">τ</a> <a id="8848" href="/Substitution/#8782" class="Bound">M</a><a id="8849" class="Symbol">)</a> <a id="8851" href="/Substitution/#3029" class="Function Operator">•</a> <a id="8853" class="Symbol">(</a><a id="8854" href="/Substitution/#8736" class="Bound">σ</a> <a id="8856" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="8858" href="/Substitution/#8752" class="Bound">τ</a><a id="8859" class="Symbol">))</a> <a id="8862" href="/Substitution/#8794" class="Bound">x</a>
<a id="8864" href="/Substitution/#8698" class="Function">sub-dist</a> <a id="8873" class="Symbol">{</a><a id="8874" class="Argument">x</a> <a id="8876" class="Symbol">=</a> <a id="8878" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="8879" class="Symbol">}</a> <a id="8881" class="Symbol">=</a> <a id="8883" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="8888" href="/Substitution/#8698" class="Function">sub-dist</a> <a id="8897" class="Symbol">{</a><a id="8898" class="Argument">x</a> <a id="8900" class="Symbol">=</a> <a id="8902" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="8904" href="/Substitution/#8904" class="Bound">x</a><a id="8905" class="Symbol">}</a> <a id="8907" class="Symbol">=</a> <a id="8909" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<pre class="Agda"><a id="sub-app"></a><a id="8939" href="/Substitution/#8939" class="Function">sub-app</a> <a id="8947" class="Symbol">:</a> <a id="8949" class="Symbol">∀{</a><a id="8951" href="/Substitution/#8951" class="Bound">Γ</a> <a id="8953" href="/Substitution/#8953" class="Bound">Δ</a><a id="8954" class="Symbol">}</a> <a id="8956" class="Symbol">{</a><a id="8957" href="/Substitution/#8957" class="Bound">σ</a> <a id="8959" class="Symbol">:</a> <a id="8961" href="/Soundness/#2673" class="Function">Subst</a> <a id="8967" href="/Substitution/#8951" class="Bound">Γ</a> <a id="8969" href="/Substitution/#8953" class="Bound">Δ</a><a id="8970" class="Symbol">}</a> <a id="8972" class="Symbol">{</a><a id="8973" href="/Substitution/#8973" class="Bound">L</a> <a id="8975" class="Symbol">:</a> <a id="8977" href="/Substitution/#8951" class="Bound">Γ</a> <a id="8979" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="8981" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="8982" class="Symbol">}{</a><a id="8984" href="/Substitution/#8984" class="Bound">M</a> <a id="8986" class="Symbol">:</a> <a id="8988" href="/Substitution/#8951" class="Bound">Γ</a> <a id="8990" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="8992" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="8993" class="Symbol">}</a>
        <a id="9003" class="Symbol">→</a> <a id="9005" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="9007" href="/Substitution/#8957" class="Bound">σ</a> <a id="9009" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="9011" class="Symbol">(</a><a id="9012" href="/Substitution/#8973" class="Bound">L</a> <a id="9014" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="9016" href="/Substitution/#8984" class="Bound">M</a><a id="9017" class="Symbol">)</a>  <a id="9020" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="9022" class="Symbol">(</a><a id="9023" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="9025" href="/Substitution/#8957" class="Bound">σ</a> <a id="9027" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="9029" href="/Substitution/#8973" class="Bound">L</a><a id="9030" class="Symbol">)</a> <a id="9032" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="9034" class="Symbol">(</a><a id="9035" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="9037" href="/Substitution/#8957" class="Bound">σ</a> <a id="9039" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="9041" href="/Substitution/#8984" class="Bound">M</a><a id="9042" class="Symbol">)</a>
<a id="9044" href="/Substitution/#8939" class="Function">sub-app</a> <a id="9052" class="Symbol">=</a> <a id="9054" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<h2 id="interlude-congruences">Interlude: congruences</h2>

<p>In this section we establish congruence rules for the σ algebra
operators, in preparation for using them during equational
reasononing.</p>

<pre class="Agda"><a id="cong-cons"></a><a id="9257" href="/Substitution/#9257" class="Function">cong-cons</a> <a id="9267" class="Symbol">:</a> <a id="9269" class="Symbol">∀{</a><a id="9271" href="/Substitution/#9271" class="Bound">Γ</a> <a id="9273" href="/Substitution/#9273" class="Bound">Δ</a><a id="9274" class="Symbol">}{</a><a id="9276" href="/Substitution/#9276" class="Bound">A</a><a id="9277" class="Symbol">}{</a><a id="9279" href="/Substitution/#9279" class="Bound">M</a> <a id="9281" href="/Substitution/#9281" class="Bound">N</a> <a id="9283" class="Symbol">:</a> <a id="9285" href="/Substitution/#9273" class="Bound">Δ</a> <a id="9287" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="9289" href="/Substitution/#9276" class="Bound">A</a><a id="9290" class="Symbol">}{</a><a id="9292" href="/Substitution/#9292" class="Bound">σ</a> <a id="9294" href="/Substitution/#9294" class="Bound">τ</a> <a id="9296" class="Symbol">:</a> <a id="9298" href="/Soundness/#2673" class="Function">Subst</a> <a id="9304" href="/Substitution/#9271" class="Bound">Γ</a> <a id="9306" href="/Substitution/#9273" class="Bound">Δ</a><a id="9307" class="Symbol">}</a>
  <a id="9311" class="Symbol">→</a> <a id="9313" href="/Substitution/#9279" class="Bound">M</a> <a id="9315" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="9317" href="/Substitution/#9281" class="Bound">N</a> <a id="9319" class="Symbol">→</a> <a id="9321" class="Symbol">(∀{</a><a id="9324" href="/Substitution/#9324" class="Bound">A</a><a id="9325" class="Symbol">}</a> <a id="9327" class="Symbol">→</a> <a id="9329" href="/Substitution/#9292" class="Bound">σ</a> <a id="9331" class="Symbol">{</a><a id="9332" href="/Substitution/#9324" class="Bound">A</a><a id="9333" class="Symbol">}</a> <a id="9335" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="9337" href="/Substitution/#9294" class="Bound">τ</a> <a id="9339" class="Symbol">{</a><a id="9340" href="/Substitution/#9324" class="Bound">A</a><a id="9341" class="Symbol">})</a>
  <a id="9346" class="Symbol">→</a> <a id="9348" class="Symbol">∀{</a><a id="9350" href="/Substitution/#9350" class="Bound">A</a><a id="9351" class="Symbol">}</a> <a id="9353" class="Symbol">→</a> <a id="9355" class="Symbol">(</a><a id="9356" href="/Substitution/#9279" class="Bound">M</a> <a id="9358" href="/Substitution/#3029" class="Function Operator">•</a> <a id="9360" href="/Substitution/#9292" class="Bound">σ</a><a id="9361" class="Symbol">)</a> <a id="9363" class="Symbol">{</a><a id="9364" href="/Substitution/#9350" class="Bound">A</a><a id="9365" class="Symbol">}</a> <a id="9367" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="9369" class="Symbol">(</a><a id="9370" href="/Substitution/#9281" class="Bound">N</a> <a id="9372" href="/Substitution/#3029" class="Function Operator">•</a> <a id="9374" href="/Substitution/#9294" class="Bound">τ</a><a id="9375" class="Symbol">)</a> <a id="9377" class="Symbol">{</a><a id="9378" href="/Substitution/#9350" class="Bound">A</a><a id="9379" class="Symbol">}</a>
<a id="9381" href="/Substitution/#9257" class="Function">cong-cons</a><a id="9390" class="Symbol">{</a><a id="9391" href="/Substitution/#9391" class="Bound">Γ</a><a id="9392" class="Symbol">}{</a><a id="9394" href="/Substitution/#9394" class="Bound">Δ</a><a id="9395" class="Symbol">}{</a><a id="9397" href="/Substitution/#9397" class="Bound">A</a><a id="9398" class="Symbol">}{</a><a id="9400" href="/Substitution/#9400" class="Bound">M</a><a id="9401" class="Symbol">}{</a><a id="9403" href="/Substitution/#9403" class="Bound">N</a><a id="9404" class="Symbol">}{</a><a id="9406" href="/Substitution/#9406" class="Bound">σ</a><a id="9407" class="Symbol">}{</a><a id="9409" href="/Substitution/#9409" class="Bound">τ</a><a id="9410" class="Symbol">}</a> <a id="9412" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="9417" href="/Substitution/#9417" class="Bound">st</a> <a id="9420" class="Symbol">{</a><a id="9421" href="/Substitution/#9421" class="Bound">A&#39;</a><a id="9423" class="Symbol">}</a> <a id="9425" class="Symbol">=</a> <a id="9427" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="9442" href="/Substitution/#9458" class="Function">lemma</a>
  <a id="9450" class="Keyword">where</a>
  <a id="9458" href="/Substitution/#9458" class="Function">lemma</a> <a id="9464" class="Symbol">:</a> <a id="9466" class="Symbol">(</a><a id="9467" href="/Substitution/#9467" class="Bound">x</a> <a id="9469" class="Symbol">:</a> <a id="9471" href="/Substitution/#9391" class="Bound">Γ</a> <a id="9473" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="9475" href="/Substitution/#9397" class="Bound">A</a> <a id="9477" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="9479" href="/Substitution/#9421" class="Bound">A&#39;</a><a id="9481" class="Symbol">)</a> <a id="9483" class="Symbol">→</a> <a id="9485" class="Symbol">(</a><a id="9486" href="/Substitution/#9400" class="Bound">M</a> <a id="9488" href="/Substitution/#3029" class="Function Operator">•</a> <a id="9490" href="/Substitution/#9406" class="Bound">σ</a><a id="9491" class="Symbol">)</a> <a id="9493" href="/Substitution/#9467" class="Bound">x</a> <a id="9495" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="9497" class="Symbol">(</a><a id="9498" href="/Substitution/#9400" class="Bound">M</a> <a id="9500" href="/Substitution/#3029" class="Function Operator">•</a> <a id="9502" href="/Substitution/#9409" class="Bound">τ</a><a id="9503" class="Symbol">)</a> <a id="9505" href="/Substitution/#9467" class="Bound">x</a>
  <a id="9509" href="/Substitution/#9458" class="Function">lemma</a> <a id="9515" href="/Untyped/#3401" class="InductiveConstructor">Z</a> <a id="9517" class="Symbol">=</a> <a id="9519" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
  <a id="9526" href="/Substitution/#9458" class="Function">lemma</a> <a id="9532" class="Symbol">(</a><a id="9533" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="9535" href="/Substitution/#9535" class="Bound">x</a><a id="9536" class="Symbol">)</a> <a id="9538" class="Symbol">=</a> <a id="9540" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1274" class="Function">cong-app</a> <a id="9549" href="/Substitution/#9417" class="Bound">st</a> <a id="9552" href="/Substitution/#9535" class="Bound">x</a></pre>

<pre class="Agda"><a id="cons-congL"></a><a id="9579" href="/Substitution/#9579" class="Function">cons-congL</a> <a id="9590" class="Symbol">:</a> <a id="9592" class="Symbol">∀{</a><a id="9594" href="/Substitution/#9594" class="Bound">Γ</a> <a id="9596" href="/Substitution/#9596" class="Bound">Δ</a> <a id="9598" class="Symbol">:</a> <a id="9600" href="/Untyped/#2980" class="Datatype">Context</a><a id="9607" class="Symbol">}</a> <a id="9609" class="Symbol">{</a><a id="9610" href="/Substitution/#9610" class="Bound">A</a> <a id="9612" href="/Substitution/#9612" class="Bound">B</a><a id="9613" class="Symbol">}</a> <a id="9615" class="Symbol">{</a><a id="9616" href="/Substitution/#9616" class="Bound">σ</a> <a id="9618" class="Symbol">:</a> <a id="9620" href="/Soundness/#2673" class="Function">Subst</a> <a id="9626" href="/Substitution/#9594" class="Bound">Γ</a> <a id="9628" href="/Substitution/#9596" class="Bound">Δ</a><a id="9629" class="Symbol">}</a> <a id="9631" class="Symbol">{</a><a id="9632" href="/Substitution/#9632" class="Bound">M</a> <a id="9634" href="/Substitution/#9634" class="Bound">M&#39;</a> <a id="9637" class="Symbol">:</a> <a id="9639" href="/Substitution/#9596" class="Bound">Δ</a> <a id="9641" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="9643" href="/Substitution/#9610" class="Bound">A</a><a id="9644" class="Symbol">}</a>
            <a id="9658" class="Symbol">{</a><a id="9659" href="/Substitution/#9659" class="Bound">x</a> <a id="9661" class="Symbol">:</a> <a id="9663" href="/Substitution/#9594" class="Bound">Γ</a> <a id="9665" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="9667" href="/Substitution/#9610" class="Bound">A</a> <a id="9669" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="9671" href="/Substitution/#9612" class="Bound">B</a><a id="9672" class="Symbol">}</a>
           <a id="9685" class="Symbol">→</a> <a id="9687" href="/Substitution/#9632" class="Bound">M</a> <a id="9689" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="9691" href="/Substitution/#9634" class="Bound">M&#39;</a>
           <a id="9705" class="Symbol">→</a> <a id="9707" class="Symbol">(</a><a id="9708" href="/Substitution/#9632" class="Bound">M</a> <a id="9710" href="/Substitution/#3029" class="Function Operator">•</a> <a id="9712" href="/Substitution/#9616" class="Bound">σ</a><a id="9713" class="Symbol">)</a> <a id="9715" href="/Substitution/#9659" class="Bound">x</a> <a id="9717" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="9719" class="Symbol">(</a><a id="9720" href="/Substitution/#9634" class="Bound">M&#39;</a> <a id="9723" href="/Substitution/#3029" class="Function Operator">•</a> <a id="9725" href="/Substitution/#9616" class="Bound">σ</a><a id="9726" class="Symbol">)</a> <a id="9728" href="/Substitution/#9659" class="Bound">x</a>
<a id="9730" href="/Substitution/#9579" class="Function">cons-congL</a><a id="9740" class="Symbol">{</a><a id="9741" class="Argument">σ</a> <a id="9743" class="Symbol">=</a> <a id="9745" href="/Substitution/#9745" class="Bound">σ</a><a id="9746" class="Symbol">}{</a><a id="9748" class="Argument">x</a> <a id="9750" class="Symbol">=</a> <a id="9752" href="/Substitution/#9752" class="Bound">x</a><a id="9753" class="Symbol">}</a> <a id="9755" href="/Substitution/#9755" class="Bound">s</a> <a id="9757" class="Symbol">=</a> <a id="9759" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="9764" class="Symbol">(λ</a> <a id="9767" href="/Substitution/#9767" class="Bound">z</a> <a id="9769" class="Symbol">→</a> <a id="9771" class="Symbol">(</a><a id="9772" href="/Substitution/#9767" class="Bound">z</a> <a id="9774" href="/Substitution/#3029" class="Function Operator">•</a> <a id="9776" href="/Substitution/#9745" class="Bound">σ</a><a id="9777" class="Symbol">)</a> <a id="9779" href="/Substitution/#9752" class="Bound">x</a><a id="9780" class="Symbol">)</a> <a id="9782" href="/Substitution/#9755" class="Bound">s</a>

<a id="cons-congR"></a><a id="9785" href="/Substitution/#9785" class="Function">cons-congR</a> <a id="9796" class="Symbol">:</a> <a id="9798" class="Symbol">∀{</a><a id="9800" href="/Substitution/#9800" class="Bound">Γ</a> <a id="9802" href="/Substitution/#9802" class="Bound">Δ</a> <a id="9804" class="Symbol">:</a> <a id="9806" href="/Untyped/#2980" class="Datatype">Context</a><a id="9813" class="Symbol">}</a> <a id="9815" class="Symbol">{</a><a id="9816" href="/Substitution/#9816" class="Bound">A</a> <a id="9818" href="/Substitution/#9818" class="Bound">B</a><a id="9819" class="Symbol">}</a> <a id="9821" class="Symbol">{</a><a id="9822" href="/Substitution/#9822" class="Bound">σ</a> <a id="9824" href="/Substitution/#9824" class="Bound">τ</a> <a id="9826" class="Symbol">:</a> <a id="9828" href="/Soundness/#2673" class="Function">Subst</a> <a id="9834" href="/Substitution/#9800" class="Bound">Γ</a> <a id="9836" href="/Substitution/#9802" class="Bound">Δ</a><a id="9837" class="Symbol">}</a> <a id="9839" class="Symbol">{</a><a id="9840" href="/Substitution/#9840" class="Bound">M</a> <a id="9842" class="Symbol">:</a> <a id="9844" href="/Substitution/#9802" class="Bound">Δ</a> <a id="9846" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="9848" href="/Substitution/#9816" class="Bound">A</a><a id="9849" class="Symbol">}</a>
            <a id="9863" class="Symbol">{</a><a id="9864" href="/Substitution/#9864" class="Bound">x</a> <a id="9866" class="Symbol">:</a> <a id="9868" href="/Substitution/#9800" class="Bound">Γ</a> <a id="9870" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="9872" href="/Substitution/#9816" class="Bound">A</a> <a id="9874" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="9876" href="/Substitution/#9818" class="Bound">B</a><a id="9877" class="Symbol">}</a>
           <a id="9890" class="Symbol">→</a> <a id="9892" class="Symbol">(∀{</a><a id="9895" href="/Substitution/#9895" class="Bound">x</a> <a id="9897" class="Symbol">:</a> <a id="9899" href="/Substitution/#9800" class="Bound">Γ</a> <a id="9901" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="9903" href="/Substitution/#9818" class="Bound">B</a><a id="9904" class="Symbol">}</a> <a id="9906" class="Symbol">→</a> <a id="9908" href="/Substitution/#9822" class="Bound">σ</a> <a id="9910" href="/Substitution/#9895" class="Bound">x</a> <a id="9912" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="9914" href="/Substitution/#9824" class="Bound">τ</a> <a id="9916" href="/Substitution/#9895" class="Bound">x</a><a id="9917" class="Symbol">)</a>
           <a id="9930" class="Symbol">→</a> <a id="9932" class="Symbol">(</a><a id="9933" href="/Substitution/#9840" class="Bound">M</a> <a id="9935" href="/Substitution/#3029" class="Function Operator">•</a> <a id="9937" href="/Substitution/#9822" class="Bound">σ</a><a id="9938" class="Symbol">)</a> <a id="9940" href="/Substitution/#9864" class="Bound">x</a> <a id="9942" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="9944" class="Symbol">(</a><a id="9945" href="/Substitution/#9840" class="Bound">M</a> <a id="9947" href="/Substitution/#3029" class="Function Operator">•</a> <a id="9949" href="/Substitution/#9824" class="Bound">τ</a><a id="9950" class="Symbol">)</a> <a id="9952" href="/Substitution/#9864" class="Bound">x</a>
<a id="9954" href="/Substitution/#9785" class="Function">cons-congR</a> <a id="9965" class="Symbol">{</a><a id="9966" class="Argument">x</a> <a id="9968" class="Symbol">=</a> <a id="9970" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="9971" class="Symbol">}</a> <a id="9973" href="/Substitution/#9973" class="Bound">s</a> <a id="9975" class="Symbol">=</a> <a id="9977" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="9982" href="/Substitution/#9785" class="Function">cons-congR</a> <a id="9993" class="Symbol">{</a><a id="9994" class="Argument">x</a> <a id="9996" class="Symbol">=</a> <a id="9998" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="10000" href="/Substitution/#10000" class="Bound">x</a><a id="10001" class="Symbol">}</a> <a id="10003" href="/Substitution/#10003" class="Bound">s</a> <a id="10005" class="Symbol">=</a> <a id="10007" href="/Substitution/#10003" class="Bound">s</a></pre>

<p>The following same-subst business is an ugly workaround :(</p>

<p>I’m having trouble with equalities involving the subst function.</p>

<pre class="Agda"><a id="same-subst"></a><a id="10160" href="/Substitution/#10160" class="Function">same-subst</a> <a id="10171" class="Symbol">:</a> <a id="10173" class="Symbol">∀{</a><a id="10175" href="/Substitution/#10175" class="Bound">Γ</a> <a id="10177" href="/Substitution/#10177" class="Bound">Δ</a><a id="10178" class="Symbol">}</a> <a id="10180" class="Symbol">→</a> <a id="10182" href="/Soundness/#2673" class="Function">Subst</a> <a id="10188" href="/Substitution/#10175" class="Bound">Γ</a> <a id="10190" href="/Substitution/#10177" class="Bound">Δ</a> <a id="10192" class="Symbol">→</a> <a id="10194" href="/Soundness/#2673" class="Function">Subst</a> <a id="10200" href="/Substitution/#10175" class="Bound">Γ</a> <a id="10202" href="/Substitution/#10177" class="Bound">Δ</a> <a id="10204" class="Symbol">→</a> <a id="10206" class="PrimitiveType">Set</a>
<a id="10210" href="/Substitution/#10160" class="Function">same-subst</a><a id="10220" class="Symbol">{</a><a id="10221" href="/Substitution/#10221" class="Bound">Γ</a><a id="10222" class="Symbol">}{</a><a id="10224" href="/Substitution/#10224" class="Bound">Δ</a><a id="10225" class="Symbol">}</a> <a id="10227" href="/Substitution/#10227" class="Bound">σ</a> <a id="10229" href="/Substitution/#10229" class="Bound">σ&#39;</a> <a id="10232" class="Symbol">=</a> <a id="10234" class="Symbol">∀{</a><a id="10236" href="/Substitution/#10236" class="Bound">A</a><a id="10237" class="Symbol">}{</a><a id="10239" href="/Substitution/#10239" class="Bound">x</a> <a id="10241" class="Symbol">:</a> <a id="10243" href="/Substitution/#10221" class="Bound">Γ</a> <a id="10245" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="10247" href="/Substitution/#10236" class="Bound">A</a><a id="10248" class="Symbol">}</a> <a id="10250" class="Symbol">→</a> <a id="10252" href="/Substitution/#10227" class="Bound">σ</a> <a id="10254" href="/Substitution/#10239" class="Bound">x</a> <a id="10256" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="10258" href="/Substitution/#10229" class="Bound">σ&#39;</a> <a id="10261" href="/Substitution/#10239" class="Bound">x</a>

<a id="same-subst-ext"></a><a id="10264" href="/Substitution/#10264" class="Function">same-subst-ext</a> <a id="10279" class="Symbol">:</a> <a id="10281" class="Symbol">∀{</a><a id="10283" href="/Substitution/#10283" class="Bound">Γ</a> <a id="10285" href="/Substitution/#10285" class="Bound">Δ</a><a id="10286" class="Symbol">}{</a><a id="10288" href="/Substitution/#10288" class="Bound">σ</a> <a id="10290" href="/Substitution/#10290" class="Bound">σ&#39;</a> <a id="10293" class="Symbol">:</a> <a id="10295" href="/Soundness/#2673" class="Function">Subst</a> <a id="10301" href="/Substitution/#10283" class="Bound">Γ</a> <a id="10303" href="/Substitution/#10285" class="Bound">Δ</a><a id="10304" class="Symbol">}{</a><a id="10306" href="/Substitution/#10306" class="Bound">B</a><a id="10307" class="Symbol">}</a>
   <a id="10312" class="Symbol">→</a> <a id="10314" href="/Substitution/#10160" class="Function">same-subst</a> <a id="10325" href="/Substitution/#10288" class="Bound">σ</a> <a id="10327" href="/Substitution/#10290" class="Bound">σ&#39;</a>
   <a id="10333" class="Symbol">→</a> <a id="10335" href="/Substitution/#10160" class="Function">same-subst</a> <a id="10346" class="Symbol">(</a><a id="10347" href="/Untyped/#6623" class="Function">exts</a> <a id="10352" href="/Substitution/#10288" class="Bound">σ</a> <a id="10354" class="Symbol">{</a><a id="10355" class="Argument">B</a> <a id="10357" class="Symbol">=</a> <a id="10359" href="/Substitution/#10306" class="Bound">B</a><a id="10360" class="Symbol">})</a> <a id="10363" class="Symbol">(</a><a id="10364" href="/Untyped/#6623" class="Function">exts</a> <a id="10369" href="/Substitution/#10290" class="Bound">σ&#39;</a> <a id="10372" class="Symbol">)</a>
<a id="10374" href="/Substitution/#10264" class="Function">same-subst-ext</a> <a id="10389" href="/Substitution/#10389" class="Bound">ss</a> <a id="10392" class="Symbol">{</a><a id="10393" class="Argument">x</a> <a id="10395" class="Symbol">=</a> <a id="10397" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="10398" class="Symbol">}</a> <a id="10400" class="Symbol">=</a> <a id="10402" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="10407" href="/Substitution/#10264" class="Function">same-subst-ext</a> <a id="10422" href="/Substitution/#10422" class="Bound">ss</a> <a id="10425" class="Symbol">{</a><a id="10426" class="Argument">x</a> <a id="10428" class="Symbol">=</a> <a id="10430" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="10432" href="/Substitution/#10432" class="Bound">x</a><a id="10433" class="Symbol">}</a> <a id="10435" class="Symbol">=</a> <a id="10437" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="10442" class="Symbol">(</a><a id="10443" href="/Untyped/#6171" class="Function">rename</a> <a id="10450" class="Symbol">(λ</a> <a id="10453" class="Symbol">{</a><a id="10454" href="/Substitution/#10454" class="Bound">A</a><a id="10455" class="Symbol">}</a> <a id="10457" class="Symbol">→</a> <a id="10459" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a><a id="10461" class="Symbol">))</a> <a id="10464" href="/Substitution/#10422" class="Bound">ss</a>

<a id="cong-sub"></a><a id="10468" href="/Substitution/#10468" class="Function">cong-sub</a> <a id="10477" class="Symbol">:</a> <a id="10479" class="Symbol">∀{</a><a id="10481" href="/Substitution/#10481" class="Bound">Γ</a> <a id="10483" href="/Substitution/#10483" class="Bound">Δ</a><a id="10484" class="Symbol">}{</a><a id="10486" href="/Substitution/#10486" class="Bound">σ</a> <a id="10488" href="/Substitution/#10488" class="Bound">σ&#39;</a> <a id="10491" class="Symbol">:</a> <a id="10493" href="/Soundness/#2673" class="Function">Subst</a> <a id="10499" href="/Substitution/#10481" class="Bound">Γ</a> <a id="10501" href="/Substitution/#10483" class="Bound">Δ</a><a id="10502" class="Symbol">}{</a><a id="10504" href="/Substitution/#10504" class="Bound">A</a><a id="10505" class="Symbol">}{</a><a id="10507" href="/Substitution/#10507" class="Bound">M</a> <a id="10509" href="/Substitution/#10509" class="Bound">M&#39;</a> <a id="10512" class="Symbol">:</a> <a id="10514" href="/Substitution/#10481" class="Bound">Γ</a> <a id="10516" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="10518" href="/Substitution/#10504" class="Bound">A</a><a id="10519" class="Symbol">}</a>
            <a id="10533" class="Symbol">→</a> <a id="10535" href="/Substitution/#10160" class="Function">same-subst</a> <a id="10546" href="/Substitution/#10486" class="Bound">σ</a> <a id="10548" href="/Substitution/#10488" class="Bound">σ&#39;</a> <a id="10551" class="Symbol">→</a> <a id="10553" href="/Substitution/#10507" class="Bound">M</a> <a id="10555" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="10557" href="/Substitution/#10509" class="Bound">M&#39;</a>
            <a id="10572" class="Symbol">→</a> <a id="10574" href="/Untyped/#6931" class="Function">subst</a> <a id="10580" href="/Substitution/#10486" class="Bound">σ</a> <a id="10582" href="/Substitution/#10507" class="Bound">M</a> <a id="10584" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="10586" href="/Untyped/#6931" class="Function">subst</a> <a id="10592" href="/Substitution/#10488" class="Bound">σ&#39;</a> <a id="10595" href="/Substitution/#10509" class="Bound">M&#39;</a>
<a id="10598" href="/Substitution/#10468" class="Function">cong-sub</a> <a id="10607" class="Symbol">{</a><a id="10608" href="/Substitution/#10608" class="Bound">Γ</a><a id="10609" class="Symbol">}</a> <a id="10611" class="Symbol">{</a><a id="10612" href="/Substitution/#10612" class="Bound">Δ</a><a id="10613" class="Symbol">}</a> <a id="10615" class="Symbol">{</a><a id="10616" href="/Substitution/#10616" class="Bound">σ</a><a id="10617" class="Symbol">}</a> <a id="10619" class="Symbol">{</a><a id="10620" href="/Substitution/#10620" class="Bound">σ&#39;</a><a id="10622" class="Symbol">}</a> <a id="10624" class="Symbol">{</a><a id="10625" href="/Substitution/#10625" class="Bound">A</a><a id="10626" class="Symbol">}</a> <a id="10628" class="Symbol">{</a><a id="10629" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="10631" href="/Substitution/#10631" class="Bound">x</a><a id="10632" class="Symbol">}</a> <a id="10634" href="/Substitution/#10634" class="Bound">ss</a> <a id="10637" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="10642" class="Symbol">=</a> <a id="10644" href="/Substitution/#10634" class="Bound">ss</a>
<a id="10647" href="/Substitution/#10468" class="Function">cong-sub</a> <a id="10656" class="Symbol">{</a><a id="10657" href="/Substitution/#10657" class="Bound">Γ</a><a id="10658" class="Symbol">}</a> <a id="10660" class="Symbol">{</a><a id="10661" href="/Substitution/#10661" class="Bound">Δ</a><a id="10662" class="Symbol">}</a> <a id="10664" class="Symbol">{</a><a id="10665" href="/Substitution/#10665" class="Bound">σ</a><a id="10666" class="Symbol">}</a> <a id="10668" class="Symbol">{</a><a id="10669" href="/Substitution/#10669" class="Bound">σ&#39;</a><a id="10671" class="Symbol">}</a> <a id="10673" class="Symbol">{</a><a id="10674" href="/Substitution/#10674" class="Bound">A</a><a id="10675" class="Symbol">}</a> <a id="10677" class="Symbol">{</a><a id="10678" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="10680" href="/Substitution/#10680" class="Bound">M</a><a id="10681" class="Symbol">}</a> <a id="10683" href="/Substitution/#10683" class="Bound">ss</a> <a id="10686" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="10691" class="Symbol">=</a>
   <a id="10696" class="Keyword">let</a> <a id="10700" href="/Substitution/#10700" class="Bound">ih</a> <a id="10703" class="Symbol">=</a> <a id="10705" href="/Substitution/#10468" class="Function">cong-sub</a> <a id="10714" class="Symbol">{</a><a id="10715" class="Argument">Γ</a> <a id="10717" class="Symbol">=</a> <a id="10719" href="/Substitution/#10657" class="Bound">Γ</a> <a id="10721" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="10723" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="10724" class="Symbol">}</a> <a id="10726" class="Symbol">{</a><a id="10727" class="Argument">Δ</a> <a id="10729" class="Symbol">=</a> <a id="10731" href="/Substitution/#10661" class="Bound">Δ</a> <a id="10733" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="10735" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="10736" class="Symbol">}</a>
            <a id="10750" class="Symbol">{</a><a id="10751" class="Argument">σ</a> <a id="10753" class="Symbol">=</a> <a id="10755" href="/Untyped/#6623" class="Function">exts</a> <a id="10760" href="/Substitution/#10665" class="Bound">σ</a><a id="10761" class="Symbol">}{</a><a id="10763" class="Argument">σ&#39;</a> <a id="10766" class="Symbol">=</a> <a id="10768" href="/Untyped/#6623" class="Function">exts</a> <a id="10773" href="/Substitution/#10669" class="Bound">σ&#39;</a><a id="10775" class="Symbol">}</a> <a id="10777" class="Symbol">{</a><a id="10778" class="Argument">M</a> <a id="10780" class="Symbol">=</a> <a id="10782" href="/Substitution/#10680" class="Bound">M</a><a id="10783" class="Symbol">}</a>
            <a id="10797" class="Symbol">(λ</a> <a id="10800" class="Symbol">{</a><a id="10801" href="/Substitution/#10801" class="Bound">x</a><a id="10802" class="Symbol">}{</a><a id="10804" href="/Substitution/#10804" class="Bound">A</a><a id="10805" class="Symbol">}</a> <a id="10807" class="Symbol">→</a> <a id="10809" href="/Substitution/#10264" class="Function">same-subst-ext</a> <a id="10824" class="Symbol">{</a><a id="10825" href="/Substitution/#10657" class="Bound">Γ</a><a id="10826" class="Symbol">}{</a><a id="10828" href="/Substitution/#10661" class="Bound">Δ</a><a id="10829" class="Symbol">}{</a><a id="10831" href="/Substitution/#10665" class="Bound">σ</a><a id="10832" class="Symbol">}{</a><a id="10834" href="/Substitution/#10669" class="Bound">σ&#39;</a><a id="10836" class="Symbol">}</a> <a id="10838" href="/Substitution/#10683" class="Bound">ss</a> <a id="10841" class="Symbol">{</a><a id="10842" href="/Substitution/#10801" class="Bound">x</a><a id="10843" class="Symbol">}{</a><a id="10845" href="/Substitution/#10804" class="Bound">A</a><a id="10846" class="Symbol">})</a> <a id="10849" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="10854" class="Keyword">in</a>
   <a id="10860" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="10865" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a> <a id="10868" href="/Substitution/#10700" class="Bound">ih</a>
<a id="10871" href="/Substitution/#10468" class="Function">cong-sub</a> <a id="10880" class="Symbol">{</a><a id="10881" href="/Substitution/#10881" class="Bound">Γ</a><a id="10882" class="Symbol">}</a> <a id="10884" class="Symbol">{</a><a id="10885" href="/Substitution/#10885" class="Bound">Δ</a><a id="10886" class="Symbol">}</a> <a id="10888" class="Symbol">{</a><a id="10889" href="/Substitution/#10889" class="Bound">σ</a><a id="10890" class="Symbol">}</a> <a id="10892" class="Symbol">{</a><a id="10893" href="/Substitution/#10893" class="Bound">σ&#39;</a><a id="10895" class="Symbol">}</a> <a id="10897" class="Symbol">{</a><a id="10898" href="/Substitution/#10898" class="Bound">A</a><a id="10899" class="Symbol">}</a> <a id="10901" class="Symbol">{</a><a id="10902" href="/Substitution/#10902" class="Bound">L</a> <a id="10904" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="10906" href="/Substitution/#10906" class="Bound">M</a><a id="10907" class="Symbol">}</a> <a id="10909" href="/Substitution/#10909" class="Bound">ss</a> <a id="10912" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="10917" class="Symbol">=</a> 
   <a id="10923" class="Keyword">let</a> <a id="10927" href="/Substitution/#10927" class="Bound">ih1</a> <a id="10931" class="Symbol">=</a> <a id="10933" href="/Substitution/#10468" class="Function">cong-sub</a> <a id="10942" class="Symbol">{</a><a id="10943" href="/Substitution/#10881" class="Bound">Γ</a><a id="10944" class="Symbol">}</a> <a id="10946" class="Symbol">{</a><a id="10947" href="/Substitution/#10885" class="Bound">Δ</a><a id="10948" class="Symbol">}</a> <a id="10950" class="Symbol">{</a><a id="10951" href="/Substitution/#10889" class="Bound">σ</a><a id="10952" class="Symbol">}</a> <a id="10954" class="Symbol">{</a><a id="10955" href="/Substitution/#10893" class="Bound">σ&#39;</a><a id="10957" class="Symbol">}</a> <a id="10959" class="Symbol">{</a><a id="10960" href="/Substitution/#10898" class="Bound">A</a><a id="10961" class="Symbol">}</a> <a id="10963" class="Symbol">{</a><a id="10964" href="/Substitution/#10902" class="Bound">L</a><a id="10965" class="Symbol">}</a> <a id="10967" href="/Substitution/#10909" class="Bound">ss</a> <a id="10970" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="10975" class="Keyword">in</a>
   <a id="10981" class="Keyword">let</a> <a id="10985" href="/Substitution/#10985" class="Bound">ih2</a> <a id="10989" class="Symbol">=</a> <a id="10991" href="/Substitution/#10468" class="Function">cong-sub</a> <a id="11000" class="Symbol">{</a><a id="11001" href="/Substitution/#10881" class="Bound">Γ</a><a id="11002" class="Symbol">}</a> <a id="11004" class="Symbol">{</a><a id="11005" href="/Substitution/#10885" class="Bound">Δ</a><a id="11006" class="Symbol">}</a> <a id="11008" class="Symbol">{</a><a id="11009" href="/Substitution/#10889" class="Bound">σ</a><a id="11010" class="Symbol">}</a> <a id="11012" class="Symbol">{</a><a id="11013" href="/Substitution/#10893" class="Bound">σ&#39;</a><a id="11015" class="Symbol">}</a> <a id="11017" class="Symbol">{</a><a id="11018" href="/Substitution/#10898" class="Bound">A</a><a id="11019" class="Symbol">}</a> <a id="11021" class="Symbol">{</a><a id="11022" href="/Substitution/#10906" class="Bound">M</a><a id="11023" class="Symbol">}</a> <a id="11025" href="/Substitution/#10909" class="Bound">ss</a> <a id="11028" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a> <a id="11033" class="Keyword">in</a>
   <a id="11039" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1408" class="Function">cong₂</a> <a id="11045" href="/Untyped/#4298" class="InductiveConstructor Operator">_·_</a> <a id="11049" href="/Substitution/#10927" class="Bound">ih1</a> <a id="11053" href="/Substitution/#10985" class="Bound">ih2</a>

<a id="subst-equal"></a><a id="11058" href="/Substitution/#11058" class="Function">subst-equal</a> <a id="11070" class="Symbol">:</a> <a id="11072" class="Symbol">∀{</a><a id="11074" href="/Substitution/#11074" class="Bound">Γ</a> <a id="11076" href="/Substitution/#11076" class="Bound">Δ</a><a id="11077" class="Symbol">}{</a><a id="11079" href="/Substitution/#11079" class="Bound">σ</a> <a id="11081" href="/Substitution/#11081" class="Bound">σ&#39;</a> <a id="11084" class="Symbol">:</a> <a id="11086" href="/Soundness/#2673" class="Function">Subst</a> <a id="11092" href="/Substitution/#11074" class="Bound">Γ</a> <a id="11094" href="/Substitution/#11076" class="Bound">Δ</a><a id="11095" class="Symbol">}{</a><a id="11097" href="/Substitution/#11097" class="Bound">A</a><a id="11098" class="Symbol">}{</a><a id="11100" href="/Substitution/#11100" class="Bound">M</a> <a id="11102" class="Symbol">:</a> <a id="11104" href="/Substitution/#11074" class="Bound">Γ</a> <a id="11106" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="11108" href="/Substitution/#11097" class="Bound">A</a><a id="11109" class="Symbol">}</a>
            <a id="11123" class="Symbol">→</a> <a id="11125" href="/Substitution/#10160" class="Function">same-subst</a> <a id="11136" href="/Substitution/#11079" class="Bound">σ</a> <a id="11138" href="/Substitution/#11081" class="Bound">σ&#39;</a> 
            <a id="11154" class="Symbol">→</a> <a id="11156" href="/Untyped/#6931" class="Function">subst</a> <a id="11162" href="/Substitution/#11079" class="Bound">σ</a> <a id="11164" href="/Substitution/#11100" class="Bound">M</a> <a id="11166" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="11168" href="/Untyped/#6931" class="Function">subst</a> <a id="11174" href="/Substitution/#11081" class="Bound">σ&#39;</a> <a id="11177" href="/Substitution/#11100" class="Bound">M</a>
<a id="11179" href="/Substitution/#11058" class="Function">subst-equal</a><a id="11190" class="Symbol">{</a><a id="11191" class="Argument">M</a> <a id="11193" class="Symbol">=</a> <a id="11195" href="/Substitution/#11195" class="Bound">M</a><a id="11196" class="Symbol">}</a> <a id="11198" href="/Substitution/#11198" class="Bound">ss</a> <a id="11201" class="Symbol">=</a> <a id="11203" href="/Substitution/#10468" class="Function">cong-sub</a><a id="11211" class="Symbol">{</a><a id="11212" class="Argument">M</a> <a id="11214" class="Symbol">=</a> <a id="11216" href="/Substitution/#11195" class="Bound">M</a><a id="11217" class="Symbol">}</a> <a id="11219" href="/Substitution/#11198" class="Bound">ss</a> <a id="11222" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>

<a id="subst-equal2"></a><a id="11228" href="/Substitution/#11228" class="Function">subst-equal2</a> <a id="11241" class="Symbol">:</a> <a id="11243" class="Symbol">∀{</a><a id="11245" href="/Substitution/#11245" class="Bound">Γ</a> <a id="11247" href="/Substitution/#11247" class="Bound">Δ</a><a id="11248" class="Symbol">}{</a><a id="11250" href="/Substitution/#11250" class="Bound">σ</a> <a id="11252" href="/Substitution/#11252" class="Bound">σ&#39;</a> <a id="11255" class="Symbol">:</a> <a id="11257" href="/Soundness/#2673" class="Function">Subst</a> <a id="11263" href="/Substitution/#11245" class="Bound">Γ</a> <a id="11265" href="/Substitution/#11247" class="Bound">Δ</a><a id="11266" class="Symbol">}{</a><a id="11268" href="/Substitution/#11268" class="Bound">A</a><a id="11269" class="Symbol">}{</a><a id="11271" href="/Substitution/#11271" class="Bound">M</a> <a id="11273" class="Symbol">:</a> <a id="11275" href="/Substitution/#11245" class="Bound">Γ</a> <a id="11277" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="11279" href="/Substitution/#11268" class="Bound">A</a><a id="11280" class="Symbol">}</a>
            <a id="11294" class="Symbol">→</a> <a id="11296" class="Symbol">(∀{</a><a id="11299" href="/Substitution/#11299" class="Bound">A</a><a id="11300" class="Symbol">}</a> <a id="11302" class="Symbol">→</a> <a id="11304" href="/Substitution/#11250" class="Bound">σ</a> <a id="11306" class="Symbol">{</a><a id="11307" href="/Substitution/#11299" class="Bound">A</a><a id="11308" class="Symbol">}</a> <a id="11310" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="11312" href="/Substitution/#11252" class="Bound">σ&#39;</a> <a id="11315" class="Symbol">{</a><a id="11316" href="/Substitution/#11299" class="Bound">A</a><a id="11317" class="Symbol">})</a>
            <a id="11332" class="Symbol">→</a> <a id="11334" href="/Untyped/#6931" class="Function">subst</a> <a id="11340" href="/Substitution/#11250" class="Bound">σ</a> <a id="11342" href="/Substitution/#11271" class="Bound">M</a> <a id="11344" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="11346" href="/Untyped/#6931" class="Function">subst</a> <a id="11352" href="/Substitution/#11252" class="Bound">σ&#39;</a> <a id="11355" href="/Substitution/#11271" class="Bound">M</a>
<a id="11357" href="/Substitution/#11228" class="Function">subst-equal2</a><a id="11369" class="Symbol">{</a><a id="11370" href="/Substitution/#11370" class="Bound">Γ</a><a id="11371" class="Symbol">}{</a><a id="11373" href="/Substitution/#11373" class="Bound">Δ</a><a id="11374" class="Symbol">}{</a><a id="11376" href="/Substitution/#11376" class="Bound">σ</a><a id="11377" class="Symbol">}{</a><a id="11379" href="/Substitution/#11379" class="Bound">σ&#39;</a><a id="11381" class="Symbol">}{</a><a id="11383" href="/Substitution/#11383" class="Bound">A</a><a id="11384" class="Symbol">}{</a><a id="11386" href="/Substitution/#11386" class="Bound">M</a><a id="11387" class="Symbol">}</a> <a id="11389" href="/Substitution/#11389" class="Bound">s</a> <a id="11391" class="Symbol">=</a>
   <a id="11396" href="/Substitution/#11058" class="Function">subst-equal</a><a id="11407" class="Symbol">{</a><a id="11408" class="Argument">M</a> <a id="11410" class="Symbol">=</a> <a id="11412" href="/Substitution/#11386" class="Bound">M</a><a id="11413" class="Symbol">}</a> <a id="11415" class="Symbol">λ</a> <a id="11417" class="Symbol">{</a><a id="11418" href="/Substitution/#11418" class="Bound">A</a><a id="11419" class="Symbol">}{</a><a id="11421" href="/Substitution/#11421" class="Bound">x</a><a id="11422" class="Symbol">}</a> <a id="11424" class="Symbol">→</a> <a id="11426" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1274" class="Function">cong-app</a> <a id="11435" class="Symbol">{</a><a id="11436" class="Argument">f</a> <a id="11438" class="Symbol">=</a> <a id="11440" href="/Substitution/#11376" class="Bound">σ</a> <a id="11442" class="Symbol">{</a><a id="11443" href="/Substitution/#11418" class="Bound">A</a><a id="11444" class="Symbol">}}</a> <a id="11447" class="Symbol">{</a><a id="11448" class="Argument">g</a> <a id="11450" class="Symbol">=</a> <a id="11452" href="/Substitution/#11379" class="Bound">σ&#39;</a> <a id="11455" class="Symbol">{</a><a id="11456" href="/Substitution/#11418" class="Bound">A</a><a id="11457" class="Symbol">}}</a> <a id="11460" class="Symbol">(</a><a id="11461" href="/Substitution/#11389" class="Bound">s</a><a id="11462" class="Symbol">{</a><a id="11463" href="/Substitution/#11418" class="Bound">A</a><a id="11464" class="Symbol">})</a> <a id="11467" href="/Substitution/#11421" class="Bound">x</a></pre>

<pre class="Agda"><a id="same-rename"></a><a id="11495" href="/Substitution/#11495" class="Function">same-rename</a> <a id="11507" class="Symbol">:</a> <a id="11509" class="Symbol">∀{</a><a id="11511" href="/Substitution/#11511" class="Bound">Γ</a> <a id="11513" href="/Substitution/#11513" class="Bound">Δ</a><a id="11514" class="Symbol">}</a> <a id="11516" class="Symbol">→</a> <a id="11518" href="/Denotational/#23286" class="Function">Rename</a> <a id="11525" href="/Substitution/#11511" class="Bound">Γ</a> <a id="11527" href="/Substitution/#11513" class="Bound">Δ</a> <a id="11529" class="Symbol">→</a> <a id="11531" href="/Denotational/#23286" class="Function">Rename</a> <a id="11538" href="/Substitution/#11511" class="Bound">Γ</a> <a id="11540" href="/Substitution/#11513" class="Bound">Δ</a> <a id="11542" class="Symbol">→</a> <a id="11544" class="PrimitiveType">Set</a>
<a id="11548" href="/Substitution/#11495" class="Function">same-rename</a><a id="11559" class="Symbol">{</a><a id="11560" href="/Substitution/#11560" class="Bound">Γ</a><a id="11561" class="Symbol">}{</a><a id="11563" href="/Substitution/#11563" class="Bound">Δ</a><a id="11564" class="Symbol">}</a> <a id="11566" href="/Substitution/#11566" class="Bound">σ</a> <a id="11568" href="/Substitution/#11568" class="Bound">σ&#39;</a> <a id="11571" class="Symbol">=</a> <a id="11573" class="Symbol">∀{</a><a id="11575" href="/Substitution/#11575" class="Bound">A</a><a id="11576" class="Symbol">}{</a><a id="11578" href="/Substitution/#11578" class="Bound">x</a> <a id="11580" class="Symbol">:</a> <a id="11582" href="/Substitution/#11560" class="Bound">Γ</a> <a id="11584" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="11586" href="/Substitution/#11575" class="Bound">A</a><a id="11587" class="Symbol">}</a> <a id="11589" class="Symbol">→</a> <a id="11591" href="/Substitution/#11566" class="Bound">σ</a> <a id="11593" href="/Substitution/#11578" class="Bound">x</a> <a id="11595" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="11597" href="/Substitution/#11568" class="Bound">σ&#39;</a> <a id="11600" href="/Substitution/#11578" class="Bound">x</a>

<a id="same-rename-ext"></a><a id="11603" href="/Substitution/#11603" class="Function">same-rename-ext</a> <a id="11619" class="Symbol">:</a> <a id="11621" class="Symbol">∀{</a><a id="11623" href="/Substitution/#11623" class="Bound">Γ</a> <a id="11625" href="/Substitution/#11625" class="Bound">Δ</a><a id="11626" class="Symbol">}{</a><a id="11628" href="/Substitution/#11628" class="Bound">σ</a> <a id="11630" href="/Substitution/#11630" class="Bound">σ&#39;</a> <a id="11633" class="Symbol">:</a> <a id="11635" href="/Denotational/#23286" class="Function">Rename</a> <a id="11642" href="/Substitution/#11623" class="Bound">Γ</a> <a id="11644" href="/Substitution/#11625" class="Bound">Δ</a><a id="11645" class="Symbol">}</a>
   <a id="11650" class="Symbol">→</a> <a id="11652" href="/Substitution/#11495" class="Function">same-rename</a> <a id="11664" href="/Substitution/#11628" class="Bound">σ</a> <a id="11666" href="/Substitution/#11630" class="Bound">σ&#39;</a>
   <a id="11672" class="Symbol">→</a> <a id="11674" href="/Substitution/#11495" class="Function">same-rename</a> <a id="11686" class="Symbol">(</a><a id="11687" href="/Untyped/#5845" class="Function">ext</a> <a id="11691" href="/Substitution/#11628" class="Bound">σ</a> <a id="11693" class="Symbol">{</a><a id="11694" class="Argument">B</a> <a id="11696" class="Symbol">=</a> <a id="11698" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="11699" class="Symbol">})</a> <a id="11702" class="Symbol">(</a><a id="11703" href="/Untyped/#5845" class="Function">ext</a> <a id="11707" href="/Substitution/#11630" class="Bound">σ&#39;</a> <a id="11710" class="Symbol">)</a>
<a id="11712" href="/Substitution/#11603" class="Function">same-rename-ext</a> <a id="11728" href="/Substitution/#11728" class="Bound">ss</a> <a id="11731" class="Symbol">{</a><a id="11732" class="Argument">x</a> <a id="11734" class="Symbol">=</a> <a id="11736" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="11737" class="Symbol">}</a> <a id="11739" class="Symbol">=</a> <a id="11741" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="11746" href="/Substitution/#11603" class="Function">same-rename-ext</a> <a id="11762" href="/Substitution/#11762" class="Bound">ss</a> <a id="11765" class="Symbol">{</a><a id="11766" class="Argument">x</a> <a id="11768" class="Symbol">=</a> <a id="11770" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="11772" href="/Substitution/#11772" class="Bound">x</a><a id="11773" class="Symbol">}</a> <a id="11775" class="Symbol">=</a> <a id="11777" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="11782" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a> <a id="11785" href="/Substitution/#11762" class="Bound">ss</a>

<a id="rename-equal"></a><a id="11789" href="/Substitution/#11789" class="Function">rename-equal</a> <a id="11802" class="Symbol">:</a> <a id="11804" class="Symbol">∀{</a><a id="11806" href="/Substitution/#11806" class="Bound">Γ</a> <a id="11808" href="/Substitution/#11808" class="Bound">Δ</a><a id="11809" class="Symbol">}{</a><a id="11811" href="/Substitution/#11811" class="Bound">ρ</a> <a id="11813" href="/Substitution/#11813" class="Bound">ρ&#39;</a> <a id="11816" class="Symbol">:</a> <a id="11818" href="/Denotational/#23286" class="Function">Rename</a> <a id="11825" href="/Substitution/#11806" class="Bound">Γ</a> <a id="11827" href="/Substitution/#11808" class="Bound">Δ</a><a id="11828" class="Symbol">}{</a><a id="11830" href="/Substitution/#11830" class="Bound">M</a> <a id="11832" class="Symbol">:</a> <a id="11834" href="/Substitution/#11806" class="Bound">Γ</a> <a id="11836" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="11838" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="11839" class="Symbol">}</a>
        <a id="11849" class="Symbol">→</a> <a id="11851" href="/Substitution/#11495" class="Function">same-rename</a> <a id="11863" href="/Substitution/#11811" class="Bound">ρ</a> <a id="11865" href="/Substitution/#11813" class="Bound">ρ&#39;</a>
        <a id="11876" class="Symbol">→</a> <a id="11878" href="/Untyped/#6171" class="Function">rename</a> <a id="11885" href="/Substitution/#11811" class="Bound">ρ</a> <a id="11887" href="/Substitution/#11830" class="Bound">M</a> <a id="11889" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="11891" href="/Untyped/#6171" class="Function">rename</a> <a id="11898" href="/Substitution/#11813" class="Bound">ρ&#39;</a> <a id="11901" href="/Substitution/#11830" class="Bound">M</a>
<a id="11903" href="/Substitution/#11789" class="Function">rename-equal</a> <a id="11916" class="Symbol">{</a><a id="11917" class="Argument">M</a> <a id="11919" class="Symbol">=</a> <a id="11921" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="11923" href="/Substitution/#11923" class="Bound">x</a><a id="11924" class="Symbol">}</a> <a id="11926" href="/Substitution/#11926" class="Bound">s</a> <a id="11928" class="Symbol">=</a> <a id="11930" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="11935" href="/Untyped/#4186" class="InductiveConstructor Operator">`_</a> <a id="11938" href="/Substitution/#11926" class="Bound">s</a>
<a id="11940" href="/Substitution/#11789" class="Function">rename-equal</a> <a id="11953" class="Symbol">{</a><a id="11954" class="Argument">ρ</a> <a id="11956" class="Symbol">=</a> <a id="11958" href="/Substitution/#11958" class="Bound">ρ</a><a id="11959" class="Symbol">}</a> <a id="11961" class="Symbol">{</a><a id="11962" class="Argument">ρ&#39;</a> <a id="11965" class="Symbol">=</a> <a id="11967" href="/Substitution/#11967" class="Bound">ρ&#39;</a><a id="11969" class="Symbol">}</a> <a id="11971" class="Symbol">{</a><a id="11972" class="Argument">M</a> <a id="11974" class="Symbol">=</a> <a id="11976" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="11978" href="/Substitution/#11978" class="Bound">N</a><a id="11979" class="Symbol">}</a> <a id="11981" href="/Substitution/#11981" class="Bound">s</a> <a id="11983" class="Symbol">=</a>
   <a id="11988" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="11993" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a> <a id="11996" class="Symbol">(</a><a id="11997" href="/Substitution/#11789" class="Function">rename-equal</a> <a id="12010" class="Symbol">{</a><a id="12011" class="Argument">ρ</a> <a id="12013" class="Symbol">=</a> <a id="12015" href="/Untyped/#5845" class="Function">ext</a> <a id="12019" href="/Substitution/#11958" class="Bound">ρ</a><a id="12020" class="Symbol">}{</a><a id="12022" class="Argument">ρ&#39;</a> <a id="12025" class="Symbol">=</a> <a id="12027" href="/Untyped/#5845" class="Function">ext</a> <a id="12031" href="/Substitution/#11967" class="Bound">ρ&#39;</a><a id="12033" class="Symbol">}{</a><a id="12035" class="Argument">M</a> <a id="12037" class="Symbol">=</a> <a id="12039" href="/Substitution/#11978" class="Bound">N</a><a id="12040" class="Symbol">}</a> <a id="12042" class="Symbol">(</a><a id="12043" href="/Substitution/#11603" class="Function">same-rename-ext</a> <a id="12059" href="/Substitution/#11981" class="Bound">s</a><a id="12060" class="Symbol">))</a>
<a id="12063" href="/Substitution/#11789" class="Function">rename-equal</a> <a id="12076" class="Symbol">{</a><a id="12077" class="Argument">M</a> <a id="12079" class="Symbol">=</a> <a id="12081" href="/Substitution/#12081" class="Bound">L</a> <a id="12083" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="12085" href="/Substitution/#12085" class="Bound">M</a><a id="12086" class="Symbol">}</a> <a id="12088" href="/Substitution/#12088" class="Bound">s</a> <a id="12090" class="Symbol">=</a> <a id="12092" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1408" class="Function">cong₂</a> <a id="12098" href="/Untyped/#4298" class="InductiveConstructor Operator">_·_</a> <a id="12102" class="Symbol">(</a><a id="12103" href="/Substitution/#11789" class="Function">rename-equal</a> <a id="12116" href="/Substitution/#12088" class="Bound">s</a><a id="12117" class="Symbol">)</a> <a id="12119" class="Symbol">(</a><a id="12120" href="/Substitution/#11789" class="Function">rename-equal</a> <a id="12133" href="/Substitution/#12088" class="Bound">s</a><a id="12134" class="Symbol">)</a></pre>

<pre class="Agda"><a id="cong-seq"></a><a id="12162" href="/Substitution/#12162" class="Function">cong-seq</a> <a id="12171" class="Symbol">:</a> <a id="12173" class="Symbol">∀{</a><a id="12175" href="/Substitution/#12175" class="Bound">Γ</a> <a id="12177" href="/Substitution/#12177" class="Bound">Δ</a> <a id="12179" href="/Substitution/#12179" class="Bound">Σ</a><a id="12180" class="Symbol">}{</a><a id="12182" href="/Substitution/#12182" class="Bound">σ</a> <a id="12184" href="/Substitution/#12184" class="Bound">σ&#39;</a> <a id="12187" class="Symbol">:</a> <a id="12189" href="/Soundness/#2673" class="Function">Subst</a> <a id="12195" href="/Substitution/#12175" class="Bound">Γ</a> <a id="12197" href="/Substitution/#12177" class="Bound">Δ</a><a id="12198" class="Symbol">}{</a><a id="12200" href="/Substitution/#12200" class="Bound">τ</a> <a id="12202" href="/Substitution/#12202" class="Bound">τ&#39;</a> <a id="12205" class="Symbol">:</a> <a id="12207" href="/Soundness/#2673" class="Function">Subst</a> <a id="12213" href="/Substitution/#12177" class="Bound">Δ</a> <a id="12215" href="/Substitution/#12179" class="Bound">Σ</a><a id="12216" class="Symbol">}</a>
  <a id="12220" class="Symbol">→</a> <a id="12222" class="Symbol">(∀{</a><a id="12225" href="/Substitution/#12225" class="Bound">A</a><a id="12226" class="Symbol">}</a> <a id="12228" class="Symbol">→</a> <a id="12230" href="/Substitution/#12182" class="Bound">σ</a> <a id="12232" class="Symbol">{</a><a id="12233" href="/Substitution/#12225" class="Bound">A</a><a id="12234" class="Symbol">}</a> <a id="12236" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="12238" href="/Substitution/#12184" class="Bound">σ&#39;</a> <a id="12241" class="Symbol">{</a><a id="12242" href="/Substitution/#12225" class="Bound">A</a><a id="12243" class="Symbol">})</a> <a id="12246" class="Symbol">→</a> <a id="12248" class="Symbol">(∀{</a><a id="12251" href="/Substitution/#12251" class="Bound">A</a><a id="12252" class="Symbol">}</a> <a id="12254" class="Symbol">→</a> <a id="12256" href="/Substitution/#12200" class="Bound">τ</a> <a id="12258" class="Symbol">{</a><a id="12259" href="/Substitution/#12251" class="Bound">A</a><a id="12260" class="Symbol">}</a> <a id="12262" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="12264" href="/Substitution/#12202" class="Bound">τ&#39;</a> <a id="12267" class="Symbol">{</a><a id="12268" href="/Substitution/#12251" class="Bound">A</a><a id="12269" class="Symbol">})</a>
  <a id="12274" class="Symbol">→</a> <a id="12276" class="Symbol">∀{</a><a id="12278" href="/Substitution/#12278" class="Bound">A</a><a id="12279" class="Symbol">}</a> <a id="12281" class="Symbol">→</a> <a id="12283" class="Symbol">(</a><a id="12284" href="/Substitution/#12182" class="Bound">σ</a> <a id="12286" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="12288" href="/Substitution/#12200" class="Bound">τ</a><a id="12289" class="Symbol">)</a> <a id="12291" class="Symbol">{</a><a id="12292" href="/Substitution/#12278" class="Bound">A</a><a id="12293" class="Symbol">}</a> <a id="12295" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="12297" class="Symbol">(</a><a id="12298" href="/Substitution/#12184" class="Bound">σ&#39;</a> <a id="12301" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="12303" href="/Substitution/#12202" class="Bound">τ&#39;</a><a id="12305" class="Symbol">)</a> <a id="12307" class="Symbol">{</a><a id="12308" href="/Substitution/#12278" class="Bound">A</a><a id="12309" class="Symbol">}</a>
<a id="12311" href="/Substitution/#12162" class="Function">cong-seq</a> <a id="12320" class="Symbol">{</a><a id="12321" href="/Substitution/#12321" class="Bound">Γ</a><a id="12322" class="Symbol">}{</a><a id="12324" href="/Substitution/#12324" class="Bound">Δ</a><a id="12325" class="Symbol">}{</a><a id="12327" href="/Substitution/#12327" class="Bound">Σ</a><a id="12328" class="Symbol">}{</a><a id="12330" href="/Substitution/#12330" class="Bound">σ</a><a id="12331" class="Symbol">}{</a><a id="12333" href="/Substitution/#12333" class="Bound">σ&#39;</a><a id="12335" class="Symbol">}{</a><a id="12337" href="/Substitution/#12337" class="Bound">τ</a><a id="12338" class="Symbol">}{</a><a id="12340" href="/Substitution/#12340" class="Bound">τ&#39;</a><a id="12342" class="Symbol">}</a> <a id="12344" href="/Substitution/#12344" class="Bound">ss&#39;</a> <a id="12348" href="/Substitution/#12348" class="Bound">tt&#39;</a> <a id="12352" class="Symbol">{</a><a id="12353" href="/Substitution/#12353" class="Bound">A</a><a id="12354" class="Symbol">}</a> <a id="12356" class="Symbol">=</a> <a id="12358" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="12373" href="/Substitution/#12389" class="Function">lemma</a>
  <a id="12381" class="Keyword">where</a>
  <a id="12389" href="/Substitution/#12389" class="Function">lemma</a> <a id="12395" class="Symbol">:</a> <a id="12397" class="Symbol">(</a><a id="12398" href="/Substitution/#12398" class="Bound">x</a> <a id="12400" class="Symbol">:</a> <a id="12402" href="/Substitution/#12321" class="Bound">Γ</a> <a id="12404" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="12406" href="/Substitution/#12353" class="Bound">A</a><a id="12407" class="Symbol">)</a> <a id="12409" class="Symbol">→</a> <a id="12411" class="Symbol">(</a><a id="12412" href="/Substitution/#12330" class="Bound">σ</a> <a id="12414" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="12416" href="/Substitution/#12337" class="Bound">τ</a><a id="12417" class="Symbol">)</a> <a id="12419" href="/Substitution/#12398" class="Bound">x</a> <a id="12421" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="12423" class="Symbol">(</a><a id="12424" href="/Substitution/#12333" class="Bound">σ&#39;</a> <a id="12427" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="12429" href="/Substitution/#12340" class="Bound">τ&#39;</a><a id="12431" class="Symbol">)</a> <a id="12433" href="/Substitution/#12398" class="Bound">x</a>
  <a id="12437" href="/Substitution/#12389" class="Function">lemma</a> <a id="12443" href="/Substitution/#12443" class="Bound">x</a> <a id="12445" class="Symbol">=</a>
     <a id="12452" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
       <a id="12465" class="Symbol">(</a><a id="12466" href="/Substitution/#12330" class="Bound">σ</a> <a id="12468" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="12470" href="/Substitution/#12337" class="Bound">τ</a><a id="12471" class="Symbol">)</a> <a id="12473" href="/Substitution/#12443" class="Bound">x</a> 
     <a id="12481" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
       <a id="12492" href="/Untyped/#6931" class="Function">subst</a> <a id="12498" href="/Substitution/#12337" class="Bound">τ</a> <a id="12500" class="Symbol">(</a><a id="12501" href="/Substitution/#12330" class="Bound">σ</a> <a id="12503" href="/Substitution/#12443" class="Bound">x</a><a id="12504" class="Symbol">)</a>
     <a id="12511" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="12514" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="12519" class="Symbol">(</a><a id="12520" href="/Untyped/#6931" class="Function">subst</a> <a id="12526" href="/Substitution/#12337" class="Bound">τ</a><a id="12527" class="Symbol">)</a> <a id="12529" class="Symbol">(</a><a id="12530" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1274" class="Function">cong-app</a> <a id="12539" href="/Substitution/#12344" class="Bound">ss&#39;</a> <a id="12543" href="/Substitution/#12443" class="Bound">x</a><a id="12544" class="Symbol">)</a> <a id="12546" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="12555" href="/Untyped/#6931" class="Function">subst</a> <a id="12561" href="/Substitution/#12337" class="Bound">τ</a> <a id="12563" class="Symbol">(</a><a id="12564" href="/Substitution/#12333" class="Bound">σ&#39;</a> <a id="12567" href="/Substitution/#12443" class="Bound">x</a><a id="12568" class="Symbol">)</a>
     <a id="12575" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="12578" href="/Substitution/#11228" class="Function">subst-equal2</a><a id="12590" class="Symbol">{</a><a id="12591" class="Argument">M</a> <a id="12593" class="Symbol">=</a> <a id="12595" href="/Substitution/#12333" class="Bound">σ&#39;</a> <a id="12598" href="/Substitution/#12443" class="Bound">x</a><a id="12599" class="Symbol">}</a> <a id="12601" href="/Substitution/#12348" class="Bound">tt&#39;</a> <a id="12605" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="12614" href="/Untyped/#6931" class="Function">subst</a> <a id="12620" href="/Substitution/#12340" class="Bound">τ&#39;</a> <a id="12623" class="Symbol">(</a><a id="12624" href="/Substitution/#12333" class="Bound">σ&#39;</a> <a id="12627" href="/Substitution/#12443" class="Bound">x</a><a id="12628" class="Symbol">)</a>
     <a id="12635" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
       <a id="12646" class="Symbol">(</a><a id="12647" href="/Substitution/#12333" class="Bound">σ&#39;</a> <a id="12650" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="12652" href="/Substitution/#12340" class="Bound">τ&#39;</a><a id="12654" class="Symbol">)</a> <a id="12656" href="/Substitution/#12443" class="Bound">x</a>  
     <a id="12665" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a></pre>

<pre class="Agda"><a id="cong-seqL"></a><a id="12692" href="/Substitution/#12692" class="Function">cong-seqL</a> <a id="12702" class="Symbol">:</a> <a id="12704" class="Symbol">∀{</a><a id="12706" href="/Substitution/#12706" class="Bound">Γ</a> <a id="12708" href="/Substitution/#12708" class="Bound">Δ</a> <a id="12710" href="/Substitution/#12710" class="Bound">Σ</a> <a id="12712" class="Symbol">:</a> <a id="12714" href="/Untyped/#2980" class="Datatype">Context</a><a id="12721" class="Symbol">}</a> <a id="12723" class="Symbol">{</a><a id="12724" href="/Substitution/#12724" class="Bound">B</a><a id="12725" class="Symbol">}</a> <a id="12727" class="Symbol">{</a><a id="12728" href="/Substitution/#12728" class="Bound">σ</a> <a id="12730" href="/Substitution/#12730" class="Bound">σ&#39;</a> <a id="12733" class="Symbol">:</a> <a id="12735" href="/Soundness/#2673" class="Function">Subst</a> <a id="12741" href="/Substitution/#12706" class="Bound">Γ</a> <a id="12743" href="/Substitution/#12708" class="Bound">Δ</a><a id="12744" class="Symbol">}</a> <a id="12746" class="Symbol">{</a><a id="12747" href="/Substitution/#12747" class="Bound">τ</a> <a id="12749" class="Symbol">:</a> <a id="12751" href="/Soundness/#2673" class="Function">Subst</a> <a id="12757" href="/Substitution/#12708" class="Bound">Δ</a> <a id="12759" href="/Substitution/#12710" class="Bound">Σ</a><a id="12760" class="Symbol">}</a>
            <a id="12774" class="Symbol">{</a><a id="12775" href="/Substitution/#12775" class="Bound">x</a> <a id="12777" class="Symbol">:</a> <a id="12779" href="/Substitution/#12706" class="Bound">Γ</a> <a id="12781" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="12783" href="/Substitution/#12724" class="Bound">B</a><a id="12784" class="Symbol">}</a>
          <a id="12796" class="Symbol">→</a> <a id="12798" class="Symbol">(∀{</a><a id="12801" href="/Substitution/#12801" class="Bound">x</a> <a id="12803" class="Symbol">:</a> <a id="12805" href="/Substitution/#12706" class="Bound">Γ</a> <a id="12807" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="12809" href="/Substitution/#12724" class="Bound">B</a><a id="12810" class="Symbol">}</a> <a id="12812" class="Symbol">→</a> <a id="12814" href="/Substitution/#12728" class="Bound">σ</a> <a id="12816" href="/Substitution/#12801" class="Bound">x</a> <a id="12818" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="12820" href="/Substitution/#12730" class="Bound">σ&#39;</a> <a id="12823" href="/Substitution/#12801" class="Bound">x</a><a id="12824" class="Symbol">)</a>
          <a id="12836" class="Symbol">→</a> <a id="12838" class="Symbol">(</a><a id="12839" href="/Substitution/#12728" class="Bound">σ</a> <a id="12841" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="12843" href="/Substitution/#12747" class="Bound">τ</a><a id="12844" class="Symbol">)</a> <a id="12846" href="/Substitution/#12775" class="Bound">x</a> <a id="12848" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="12850" class="Symbol">(</a><a id="12851" href="/Substitution/#12730" class="Bound">σ&#39;</a> <a id="12854" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="12856" href="/Substitution/#12747" class="Bound">τ</a><a id="12857" class="Symbol">)</a> <a id="12859" href="/Substitution/#12775" class="Bound">x</a>
<a id="12861" href="/Substitution/#12692" class="Function">cong-seqL</a> <a id="12871" class="Symbol">{</a><a id="12872" class="Argument">τ</a> <a id="12874" class="Symbol">=</a> <a id="12876" href="/Substitution/#12876" class="Bound">τ</a><a id="12877" class="Symbol">}{</a><a id="12879" class="Argument">x</a> <a id="12881" class="Symbol">=</a> <a id="12883" href="/Substitution/#12883" class="Bound">x</a><a id="12884" class="Symbol">}</a> <a id="12886" href="/Substitution/#12886" class="Bound">s</a> <a id="12888" class="Symbol">=</a> <a id="12890" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="12895" class="Symbol">(</a><a id="12896" href="/Untyped/#6931" class="Function">subst</a> <a id="12902" href="/Substitution/#12876" class="Bound">τ</a><a id="12903" class="Symbol">)</a> <a id="12905" href="/Substitution/#12886" class="Bound">s</a></pre>

<pre class="Agda"><a id="cong-seqR"></a><a id="12932" href="/Substitution/#12932" class="Function">cong-seqR</a> <a id="12942" class="Symbol">:</a> <a id="12944" class="Symbol">∀{</a><a id="12946" href="/Substitution/#12946" class="Bound">Γ</a> <a id="12948" href="/Substitution/#12948" class="Bound">Δ</a> <a id="12950" href="/Substitution/#12950" class="Bound">Σ</a> <a id="12952" class="Symbol">:</a> <a id="12954" href="/Untyped/#2980" class="Datatype">Context</a><a id="12961" class="Symbol">}</a> <a id="12963" class="Symbol">{</a><a id="12964" href="/Substitution/#12964" class="Bound">B</a><a id="12965" class="Symbol">}</a> <a id="12967" class="Symbol">{</a><a id="12968" href="/Substitution/#12968" class="Bound">σ</a> <a id="12970" class="Symbol">:</a> <a id="12972" href="/Soundness/#2673" class="Function">Subst</a> <a id="12978" href="/Substitution/#12946" class="Bound">Γ</a> <a id="12980" href="/Substitution/#12948" class="Bound">Δ</a><a id="12981" class="Symbol">}</a> <a id="12983" class="Symbol">{</a><a id="12984" href="/Substitution/#12984" class="Bound">τ</a> <a id="12986" href="/Substitution/#12986" class="Bound">τ&#39;</a> <a id="12989" class="Symbol">:</a> <a id="12991" href="/Soundness/#2673" class="Function">Subst</a> <a id="12997" href="/Substitution/#12948" class="Bound">Δ</a> <a id="12999" href="/Substitution/#12950" class="Bound">Σ</a><a id="13000" class="Symbol">}</a>
            <a id="13014" class="Symbol">{</a><a id="13015" href="/Substitution/#13015" class="Bound">x</a> <a id="13017" class="Symbol">:</a> <a id="13019" href="/Substitution/#12946" class="Bound">Γ</a> <a id="13021" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="13023" href="/Substitution/#12964" class="Bound">B</a><a id="13024" class="Symbol">}</a>
          <a id="13036" class="Symbol">→</a> <a id="13038" class="Symbol">(∀{</a><a id="13041" href="/Substitution/#13041" class="Bound">A</a><a id="13042" class="Symbol">}{</a><a id="13044" href="/Substitution/#13044" class="Bound">x</a> <a id="13046" class="Symbol">:</a> <a id="13048" href="/Substitution/#12948" class="Bound">Δ</a> <a id="13050" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="13052" href="/Substitution/#13041" class="Bound">A</a><a id="13053" class="Symbol">}</a> <a id="13055" class="Symbol">→</a> <a id="13057" href="/Substitution/#12984" class="Bound">τ</a> <a id="13059" href="/Substitution/#13044" class="Bound">x</a> <a id="13061" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="13063" href="/Substitution/#12986" class="Bound">τ&#39;</a> <a id="13066" href="/Substitution/#13044" class="Bound">x</a><a id="13067" class="Symbol">)</a>
          <a id="13079" class="Symbol">→</a> <a id="13081" class="Symbol">(</a><a id="13082" href="/Substitution/#12968" class="Bound">σ</a> <a id="13084" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="13086" href="/Substitution/#12984" class="Bound">τ</a><a id="13087" class="Symbol">)</a> <a id="13089" href="/Substitution/#13015" class="Bound">x</a> <a id="13091" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="13093" class="Symbol">(</a><a id="13094" href="/Substitution/#12968" class="Bound">σ</a> <a id="13096" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="13098" href="/Substitution/#12986" class="Bound">τ&#39;</a><a id="13100" class="Symbol">)</a> <a id="13102" href="/Substitution/#13015" class="Bound">x</a>
<a id="13104" href="/Substitution/#12932" class="Function">cong-seqR</a> <a id="13114" class="Symbol">{</a><a id="13115" href="/Substitution/#13115" class="Bound">Γ</a><a id="13116" class="Symbol">}{</a><a id="13118" href="/Substitution/#13118" class="Bound">Δ</a><a id="13119" class="Symbol">}{</a><a id="13121" href="/Substitution/#13121" class="Bound">Σ</a><a id="13122" class="Symbol">}{</a><a id="13124" href="/Substitution/#13124" class="Bound">B</a><a id="13125" class="Symbol">}{</a><a id="13127" href="/Substitution/#13127" class="Bound">σ</a><a id="13128" class="Symbol">}{</a><a id="13130" href="/Substitution/#13130" class="Bound">τ</a><a id="13131" class="Symbol">}{</a><a id="13133" href="/Substitution/#13133" class="Bound">τ&#39;</a><a id="13135" class="Symbol">}{</a><a id="13137" href="/Substitution/#13137" class="Bound">x</a><a id="13138" class="Symbol">}</a> <a id="13140" href="/Substitution/#13140" class="Bound">tt&#39;</a> <a id="13144" class="Symbol">=</a>
  <a id="13148" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1274" class="Function">cong-app</a> <a id="13157" class="Symbol">(</a><a id="13158" href="/Substitution/#12162" class="Function">cong-seq</a> <a id="13167" class="Symbol">{</a><a id="13168" class="Argument">σ</a> <a id="13170" class="Symbol">=</a> <a id="13172" href="/Substitution/#13127" class="Bound">σ</a><a id="13173" class="Symbol">}</a>
                     <a id="13196" class="Symbol">(λ</a> <a id="13199" class="Symbol">{</a><a id="13200" href="/Substitution/#13200" class="Bound">A</a><a id="13201" class="Symbol">}</a> <a id="13203" class="Symbol">→</a> <a id="13205" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="13209" class="Symbol">)</a>
                     <a id="13232" class="Symbol">(λ{</a><a id="13235" href="/Substitution/#13235" class="Bound">A</a><a id="13236" class="Symbol">}</a> <a id="13238" class="Symbol">→</a> <a id="13240" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="13255" class="Symbol">λ</a> <a id="13257" href="/Substitution/#13257" class="Bound">x</a> <a id="13259" class="Symbol">→</a> <a id="13261" href="/Substitution/#13140" class="Bound">tt&#39;</a><a id="13264" class="Symbol">{</a><a id="13265" href="/Substitution/#13235" class="Bound">A</a><a id="13266" class="Symbol">}{</a><a id="13268" href="/Substitution/#13257" class="Bound">x</a><a id="13269" class="Symbol">}))</a>
           <a id="13284" href="/Substitution/#13137" class="Bound">x</a></pre>

<pre class="Agda"><a id="cong-subst-zero"></a><a id="13312" href="/Substitution/#13312" class="Function">cong-subst-zero</a> <a id="13328" class="Symbol">:</a> <a id="13330" class="Symbol">∀{</a><a id="13332" href="/Substitution/#13332" class="Bound">Γ</a><a id="13333" class="Symbol">}{</a><a id="13335" href="/Substitution/#13335" class="Bound">A</a> <a id="13337" href="/Substitution/#13337" class="Bound">B</a> <a id="13339" class="Symbol">:</a> <a id="13341" href="/Untyped/#2675" class="Datatype">Type</a><a id="13345" class="Symbol">}{</a><a id="13347" href="/Substitution/#13347" class="Bound">M</a> <a id="13349" href="/Substitution/#13349" class="Bound">M&#39;</a> <a id="13352" class="Symbol">:</a> <a id="13354" href="/Substitution/#13332" class="Bound">Γ</a> <a id="13356" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="13358" href="/Substitution/#13337" class="Bound">B</a><a id="13359" class="Symbol">}{</a><a id="13361" href="/Substitution/#13361" class="Bound">x</a> <a id="13363" class="Symbol">:</a> <a id="13365" href="/Substitution/#13332" class="Bound">Γ</a> <a id="13367" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="13369" href="/Substitution/#13337" class="Bound">B</a> <a id="13371" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="13373" href="/Substitution/#13335" class="Bound">A</a><a id="13374" class="Symbol">}</a>
  <a id="13378" class="Symbol">→</a> <a id="13380" href="/Substitution/#13347" class="Bound">M</a> <a id="13382" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="13384" href="/Substitution/#13349" class="Bound">M&#39;</a>
  <a id="13389" class="Symbol">→</a> <a id="13391" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="13402" href="/Substitution/#13347" class="Bound">M</a> <a id="13404" href="/Substitution/#13361" class="Bound">x</a> <a id="13406" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="13408" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="13419" href="/Substitution/#13349" class="Bound">M&#39;</a> <a id="13422" href="/Substitution/#13361" class="Bound">x</a>
<a id="13424" href="/Substitution/#13312" class="Function">cong-subst-zero</a> <a id="13440" class="Symbol">{</a><a id="13441" class="Argument">x</a> <a id="13443" class="Symbol">=</a> <a id="13445" href="/Substitution/#13445" class="Bound">x</a><a id="13446" class="Symbol">}</a> <a id="13448" href="/Substitution/#13448" class="Bound">mm&#39;</a> <a id="13452" class="Symbol">=</a> <a id="13454" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="13459" class="Symbol">(λ</a> <a id="13462" href="/Substitution/#13462" class="Bound">z</a> <a id="13464" class="Symbol">→</a> <a id="13466" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="13477" href="/Substitution/#13462" class="Bound">z</a> <a id="13479" href="/Substitution/#13445" class="Bound">x</a><a id="13480" class="Symbol">)</a> <a id="13482" href="/Substitution/#13448" class="Bound">mm&#39;</a></pre>

<h2 id="relating-rename-exts-ext-and-subst-zero-to-the-σ-algebra">Relating <code class="highlighter-rouge">rename</code>, <code class="highlighter-rouge">exts</code>, <code class="highlighter-rouge">ext</code>, and <code class="highlighter-rouge">subst-zero</code> to the σ algebra</h2>

<p>In this section we prove the equations that relate the functions
involved with defining substution (<code class="highlighter-rouge">rename</code>, <code class="highlighter-rouge">exts</code>, <code class="highlighter-rouge">ext</code>, and
<code class="highlighter-rouge">subst-zero</code>) to terms in the σ algebra.</p>

<p>The first equation we shall prove is</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rename ρ M ≡ ⧼ ren ρ ⧽ M              (rename-subst-ren)
</code></pre></div></div>

<p>Because <code class="highlighter-rouge">subst</code> uses the <code class="highlighter-rouge">exts</code> function, we need the following lemma
which says that <code class="highlighter-rouge">exts</code> and <code class="highlighter-rouge">ext</code> do the same thing except that <code class="highlighter-rouge">ext</code>
works on renamings and <code class="highlighter-rouge">exts</code> works on substitutions.</p>

<pre class="Agda"><a id="ren-ext-x"></a><a id="14064" href="/Substitution/#14064" class="Function">ren-ext-x</a> <a id="14074" class="Symbol">:</a> <a id="14076" class="Symbol">∀</a> <a id="14078" class="Symbol">{</a><a id="14079" href="/Substitution/#14079" class="Bound">Γ</a> <a id="14081" href="/Substitution/#14081" class="Bound">Δ</a><a id="14082" class="Symbol">}{</a><a id="14084" href="/Substitution/#14084" class="Bound">B</a> <a id="14086" href="/Substitution/#14086" class="Bound">C</a> <a id="14088" class="Symbol">:</a> <a id="14090" href="/Untyped/#2675" class="Datatype">Type</a><a id="14094" class="Symbol">}</a> <a id="14096" class="Symbol">{</a><a id="14097" href="/Substitution/#14097" class="Bound">ρ</a> <a id="14099" class="Symbol">:</a> <a id="14101" href="/Denotational/#23286" class="Function">Rename</a> <a id="14108" href="/Substitution/#14079" class="Bound">Γ</a> <a id="14110" href="/Substitution/#14081" class="Bound">Δ</a><a id="14111" class="Symbol">}</a> <a id="14113" class="Symbol">{</a><a id="14114" href="/Substitution/#14114" class="Bound">x</a> <a id="14116" class="Symbol">:</a> <a id="14118" href="/Substitution/#14079" class="Bound">Γ</a> <a id="14120" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="14122" href="/Substitution/#14084" class="Bound">B</a> <a id="14124" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="14126" href="/Substitution/#14086" class="Bound">C</a><a id="14127" class="Symbol">}</a>
        <a id="14137" class="Symbol">→</a> <a id="14139" class="Symbol">(</a><a id="14140" href="/Substitution/#6144" class="Function">ren</a> <a id="14144" class="Symbol">(</a><a id="14145" href="/Untyped/#5845" class="Function">ext</a> <a id="14149" href="/Substitution/#14097" class="Bound">ρ</a><a id="14150" class="Symbol">))</a> <a id="14153" href="/Substitution/#14114" class="Bound">x</a> <a id="14155" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="14157" href="/Untyped/#6623" class="Function">exts</a> <a id="14162" class="Symbol">(</a><a id="14163" href="/Substitution/#6144" class="Function">ren</a> <a id="14167" href="/Substitution/#14097" class="Bound">ρ</a><a id="14168" class="Symbol">)</a> <a id="14170" href="/Substitution/#14114" class="Bound">x</a>
<a id="14172" href="/Substitution/#14064" class="Function">ren-ext-x</a> <a id="14182" class="Symbol">{</a><a id="14183" class="Argument">x</a> <a id="14185" class="Symbol">=</a> <a id="14187" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="14188" class="Symbol">}</a> <a id="14190" class="Symbol">=</a> <a id="14192" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="14197" href="/Substitution/#14064" class="Function">ren-ext-x</a> <a id="14207" class="Symbol">{</a><a id="14208" class="Argument">x</a> <a id="14210" class="Symbol">=</a> <a id="14212" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="14214" href="/Substitution/#14214" class="Bound">x</a><a id="14215" class="Symbol">}</a> <a id="14217" class="Symbol">=</a> <a id="14219" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>

<a id="ren-ext"></a><a id="14225" href="/Substitution/#14225" class="Function">ren-ext</a> <a id="14233" class="Symbol">:</a> <a id="14235" class="Symbol">∀</a> <a id="14237" class="Symbol">{</a><a id="14238" href="/Substitution/#14238" class="Bound">Γ</a> <a id="14240" href="/Substitution/#14240" class="Bound">Δ</a><a id="14241" class="Symbol">}{</a><a id="14243" href="/Substitution/#14243" class="Bound">B</a> <a id="14245" href="/Substitution/#14245" class="Bound">C</a> <a id="14247" class="Symbol">:</a> <a id="14249" href="/Untyped/#2675" class="Datatype">Type</a><a id="14253" class="Symbol">}</a> <a id="14255" class="Symbol">{</a><a id="14256" href="/Substitution/#14256" class="Bound">ρ</a> <a id="14258" class="Symbol">:</a> <a id="14260" href="/Denotational/#23286" class="Function">Rename</a> <a id="14267" href="/Substitution/#14238" class="Bound">Γ</a> <a id="14269" href="/Substitution/#14240" class="Bound">Δ</a><a id="14270" class="Symbol">}</a> <a id="14272" class="Symbol">{</a><a id="14273" href="/Substitution/#14273" class="Bound">x</a> <a id="14275" class="Symbol">:</a> <a id="14277" href="/Substitution/#14238" class="Bound">Γ</a> <a id="14279" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="14281" href="/Substitution/#14243" class="Bound">B</a> <a id="14283" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="14285" href="/Substitution/#14245" class="Bound">C</a><a id="14286" class="Symbol">}</a>
        <a id="14296" class="Symbol">→</a> <a id="14298" href="/Substitution/#6144" class="Function">ren</a> <a id="14302" class="Symbol">(</a><a id="14303" href="/Untyped/#5845" class="Function">ext</a> <a id="14307" href="/Substitution/#14256" class="Bound">ρ</a> <a id="14309" class="Symbol">{</a><a id="14310" class="Argument">B</a> <a id="14312" class="Symbol">=</a> <a id="14314" href="/Substitution/#14243" class="Bound">B</a><a id="14315" class="Symbol">})</a> <a id="14318" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="14320" href="/Untyped/#6623" class="Function">exts</a> <a id="14325" class="Symbol">(</a><a id="14326" href="/Substitution/#6144" class="Function">ren</a> <a id="14330" href="/Substitution/#14256" class="Bound">ρ</a><a id="14331" class="Symbol">)</a> <a id="14333" class="Symbol">{</a><a id="14334" href="/Substitution/#14245" class="Bound">C</a><a id="14335" class="Symbol">}</a>
<a id="14337" href="/Substitution/#14225" class="Function">ren-ext</a> <a id="14345" class="Symbol">=</a> <a id="14347" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="14362" class="Symbol">λ</a> <a id="14364" href="/Substitution/#14364" class="Bound">x</a> <a id="14366" class="Symbol">→</a> <a id="14368" href="/Substitution/#14064" class="Function">ren-ext-x</a> <a id="14378" class="Symbol">{</a><a id="14379" class="Argument">x</a> <a id="14381" class="Symbol">=</a> <a id="14383" href="/Substitution/#14364" class="Bound">x</a><a id="14384" class="Symbol">}</a></pre>

<p>With this lemma in hand, the proof is a straightforward induction on
the term <code class="highlighter-rouge">M</code>.</p>

<pre class="Agda"><a id="rename-subst-ren"></a><a id="14495" href="/Substitution/#14495" class="Function">rename-subst-ren</a> <a id="14512" class="Symbol">:</a> <a id="14514" class="Symbol">∀</a> <a id="14516" class="Symbol">{</a><a id="14517" href="/Substitution/#14517" class="Bound">Γ</a> <a id="14519" href="/Substitution/#14519" class="Bound">Δ</a><a id="14520" class="Symbol">}{</a><a id="14522" href="/Substitution/#14522" class="Bound">A</a><a id="14523" class="Symbol">}</a> <a id="14525" class="Symbol">{</a><a id="14526" href="/Substitution/#14526" class="Bound">ρ</a> <a id="14528" class="Symbol">:</a> <a id="14530" href="/Denotational/#23286" class="Function">Rename</a> <a id="14537" href="/Substitution/#14517" class="Bound">Γ</a> <a id="14539" href="/Substitution/#14519" class="Bound">Δ</a><a id="14540" class="Symbol">}{</a><a id="14542" href="/Substitution/#14542" class="Bound">M</a> <a id="14544" class="Symbol">:</a> <a id="14546" href="/Substitution/#14517" class="Bound">Γ</a> <a id="14548" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="14550" href="/Substitution/#14522" class="Bound">A</a><a id="14551" class="Symbol">}</a>
                 <a id="14570" class="Symbol">→</a> <a id="14572" href="/Untyped/#6171" class="Function">rename</a> <a id="14579" href="/Substitution/#14526" class="Bound">ρ</a> <a id="14581" href="/Substitution/#14542" class="Bound">M</a> <a id="14583" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="14585" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="14587" href="/Substitution/#6144" class="Function">ren</a> <a id="14591" href="/Substitution/#14526" class="Bound">ρ</a> <a id="14593" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="14595" href="/Substitution/#14542" class="Bound">M</a>
<a id="14597" href="/Substitution/#14495" class="Function">rename-subst-ren</a> <a id="14614" class="Symbol">{</a><a id="14615" class="Argument">M</a> <a id="14617" class="Symbol">=</a> <a id="14619" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="14621" href="/Substitution/#14621" class="Bound">x</a><a id="14622" class="Symbol">}</a> <a id="14624" class="Symbol">=</a> <a id="14626" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="14631" href="/Substitution/#14495" class="Function">rename-subst-ren</a> <a id="14648" class="Symbol">{</a><a id="14649" class="Argument">ρ</a> <a id="14651" class="Symbol">=</a> <a id="14653" href="/Substitution/#14653" class="Bound">ρ</a><a id="14654" class="Symbol">}{</a><a id="14656" class="Argument">M</a> <a id="14658" class="Symbol">=</a> <a id="14660" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="14662" href="/Substitution/#14662" class="Bound">N</a><a id="14663" class="Symbol">}</a> <a id="14665" class="Symbol">=</a>
  <a id="14669" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
      <a id="14681" href="/Untyped/#6171" class="Function">rename</a> <a id="14688" href="/Substitution/#14653" class="Bound">ρ</a> <a id="14690" class="Symbol">(</a><a id="14691" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="14693" href="/Substitution/#14662" class="Bound">N</a><a id="14694" class="Symbol">)</a>
    <a id="14700" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
      <a id="14710" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="14712" href="/Untyped/#6171" class="Function">rename</a> <a id="14719" class="Symbol">(</a><a id="14720" href="/Untyped/#5845" class="Function">ext</a> <a id="14724" href="/Substitution/#14653" class="Bound">ρ</a><a id="14725" class="Symbol">)</a> <a id="14727" href="/Substitution/#14662" class="Bound">N</a>
    <a id="14733" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="14736" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="14741" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a> <a id="14744" class="Symbol">(</a><a id="14745" href="/Substitution/#14495" class="Function">rename-subst-ren</a> <a id="14762" class="Symbol">{</a><a id="14763" class="Argument">ρ</a> <a id="14765" class="Symbol">=</a> <a id="14767" href="/Untyped/#5845" class="Function">ext</a> <a id="14771" href="/Substitution/#14653" class="Bound">ρ</a><a id="14772" class="Symbol">}{</a><a id="14774" class="Argument">M</a> <a id="14776" class="Symbol">=</a> <a id="14778" href="/Substitution/#14662" class="Bound">N</a><a id="14779" class="Symbol">})</a> <a id="14782" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
      <a id="14790" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="14792" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="14794" href="/Substitution/#6144" class="Function">ren</a> <a id="14798" class="Symbol">(</a><a id="14799" href="/Untyped/#5845" class="Function">ext</a> <a id="14803" href="/Substitution/#14653" class="Bound">ρ</a><a id="14804" class="Symbol">)</a> <a id="14806" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="14808" href="/Substitution/#14662" class="Bound">N</a>
    <a id="14814" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="14817" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="14822" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a> <a id="14825" class="Symbol">(</a><a id="14826" href="/Substitution/#11058" class="Function">subst-equal</a> <a id="14838" class="Symbol">{</a><a id="14839" class="Argument">M</a> <a id="14841" class="Symbol">=</a> <a id="14843" href="/Substitution/#14662" class="Bound">N</a><a id="14844" class="Symbol">}</a> <a id="14846" href="/Substitution/#14064" class="Function">ren-ext-x</a><a id="14855" class="Symbol">)</a> <a id="14857" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
      <a id="14865" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="14867" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="14869" href="/Untyped/#6623" class="Function">exts</a> <a id="14874" class="Symbol">(</a><a id="14875" href="/Substitution/#6144" class="Function">ren</a> <a id="14879" href="/Substitution/#14653" class="Bound">ρ</a><a id="14880" class="Symbol">)</a> <a id="14882" href="/Substitution/#2131" class="Function Operator">⧽</a>  <a id="14885" href="/Substitution/#14662" class="Bound">N</a>
    <a id="14891" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
      <a id="14901" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="14903" href="/Substitution/#6144" class="Function">ren</a> <a id="14907" href="/Substitution/#14653" class="Bound">ρ</a> <a id="14909" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="14911" class="Symbol">(</a><a id="14912" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="14914" href="/Substitution/#14662" class="Bound">N</a><a id="14915" class="Symbol">)</a>
  <a id="14919" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a>
<a id="14921" href="/Substitution/#14495" class="Function">rename-subst-ren</a> <a id="14938" class="Symbol">{</a><a id="14939" class="Argument">M</a> <a id="14941" class="Symbol">=</a> <a id="14943" href="/Substitution/#14943" class="Bound">L</a> <a id="14945" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="14947" href="/Substitution/#14947" class="Bound">M</a><a id="14948" class="Symbol">}</a> <a id="14950" class="Symbol">=</a> <a id="14952" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1408" class="Function">cong₂</a> <a id="14958" href="/Untyped/#4298" class="InductiveConstructor Operator">_·_</a> <a id="14962" href="/Substitution/#14495" class="Function">rename-subst-ren</a> <a id="14979" href="/Substitution/#14495" class="Function">rename-subst-ren</a></pre>

<p>The substitution <code class="highlighter-rouge">ren S_</code> is equivalent to <code class="highlighter-rouge">↑</code>.</p>

<pre class="Agda"><a id="ren-shift"></a><a id="15070" href="/Substitution/#15070" class="Function">ren-shift</a> <a id="15080" class="Symbol">:</a> <a id="15082" class="Symbol">∀{</a><a id="15084" href="/Substitution/#15084" class="Bound">Γ</a><a id="15085" class="Symbol">}{</a><a id="15087" href="/Substitution/#15087" class="Bound">A</a><a id="15088" class="Symbol">}{</a><a id="15090" href="/Substitution/#15090" class="Bound">B</a><a id="15091" class="Symbol">}</a> <a id="15093" class="Symbol">{</a><a id="15094" href="/Substitution/#15094" class="Bound">x</a> <a id="15096" class="Symbol">:</a> <a id="15098" href="/Substitution/#15084" class="Bound">Γ</a> <a id="15100" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="15102" href="/Substitution/#15087" class="Bound">A</a><a id="15103" class="Symbol">}</a>
          <a id="15115" class="Symbol">→</a> <a id="15117" href="/Substitution/#6144" class="Function">ren</a> <a id="15121" class="Symbol">(</a><a id="15122" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a><a id="15124" class="Symbol">{</a><a id="15125" class="Argument">B</a> <a id="15127" class="Symbol">=</a> <a id="15129" href="/Substitution/#15090" class="Bound">B</a><a id="15130" class="Symbol">})</a> <a id="15133" href="/Substitution/#15094" class="Bound">x</a> <a id="15135" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="15137" href="/Substitution/#2774" class="Function">↑</a> <a id="15139" class="Symbol">{</a><a id="15140" class="Argument">A</a> <a id="15142" class="Symbol">=</a> <a id="15144" href="/Substitution/#15090" class="Bound">B</a><a id="15145" class="Symbol">}</a> <a id="15147" href="/Substitution/#15094" class="Bound">x</a>
<a id="15149" href="/Substitution/#15070" class="Function">ren-shift</a> <a id="15159" class="Symbol">{</a><a id="15160" class="Argument">x</a> <a id="15162" class="Symbol">=</a> <a id="15164" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="15165" class="Symbol">}</a> <a id="15167" class="Symbol">=</a> <a id="15169" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="15174" href="/Substitution/#15070" class="Function">ren-shift</a> <a id="15184" class="Symbol">{</a><a id="15185" class="Argument">x</a> <a id="15187" class="Symbol">=</a> <a id="15189" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="15191" href="/Substitution/#15191" class="Bound">x</a><a id="15192" class="Symbol">}</a> <a id="15194" class="Symbol">=</a> <a id="15196" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<p>The substitution <code class="highlighter-rouge">rename S_</code> is equivalent to shifting: <code class="highlighter-rouge">⧼ ↑ ⧽</code>.</p>

<pre class="Agda"><a id="rename-shift"></a><a id="15292" href="/Substitution/#15292" class="Function">rename-shift</a> <a id="15305" class="Symbol">:</a> <a id="15307" class="Symbol">∀{</a><a id="15309" href="/Substitution/#15309" class="Bound">Γ</a><a id="15310" class="Symbol">}</a> <a id="15312" class="Symbol">{</a><a id="15313" href="/Substitution/#15313" class="Bound">A</a><a id="15314" class="Symbol">}</a> <a id="15316" class="Symbol">{</a><a id="15317" href="/Substitution/#15317" class="Bound">B</a><a id="15318" class="Symbol">}</a> <a id="15320" class="Symbol">{</a><a id="15321" href="/Substitution/#15321" class="Bound">M</a> <a id="15323" class="Symbol">:</a> <a id="15325" href="/Substitution/#15309" class="Bound">Γ</a> <a id="15327" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="15329" href="/Substitution/#15313" class="Bound">A</a><a id="15330" class="Symbol">}</a>
             <a id="15345" class="Symbol">→</a> <a id="15347" href="/Untyped/#6171" class="Function">rename</a> <a id="15354" class="Symbol">(</a><a id="15355" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a><a id="15357" class="Symbol">{</a><a id="15358" class="Argument">B</a> <a id="15360" class="Symbol">=</a> <a id="15362" href="/Substitution/#15317" class="Bound">B</a><a id="15363" class="Symbol">})</a> <a id="15366" href="/Substitution/#15321" class="Bound">M</a> <a id="15368" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="15370" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="15372" href="/Substitution/#2774" class="Function">↑</a> <a id="15374" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="15376" href="/Substitution/#15321" class="Bound">M</a>
<a id="15378" href="/Substitution/#15292" class="Function">rename-shift</a><a id="15390" class="Symbol">{</a><a id="15391" href="/Substitution/#15391" class="Bound">Γ</a><a id="15392" class="Symbol">}{</a><a id="15394" href="/Substitution/#15394" class="Bound">A</a><a id="15395" class="Symbol">}{</a><a id="15397" href="/Substitution/#15397" class="Bound">B</a><a id="15398" class="Symbol">}{</a><a id="15400" href="/Substitution/#15400" class="Bound">M</a><a id="15401" class="Symbol">}</a> <a id="15403" class="Symbol">=</a>
  <a id="15407" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
    <a id="15417" href="/Untyped/#6171" class="Function">rename</a> <a id="15424" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a> <a id="15427" href="/Substitution/#15400" class="Bound">M</a>
  <a id="15431" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="15434" href="/Substitution/#14495" class="Function">rename-subst-ren</a> <a id="15451" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
    <a id="15457" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="15459" href="/Substitution/#6144" class="Function">ren</a> <a id="15463" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a> <a id="15466" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="15468" href="/Substitution/#15400" class="Bound">M</a>
  <a id="15472" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="15475" href="/Substitution/#11058" class="Function">subst-equal</a><a id="15486" class="Symbol">{</a><a id="15487" class="Argument">M</a> <a id="15489" class="Symbol">=</a> <a id="15491" href="/Substitution/#15400" class="Bound">M</a><a id="15492" class="Symbol">}</a> <a id="15494" href="/Substitution/#15070" class="Function">ren-shift</a> <a id="15504" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
    <a id="15510" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="15512" href="/Substitution/#2774" class="Function">↑</a> <a id="15514" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="15516" href="/Substitution/#15400" class="Bound">M</a>
  <a id="15520" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a></pre>

<p>Next we prove the equation <code class="highlighter-rouge">exts-cons-shift</code>, which states that <code class="highlighter-rouge">exts</code>
is equivalent to cons’ing Z onto the sequence formed by applying <code class="highlighter-rouge">σ</code>
and then shifting. The proof is by case analysis on the variable <code class="highlighter-rouge">x</code>,
using <code class="highlighter-rouge">rename-subst-ren</code> for when <code class="highlighter-rouge">x = S y</code>.</p>

<pre class="Agda"><a id="exts-cons-shift-x"></a><a id="15803" href="/Substitution/#15803" class="Function">exts-cons-shift-x</a> <a id="15821" class="Symbol">:</a> <a id="15823" class="Symbol">∀{</a><a id="15825" href="/Substitution/#15825" class="Bound">Γ</a> <a id="15827" href="/Substitution/#15827" class="Bound">Δ</a><a id="15828" class="Symbol">}</a> <a id="15830" class="Symbol">{</a><a id="15831" href="/Substitution/#15831" class="Bound">A</a> <a id="15833" href="/Substitution/#15833" class="Bound">B</a><a id="15834" class="Symbol">}</a> <a id="15836" class="Symbol">{</a><a id="15837" href="/Substitution/#15837" class="Bound">σ</a> <a id="15839" class="Symbol">:</a> <a id="15841" href="/Soundness/#2673" class="Function">Subst</a> <a id="15847" href="/Substitution/#15825" class="Bound">Γ</a> <a id="15849" href="/Substitution/#15827" class="Bound">Δ</a><a id="15850" class="Symbol">}</a> <a id="15852" class="Symbol">{</a><a id="15853" href="/Substitution/#15853" class="Bound">x</a> <a id="15855" class="Symbol">:</a> <a id="15857" href="/Substitution/#15825" class="Bound">Γ</a> <a id="15859" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="15861" href="/Substitution/#15833" class="Bound">B</a> <a id="15863" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="15865" href="/Substitution/#15831" class="Bound">A</a><a id="15866" class="Symbol">}</a>
                <a id="15884" class="Symbol">→</a> <a id="15886" href="/Untyped/#6623" class="Function">exts</a> <a id="15891" href="/Substitution/#15837" class="Bound">σ</a> <a id="15893" href="/Substitution/#15853" class="Bound">x</a> <a id="15895" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="15897" class="Symbol">(</a><a id="15898" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="15900" href="/Untyped/#3401" class="InductiveConstructor">Z</a> <a id="15902" href="/Substitution/#3029" class="Function Operator">•</a> <a id="15904" class="Symbol">(</a><a id="15905" href="/Substitution/#15837" class="Bound">σ</a> <a id="15907" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="15909" href="/Substitution/#2774" class="Function">↑</a><a id="15910" class="Symbol">))</a> <a id="15913" href="/Substitution/#15853" class="Bound">x</a>
<a id="15915" href="/Substitution/#15803" class="Function">exts-cons-shift-x</a> <a id="15933" class="Symbol">{</a><a id="15934" class="Argument">x</a> <a id="15936" class="Symbol">=</a> <a id="15938" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="15939" class="Symbol">}</a> <a id="15941" class="Symbol">=</a> <a id="15943" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="15948" href="/Substitution/#15803" class="Function">exts-cons-shift-x</a> <a id="15966" class="Symbol">{</a><a id="15967" class="Argument">x</a> <a id="15969" class="Symbol">=</a> <a id="15971" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="15973" href="/Substitution/#15973" class="Bound">y</a><a id="15974" class="Symbol">}</a> <a id="15976" class="Symbol">=</a> <a id="15978" href="/Substitution/#14495" class="Function">rename-subst-ren</a>

<a id="exts-cons-shift"></a><a id="15996" href="/Substitution/#15996" class="Function">exts-cons-shift</a> <a id="16012" class="Symbol">:</a> <a id="16014" class="Symbol">∀{</a><a id="16016" href="/Substitution/#16016" class="Bound">Γ</a> <a id="16018" href="/Substitution/#16018" class="Bound">Δ</a><a id="16019" class="Symbol">}</a> <a id="16021" class="Symbol">{</a><a id="16022" href="/Substitution/#16022" class="Bound">A</a> <a id="16024" href="/Substitution/#16024" class="Bound">B</a><a id="16025" class="Symbol">}</a> <a id="16027" class="Symbol">{</a><a id="16028" href="/Substitution/#16028" class="Bound">σ</a> <a id="16030" class="Symbol">:</a> <a id="16032" href="/Soundness/#2673" class="Function">Subst</a> <a id="16038" href="/Substitution/#16016" class="Bound">Γ</a> <a id="16040" href="/Substitution/#16018" class="Bound">Δ</a><a id="16041" class="Symbol">}</a>
                <a id="16059" class="Symbol">→</a> <a id="16061" href="/Untyped/#6623" class="Function">exts</a> <a id="16066" href="/Substitution/#16028" class="Bound">σ</a> <a id="16068" class="Symbol">{</a><a id="16069" href="/Substitution/#16022" class="Bound">A</a><a id="16070" class="Symbol">}</a> <a id="16072" class="Symbol">{</a><a id="16073" href="/Substitution/#16024" class="Bound">B</a><a id="16074" class="Symbol">}</a> <a id="16076" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="16078" class="Symbol">(</a><a id="16079" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="16081" href="/Untyped/#3401" class="InductiveConstructor">Z</a> <a id="16083" href="/Substitution/#3029" class="Function Operator">•</a> <a id="16085" class="Symbol">(</a><a id="16086" href="/Substitution/#16028" class="Bound">σ</a> <a id="16088" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="16090" href="/Substitution/#2774" class="Function">↑</a><a id="16091" class="Symbol">))</a>
<a id="16094" href="/Substitution/#15996" class="Function">exts-cons-shift</a> <a id="16110" class="Symbol">=</a> <a id="16112" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="16127" class="Symbol">λ</a> <a id="16129" href="/Substitution/#16129" class="Bound">x</a> <a id="16131" class="Symbol">→</a> <a id="16133" href="/Substitution/#15803" class="Function">exts-cons-shift-x</a><a id="16150" class="Symbol">{</a><a id="16151" class="Argument">x</a> <a id="16153" class="Symbol">=</a> <a id="16155" href="/Substitution/#16129" class="Bound">x</a><a id="16156" class="Symbol">}</a></pre>

<p>As a corollary, we have a similar correspondence for <code class="highlighter-rouge">ren (ext ρ)</code>.</p>

<pre class="Agda"><a id="ext-cons-Z-shift"></a><a id="16252" href="/Substitution/#16252" class="Function">ext-cons-Z-shift</a> <a id="16269" class="Symbol">:</a> <a id="16271" class="Symbol">∀{</a><a id="16273" href="/Substitution/#16273" class="Bound">Γ</a> <a id="16275" href="/Substitution/#16275" class="Bound">Δ</a><a id="16276" class="Symbol">}</a> <a id="16278" class="Symbol">{</a><a id="16279" href="/Substitution/#16279" class="Bound">ρ</a> <a id="16281" class="Symbol">:</a> <a id="16283" href="/Denotational/#23286" class="Function">Rename</a> <a id="16290" href="/Substitution/#16273" class="Bound">Γ</a> <a id="16292" href="/Substitution/#16275" class="Bound">Δ</a><a id="16293" class="Symbol">}{</a><a id="16295" href="/Substitution/#16295" class="Bound">A</a><a id="16296" class="Symbol">}{</a><a id="16298" href="/Substitution/#16298" class="Bound">B</a><a id="16299" class="Symbol">}</a> 
                 <a id="16319" class="Symbol">→</a> <a id="16321" href="/Substitution/#6144" class="Function">ren</a> <a id="16325" class="Symbol">(</a><a id="16326" href="/Untyped/#5845" class="Function">ext</a> <a id="16330" href="/Substitution/#16279" class="Bound">ρ</a> <a id="16332" class="Symbol">{</a><a id="16333" class="Argument">B</a> <a id="16335" class="Symbol">=</a> <a id="16337" href="/Substitution/#16298" class="Bound">B</a><a id="16338" class="Symbol">})</a> <a id="16341" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="16343" class="Symbol">(</a><a id="16344" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="16346" href="/Untyped/#3401" class="InductiveConstructor">Z</a> <a id="16348" href="/Substitution/#3029" class="Function Operator">•</a> <a id="16350" class="Symbol">(</a><a id="16351" href="/Substitution/#6144" class="Function">ren</a> <a id="16355" href="/Substitution/#16279" class="Bound">ρ</a> <a id="16357" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="16359" href="/Substitution/#2774" class="Function">↑</a><a id="16360" class="Symbol">))</a> <a id="16363" class="Symbol">{</a><a id="16364" href="/Substitution/#16295" class="Bound">A</a><a id="16365" class="Symbol">}</a>
<a id="16367" href="/Substitution/#16252" class="Function">ext-cons-Z-shift</a> <a id="16384" class="Symbol">{</a><a id="16385" href="/Substitution/#16385" class="Bound">Γ</a><a id="16386" class="Symbol">}{</a><a id="16388" href="/Substitution/#16388" class="Bound">Δ</a><a id="16389" class="Symbol">}{</a><a id="16391" href="/Substitution/#16391" class="Bound">ρ</a><a id="16392" class="Symbol">}{</a><a id="16394" href="/Substitution/#16394" class="Bound">A</a><a id="16395" class="Symbol">}{</a><a id="16397" href="/Substitution/#16397" class="Bound">B</a><a id="16398" class="Symbol">}</a> <a id="16400" class="Symbol">=</a>
  <a id="16404" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="16419" class="Symbol">λ</a> <a id="16421" href="/Substitution/#16421" class="Bound">x</a> <a id="16423" class="Symbol">→</a> 
  <a id="16428" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
    <a id="16438" href="/Substitution/#6144" class="Function">ren</a> <a id="16442" class="Symbol">(</a><a id="16443" href="/Untyped/#5845" class="Function">ext</a> <a id="16447" href="/Substitution/#16391" class="Bound">ρ</a><a id="16448" class="Symbol">)</a> <a id="16450" href="/Substitution/#16421" class="Bound">x</a>
  <a id="16454" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="16457" href="/Substitution/#14064" class="Function">ren-ext-x</a> <a id="16467" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
    <a id="16473" href="/Untyped/#6623" class="Function">exts</a> <a id="16478" class="Symbol">(</a><a id="16479" href="/Substitution/#6144" class="Function">ren</a> <a id="16483" href="/Substitution/#16391" class="Bound">ρ</a><a id="16484" class="Symbol">)</a> <a id="16486" href="/Substitution/#16421" class="Bound">x</a>
  <a id="16490" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="16493" href="/Substitution/#15803" class="Function">exts-cons-shift-x</a><a id="16510" class="Symbol">{</a><a id="16511" class="Argument">σ</a> <a id="16513" class="Symbol">=</a> <a id="16515" href="/Substitution/#6144" class="Function">ren</a> <a id="16519" href="/Substitution/#16391" class="Bound">ρ</a><a id="16520" class="Symbol">}{</a><a id="16522" class="Argument">x</a> <a id="16524" class="Symbol">=</a> <a id="16526" href="/Substitution/#16421" class="Bound">x</a><a id="16527" class="Symbol">}</a> <a id="16529" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
   <a id="16534" class="Symbol">((</a><a id="16536" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="16538" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="16539" class="Symbol">)</a> <a id="16541" href="/Substitution/#3029" class="Function Operator">•</a> <a id="16543" class="Symbol">(</a><a id="16544" href="/Substitution/#6144" class="Function">ren</a> <a id="16548" href="/Substitution/#16391" class="Bound">ρ</a> <a id="16550" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="16552" href="/Substitution/#2774" class="Function">↑</a><a id="16553" class="Symbol">))</a> <a id="16556" href="/Substitution/#16421" class="Bound">x</a>
  <a id="16560" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a></pre>

<p>Finally, the <code class="highlighter-rouge">subst-zero M</code> substitution is equivalent to cons’ing <code class="highlighter-rouge">M</code>
onto the identity substitution.</p>

<pre class="Agda"><a id="subst-Z-cons-ids-x"></a><a id="16691" href="/Substitution/#16691" class="Function">subst-Z-cons-ids-x</a> <a id="16710" class="Symbol">:</a> <a id="16712" class="Symbol">∀{</a><a id="16714" href="/Substitution/#16714" class="Bound">Γ</a><a id="16715" class="Symbol">}{</a><a id="16717" href="/Substitution/#16717" class="Bound">A</a> <a id="16719" href="/Substitution/#16719" class="Bound">B</a> <a id="16721" class="Symbol">:</a> <a id="16723" href="/Untyped/#2675" class="Datatype">Type</a><a id="16727" class="Symbol">}{</a><a id="16729" href="/Substitution/#16729" class="Bound">M</a> <a id="16731" class="Symbol">:</a> <a id="16733" href="/Substitution/#16714" class="Bound">Γ</a> <a id="16735" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="16737" href="/Substitution/#16719" class="Bound">B</a><a id="16738" class="Symbol">}{</a><a id="16740" href="/Substitution/#16740" class="Bound">x</a> <a id="16742" class="Symbol">:</a> <a id="16744" href="/Substitution/#16714" class="Bound">Γ</a> <a id="16746" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="16748" href="/Substitution/#16719" class="Bound">B</a> <a id="16750" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="16752" href="/Substitution/#16717" class="Bound">A</a><a id="16753" class="Symbol">}</a>
                    <a id="16775" class="Symbol">→</a> <a id="16777" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="16788" href="/Substitution/#16729" class="Bound">M</a> <a id="16790" href="/Substitution/#16740" class="Bound">x</a> <a id="16792" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="16794" class="Symbol">(</a><a id="16795" href="/Substitution/#16729" class="Bound">M</a> <a id="16797" href="/Substitution/#3029" class="Function Operator">•</a> <a id="16799" href="/Substitution/#2646" class="Function">ids</a><a id="16802" class="Symbol">)</a> <a id="16804" href="/Substitution/#16740" class="Bound">x</a>
<a id="16806" href="/Substitution/#16691" class="Function">subst-Z-cons-ids-x</a> <a id="16825" class="Symbol">{</a><a id="16826" class="Argument">x</a> <a id="16828" class="Symbol">=</a> <a id="16830" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="16831" class="Symbol">}</a> <a id="16833" class="Symbol">=</a> <a id="16835" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="16840" href="/Substitution/#16691" class="Function">subst-Z-cons-ids-x</a> <a id="16859" class="Symbol">{</a><a id="16860" class="Argument">x</a> <a id="16862" class="Symbol">=</a> <a id="16864" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="16866" href="/Substitution/#16866" class="Bound">x</a><a id="16867" class="Symbol">}</a> <a id="16869" class="Symbol">=</a> <a id="16871" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>

<a id="subst-Z-cons-ids"></a><a id="16877" href="/Substitution/#16877" class="Function">subst-Z-cons-ids</a> <a id="16894" class="Symbol">:</a> <a id="16896" class="Symbol">∀{</a><a id="16898" href="/Substitution/#16898" class="Bound">Γ</a><a id="16899" class="Symbol">}{</a><a id="16901" href="/Substitution/#16901" class="Bound">A</a> <a id="16903" href="/Substitution/#16903" class="Bound">B</a> <a id="16905" class="Symbol">:</a> <a id="16907" href="/Untyped/#2675" class="Datatype">Type</a><a id="16911" class="Symbol">}{</a><a id="16913" href="/Substitution/#16913" class="Bound">M</a> <a id="16915" class="Symbol">:</a> <a id="16917" href="/Substitution/#16898" class="Bound">Γ</a> <a id="16919" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="16921" href="/Substitution/#16903" class="Bound">B</a><a id="16922" class="Symbol">}</a>
                 <a id="16941" class="Symbol">→</a> <a id="16943" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="16954" href="/Substitution/#16913" class="Bound">M</a> <a id="16956" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="16958" class="Symbol">(</a><a id="16959" href="/Substitution/#16913" class="Bound">M</a> <a id="16961" href="/Substitution/#3029" class="Function Operator">•</a> <a id="16963" href="/Substitution/#2646" class="Function">ids</a><a id="16966" class="Symbol">)</a> <a id="16968" class="Symbol">{</a><a id="16969" href="/Substitution/#16901" class="Bound">A</a><a id="16970" class="Symbol">}</a>
<a id="16972" href="/Substitution/#16877" class="Function">subst-Z-cons-ids</a> <a id="16989" class="Symbol">=</a> <a id="16991" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="17006" class="Symbol">λ</a> <a id="17008" href="/Substitution/#17008" class="Bound">x</a> <a id="17010" class="Symbol">→</a> <a id="17012" href="/Substitution/#16691" class="Function">subst-Z-cons-ids-x</a> <a id="17031" class="Symbol">{</a><a id="17032" class="Argument">x</a> <a id="17034" class="Symbol">=</a> <a id="17036" href="/Substitution/#17008" class="Bound">x</a><a id="17037" class="Symbol">}</a></pre>

<h2 id="proofs-of-sub-abs-and-sub-id">Proofs of sub-abs and sub-id</h2>

<p>The equation <code class="highlighter-rouge">sub-abs</code> follows immediately from the equation
<code class="highlighter-rouge">exts-cons-shift</code>.</p>

<pre class="Agda"><a id="sub-abs"></a><a id="17179" href="/Substitution/#17179" class="Function">sub-abs</a> <a id="17187" class="Symbol">:</a> <a id="17189" class="Symbol">∀{</a><a id="17191" href="/Substitution/#17191" class="Bound">Γ</a> <a id="17193" href="/Substitution/#17193" class="Bound">Δ</a><a id="17194" class="Symbol">}</a> <a id="17196" class="Symbol">{</a><a id="17197" href="/Substitution/#17197" class="Bound">σ</a> <a id="17199" class="Symbol">:</a> <a id="17201" href="/Soundness/#2673" class="Function">Subst</a> <a id="17207" href="/Substitution/#17191" class="Bound">Γ</a> <a id="17209" href="/Substitution/#17193" class="Bound">Δ</a><a id="17210" class="Symbol">}</a> <a id="17212" class="Symbol">{</a><a id="17213" href="/Substitution/#17213" class="Bound">N</a> <a id="17215" class="Symbol">:</a> <a id="17217" href="/Substitution/#17191" class="Bound">Γ</a> <a id="17219" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="17221" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="17223" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="17225" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="17226" class="Symbol">}</a>
        <a id="17236" class="Symbol">→</a> <a id="17238" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="17240" href="/Substitution/#17197" class="Bound">σ</a> <a id="17242" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="17244" class="Symbol">(</a><a id="17245" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="17247" href="/Substitution/#17213" class="Bound">N</a><a id="17248" class="Symbol">)</a> <a id="17250" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="17252" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="17254" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="17256" class="Symbol">(</a><a id="17257" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="17259" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="17260" class="Symbol">)</a> <a id="17262" href="/Substitution/#3029" class="Function Operator">•</a> <a id="17264" class="Symbol">(</a><a id="17265" href="/Substitution/#17197" class="Bound">σ</a> <a id="17267" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="17269" href="/Substitution/#2774" class="Function">↑</a><a id="17270" class="Symbol">)</a> <a id="17272" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="17274" href="/Substitution/#17213" class="Bound">N</a>
<a id="17276" href="/Substitution/#17179" class="Function">sub-abs</a> <a id="17284" class="Symbol">{</a><a id="17285" class="Argument">σ</a> <a id="17287" class="Symbol">=</a> <a id="17289" href="/Substitution/#17289" class="Bound">σ</a><a id="17290" class="Symbol">}{</a><a id="17292" class="Argument">N</a> <a id="17294" class="Symbol">=</a> <a id="17296" href="/Substitution/#17296" class="Bound">N</a><a id="17297" class="Symbol">}</a> <a id="17299" class="Symbol">=</a>
   <a id="17304" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
     <a id="17315" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="17317" href="/Substitution/#17289" class="Bound">σ</a> <a id="17319" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="17321" class="Symbol">(</a><a id="17322" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="17324" href="/Substitution/#17296" class="Bound">N</a><a id="17325" class="Symbol">)</a>
   <a id="17330" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
     <a id="17339" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="17341" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="17343" href="/Untyped/#6623" class="Function">exts</a> <a id="17348" href="/Substitution/#17289" class="Bound">σ</a> <a id="17350" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="17352" href="/Substitution/#17296" class="Bound">N</a>
   <a id="17357" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="17360" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="17365" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a> <a id="17368" class="Symbol">(</a><a id="17369" href="/Substitution/#11228" class="Function">subst-equal2</a><a id="17381" class="Symbol">{</a><a id="17382" class="Argument">M</a> <a id="17384" class="Symbol">=</a> <a id="17386" href="/Substitution/#17296" class="Bound">N</a><a id="17387" class="Symbol">}</a> <a id="17389" href="/Substitution/#15996" class="Function">exts-cons-shift</a><a id="17404" class="Symbol">)</a> <a id="17406" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
     <a id="17413" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="17415" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="17417" class="Symbol">(</a><a id="17418" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="17420" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="17421" class="Symbol">)</a> <a id="17423" href="/Substitution/#3029" class="Function Operator">•</a> <a id="17425" class="Symbol">(</a><a id="17426" href="/Substitution/#17289" class="Bound">σ</a> <a id="17428" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="17430" href="/Substitution/#2774" class="Function">↑</a><a id="17431" class="Symbol">)</a> <a id="17433" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="17435" href="/Substitution/#17296" class="Bound">N</a>
   <a id="17440" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a></pre>

<p>The proof of <code class="highlighter-rouge">sub-id</code> requires the following lemma which says that
extending the identity substitution produces the identity
substitution.</p>

<pre class="Agda"><a id="exts-ids"></a><a id="17607" href="/Substitution/#17607" class="Function">exts-ids</a> <a id="17616" class="Symbol">:</a> <a id="17618" class="Symbol">∀{</a><a id="17620" href="/Substitution/#17620" class="Bound">Γ</a><a id="17621" class="Symbol">}{</a><a id="17623" href="/Substitution/#17623" class="Bound">A</a> <a id="17625" href="/Substitution/#17625" class="Bound">B</a><a id="17626" class="Symbol">}</a>
         <a id="17637" class="Symbol">→</a> <a id="17639" href="/Untyped/#6623" class="Function">exts</a> <a id="17644" href="/Substitution/#2646" class="Function">ids</a> <a id="17648" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="17650" href="/Substitution/#2646" class="Function">ids</a> <a id="17654" class="Symbol">{</a><a id="17655" href="/Substitution/#17620" class="Bound">Γ</a> <a id="17657" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="17659" href="/Substitution/#17625" class="Bound">B</a><a id="17660" class="Symbol">}</a> <a id="17662" class="Symbol">{</a><a id="17663" href="/Substitution/#17623" class="Bound">A</a><a id="17664" class="Symbol">}</a>
<a id="17666" href="/Substitution/#17607" class="Function">exts-ids</a> <a id="17675" class="Symbol">{</a><a id="17676" href="/Substitution/#17676" class="Bound">Γ</a><a id="17677" class="Symbol">}{</a><a id="17679" href="/Substitution/#17679" class="Bound">A</a><a id="17680" class="Symbol">}{</a><a id="17682" href="/Substitution/#17682" class="Bound">B</a><a id="17683" class="Symbol">}</a> <a id="17685" class="Symbol">=</a> <a id="17687" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="17702" href="/Substitution/#17716" class="Function">lemma</a>
  <a id="17710" class="Keyword">where</a> <a id="17716" href="/Substitution/#17716" class="Function">lemma</a> <a id="17722" class="Symbol">:</a> <a id="17724" class="Symbol">(</a><a id="17725" href="/Substitution/#17725" class="Bound">x</a> <a id="17727" class="Symbol">:</a> <a id="17729" href="/Substitution/#17676" class="Bound">Γ</a> <a id="17731" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="17733" href="/Substitution/#17682" class="Bound">B</a> <a id="17735" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="17737" href="/Substitution/#17679" class="Bound">A</a><a id="17738" class="Symbol">)</a> <a id="17740" class="Symbol">→</a> <a id="17742" href="/Untyped/#6623" class="Function">exts</a> <a id="17747" href="/Substitution/#2646" class="Function">ids</a> <a id="17751" href="/Substitution/#17725" class="Bound">x</a> <a id="17753" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="17755" href="/Substitution/#2646" class="Function">ids</a> <a id="17759" href="/Substitution/#17725" class="Bound">x</a>
        <a id="17769" href="/Substitution/#17716" class="Function">lemma</a> <a id="17775" href="/Untyped/#3401" class="InductiveConstructor">Z</a> <a id="17777" class="Symbol">=</a> <a id="17779" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
        <a id="17792" href="/Substitution/#17716" class="Function">lemma</a> <a id="17798" class="Symbol">(</a><a id="17799" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="17801" href="/Substitution/#17801" class="Bound">x</a><a id="17802" class="Symbol">)</a> <a id="17804" class="Symbol">=</a> <a id="17806" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<p>The proof of <code class="highlighter-rouge">⧼ ids ⧽ M ≡ M</code> now follows easily by induction on <code class="highlighter-rouge">M</code>,
using <code class="highlighter-rouge">exts-ids</code> in the case for <code class="highlighter-rouge">M ≡ ƛ N</code>.</p>

<pre class="Agda"><a id="sub-id"></a><a id="17950" href="/Substitution/#17950" class="Function">sub-id</a> <a id="17957" class="Symbol">:</a> <a id="17959" class="Symbol">∀{</a><a id="17961" href="/Substitution/#17961" class="Bound">Γ</a><a id="17962" class="Symbol">}</a> <a id="17964" class="Symbol">{</a><a id="17965" href="/Substitution/#17965" class="Bound">A</a><a id="17966" class="Symbol">}</a> <a id="17968" class="Symbol">{</a><a id="17969" href="/Substitution/#17969" class="Bound">M</a> <a id="17971" class="Symbol">:</a> <a id="17973" href="/Substitution/#17961" class="Bound">Γ</a> <a id="17975" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="17977" href="/Substitution/#17965" class="Bound">A</a><a id="17978" class="Symbol">}</a>
         <a id="17989" class="Symbol">→</a> <a id="17991" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="17993" href="/Substitution/#2646" class="Function">ids</a> <a id="17997" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="17999" href="/Substitution/#17969" class="Bound">M</a> <a id="18001" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="18003" href="/Substitution/#17969" class="Bound">M</a>
<a id="18005" href="/Substitution/#17950" class="Function">sub-id</a> <a id="18012" class="Symbol">{</a><a id="18013" class="Argument">M</a> <a id="18015" class="Symbol">=</a> <a id="18017" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="18019" href="/Substitution/#18019" class="Bound">x</a><a id="18020" class="Symbol">}</a> <a id="18022" class="Symbol">=</a> <a id="18024" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="18029" href="/Substitution/#17950" class="Function">sub-id</a> <a id="18036" class="Symbol">{</a><a id="18037" class="Argument">M</a> <a id="18039" class="Symbol">=</a> <a id="18041" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="18043" href="/Substitution/#18043" class="Bound">N</a><a id="18044" class="Symbol">}</a> <a id="18046" class="Symbol">=</a> 
   <a id="18052" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
     <a id="18063" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="18065" href="/Substitution/#2646" class="Function">ids</a> <a id="18069" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="18071" class="Symbol">(</a><a id="18072" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="18074" href="/Substitution/#18043" class="Bound">N</a><a id="18075" class="Symbol">)</a>
   <a id="18080" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
     <a id="18089" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="18091" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="18093" href="/Untyped/#6623" class="Function">exts</a> <a id="18098" href="/Substitution/#2646" class="Function">ids</a> <a id="18102" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="18104" href="/Substitution/#18043" class="Bound">N</a>
   <a id="18109" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="18112" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="18117" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a> <a id="18120" class="Symbol">(</a><a id="18121" href="/Substitution/#11228" class="Function">subst-equal2</a><a id="18133" class="Symbol">{</a><a id="18134" class="Argument">M</a> <a id="18136" class="Symbol">=</a> <a id="18138" href="/Substitution/#18043" class="Bound">N</a><a id="18139" class="Symbol">}</a> <a id="18141" href="/Substitution/#17607" class="Function">exts-ids</a><a id="18149" class="Symbol">)</a>  <a id="18152" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
     <a id="18159" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="18161" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="18163" href="/Substitution/#2646" class="Function">ids</a> <a id="18167" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="18169" href="/Substitution/#18043" class="Bound">N</a>
   <a id="18174" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="18177" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="18182" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a> <a id="18185" href="/Substitution/#17950" class="Function">sub-id</a> <a id="18192" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
     <a id="18199" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="18201" href="/Substitution/#18043" class="Bound">N</a>
   <a id="18206" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a>
<a id="18208" href="/Substitution/#17950" class="Function">sub-id</a> <a id="18215" class="Symbol">{</a><a id="18216" class="Argument">M</a> <a id="18218" class="Symbol">=</a> <a id="18220" href="/Substitution/#18220" class="Bound">L</a> <a id="18222" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="18224" href="/Substitution/#18224" class="Bound">M</a><a id="18225" class="Symbol">}</a> <a id="18227" class="Symbol">=</a> <a id="18229" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1408" class="Function">cong₂</a> <a id="18235" href="/Untyped/#4298" class="InductiveConstructor Operator">_·_</a> <a id="18239" href="/Substitution/#17950" class="Function">sub-id</a> <a id="18246" href="/Substitution/#17950" class="Function">sub-id</a></pre>

<h2 id="proof-of-sub-idr">Proof of sub-idR</h2>

<p>The proof of <code class="highlighter-rouge">sub-idR</code> follows directly from <code class="highlighter-rouge">sub-id</code>.</p>

<pre class="Agda"><a id="sub-idR"></a><a id="18356" href="/Substitution/#18356" class="Function">sub-idR</a> <a id="18364" class="Symbol">:</a> <a id="18366" class="Symbol">∀{</a><a id="18368" href="/Substitution/#18368" class="Bound">Γ</a> <a id="18370" href="/Substitution/#18370" class="Bound">Δ</a><a id="18371" class="Symbol">}</a> <a id="18373" class="Symbol">{</a><a id="18374" href="/Substitution/#18374" class="Bound">σ</a> <a id="18376" class="Symbol">:</a> <a id="18378" href="/Soundness/#2673" class="Function">Subst</a> <a id="18384" href="/Substitution/#18368" class="Bound">Γ</a> <a id="18386" href="/Substitution/#18370" class="Bound">Δ</a><a id="18387" class="Symbol">}</a> <a id="18389" class="Symbol">{</a><a id="18390" href="/Substitution/#18390" class="Bound">A</a><a id="18391" class="Symbol">}</a>
       <a id="18400" class="Symbol">→</a> <a id="18402" class="Symbol">(</a><a id="18403" href="/Substitution/#18374" class="Bound">σ</a> <a id="18405" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="18407" href="/Substitution/#2646" class="Function">ids</a><a id="18410" class="Symbol">)</a> <a id="18412" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="18414" href="/Substitution/#18374" class="Bound">σ</a> <a id="18416" class="Symbol">{</a><a id="18417" href="/Substitution/#18390" class="Bound">A</a><a id="18418" class="Symbol">}</a>
<a id="18420" href="/Substitution/#18356" class="Function">sub-idR</a> <a id="18428" class="Symbol">{</a><a id="18429" href="/Substitution/#18429" class="Bound">Γ</a><a id="18430" class="Symbol">}{</a><a id="18432" class="Argument">σ</a> <a id="18434" class="Symbol">=</a> <a id="18436" href="/Substitution/#18436" class="Bound">σ</a><a id="18437" class="Symbol">}{</a><a id="18439" href="/Substitution/#18439" class="Bound">A</a><a id="18440" class="Symbol">}</a> <a id="18442" class="Symbol">=</a>
          <a id="18454" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
            <a id="18472" href="/Substitution/#18436" class="Bound">σ</a> <a id="18474" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="18476" href="/Substitution/#2646" class="Function">ids</a>
          <a id="18490" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
            <a id="18506" class="Symbol">(</a><a id="18507" href="/Untyped/#6931" class="Function">subst</a> <a id="18513" href="/Substitution/#2646" class="Function">ids</a><a id="18516" class="Symbol">)</a> <a id="18518" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="18520" href="/Substitution/#18436" class="Bound">σ</a>
          <a id="18532" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="18535" href="/Denotational/#3262" class="Postulate">extensionality</a> <a id="18550" class="Symbol">(λ</a> <a id="18553" href="/Substitution/#18553" class="Bound">x</a> <a id="18555" class="Symbol">→</a> <a id="18557" href="/Substitution/#17950" class="Function">sub-id</a><a id="18563" class="Symbol">)</a> <a id="18565" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
            <a id="18579" href="/Substitution/#18436" class="Bound">σ</a>
          <a id="18591" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a>

<a id="18594" class="Comment">{- todo: remove this and use sub-idR dirctly. -}</a>
<a id="sub-idR-x"></a><a id="18643" href="/Substitution/#18643" class="Function">sub-idR-x</a> <a id="18653" class="Symbol">:</a> <a id="18655" class="Symbol">∀{</a><a id="18657" href="/Substitution/#18657" class="Bound">Γ</a> <a id="18659" href="/Substitution/#18659" class="Bound">Δ</a><a id="18660" class="Symbol">}</a> <a id="18662" class="Symbol">{</a><a id="18663" href="/Substitution/#18663" class="Bound">B</a><a id="18664" class="Symbol">}</a> <a id="18666" class="Symbol">{</a><a id="18667" href="/Substitution/#18667" class="Bound">σ</a> <a id="18669" class="Symbol">:</a> <a id="18671" href="/Soundness/#2673" class="Function">Subst</a> <a id="18677" href="/Substitution/#18657" class="Bound">Γ</a> <a id="18679" href="/Substitution/#18659" class="Bound">Δ</a><a id="18680" class="Symbol">}</a> <a id="18682" class="Symbol">{</a><a id="18683" href="/Substitution/#18683" class="Bound">x</a> <a id="18685" class="Symbol">:</a> <a id="18687" href="/Substitution/#18657" class="Bound">Γ</a> <a id="18689" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="18691" href="/Substitution/#18663" class="Bound">B</a><a id="18692" class="Symbol">}</a>
       <a id="18701" class="Symbol">→</a> <a id="18703" class="Symbol">(</a><a id="18704" href="/Substitution/#18667" class="Bound">σ</a> <a id="18706" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="18708" href="/Substitution/#2646" class="Function">ids</a><a id="18711" class="Symbol">)</a> <a id="18713" href="/Substitution/#18683" class="Bound">x</a> <a id="18715" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="18717" href="/Substitution/#18667" class="Bound">σ</a> <a id="18719" href="/Substitution/#18683" class="Bound">x</a>
<a id="18721" href="/Substitution/#18643" class="Function">sub-idR-x</a> <a id="18731" class="Symbol">{</a><a id="18732" href="/Substitution/#18732" class="Bound">Γ</a><a id="18733" class="Symbol">}{</a><a id="18735" class="Argument">σ</a> <a id="18737" class="Symbol">=</a> <a id="18739" href="/Substitution/#18739" class="Bound">σ</a><a id="18740" class="Symbol">}{</a><a id="18742" class="Argument">x</a> <a id="18744" class="Symbol">=</a> <a id="18746" href="/Substitution/#18746" class="Bound">x</a><a id="18747" class="Symbol">}</a> <a id="18749" class="Symbol">=</a> <a id="18751" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1274" class="Function">cong-app</a> <a id="18760" class="Symbol">(</a><a id="18761" href="/Substitution/#18356" class="Function">sub-idR</a><a id="18768" class="Symbol">{</a><a id="18769" class="Argument">σ</a> <a id="18771" class="Symbol">=</a> <a id="18773" href="/Substitution/#18739" class="Bound">σ</a><a id="18774" class="Symbol">})</a> <a id="18777" href="/Substitution/#18746" class="Bound">x</a></pre>

<h2 id="proof-of-sub-sub">Proof of sub-sub</h2>

<p>The <code class="highlighter-rouge">sub-sub</code> equation states that sequenced substitutions <code class="highlighter-rouge">σ ⨟ τ</code>
are equivalent to first applying <code class="highlighter-rouge">σ</code> then applying <code class="highlighter-rouge">τ</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>⧼ τ ⧽ ⧼ σ ⧽ M  ≡ ⧼ σ ⨟ τ ⧽ M
</code></pre></div></div>

<p>The proof requires several lemmas. First, we need to prove the
specialization for renaming.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rename ρ (rename ρ' M) ≡ rename (ρ ∘ ρ') M
</code></pre></div></div>

<p>This in turn requires the following lemma about <code class="highlighter-rouge">ext</code>.</p>

<pre class="Agda"><a id="compose-ext"></a><a id="19181" href="/Substitution/#19181" class="Function">compose-ext</a> <a id="19193" class="Symbol">:</a> <a id="19195" class="Symbol">∀{</a><a id="19197" href="/Substitution/#19197" class="Bound">Γ</a> <a id="19199" href="/Substitution/#19199" class="Bound">Δ</a> <a id="19201" href="/Substitution/#19201" class="Bound">Σ</a><a id="19202" class="Symbol">}{</a><a id="19204" href="/Substitution/#19204" class="Bound">ρ</a> <a id="19206" class="Symbol">:</a> <a id="19208" href="/Denotational/#23286" class="Function">Rename</a> <a id="19215" href="/Substitution/#19199" class="Bound">Δ</a> <a id="19217" href="/Substitution/#19201" class="Bound">Σ</a><a id="19218" class="Symbol">}</a> <a id="19220" class="Symbol">{</a><a id="19221" href="/Substitution/#19221" class="Bound">ρ&#39;</a> <a id="19224" class="Symbol">:</a> <a id="19226" href="/Denotational/#23286" class="Function">Rename</a> <a id="19233" href="/Substitution/#19197" class="Bound">Γ</a> <a id="19235" href="/Substitution/#19199" class="Bound">Δ</a><a id="19236" class="Symbol">}</a> <a id="19238" class="Symbol">{</a><a id="19239" href="/Substitution/#19239" class="Bound">A</a> <a id="19241" href="/Substitution/#19241" class="Bound">B</a><a id="19242" class="Symbol">}</a> <a id="19244" class="Symbol">{</a><a id="19245" href="/Substitution/#19245" class="Bound">x</a> <a id="19247" class="Symbol">:</a> <a id="19249" href="/Substitution/#19197" class="Bound">Γ</a> <a id="19251" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="19253" href="/Substitution/#19241" class="Bound">B</a> <a id="19255" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="19257" href="/Substitution/#19239" class="Bound">A</a><a id="19258" class="Symbol">}</a>
            <a id="19272" class="Symbol">→</a> <a id="19274" class="Symbol">((</a><a id="19276" href="/Untyped/#5845" class="Function">ext</a> <a id="19280" href="/Substitution/#19204" class="Bound">ρ</a><a id="19281" class="Symbol">)</a> <a id="19283" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="19285" class="Symbol">(</a><a id="19286" href="/Untyped/#5845" class="Function">ext</a> <a id="19290" href="/Substitution/#19221" class="Bound">ρ&#39;</a><a id="19292" class="Symbol">))</a> <a id="19295" href="/Substitution/#19245" class="Bound">x</a> <a id="19297" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="19299" href="/Untyped/#5845" class="Function">ext</a> <a id="19303" class="Symbol">(</a><a id="19304" href="/Substitution/#19204" class="Bound">ρ</a> <a id="19306" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="19308" href="/Substitution/#19221" class="Bound">ρ&#39;</a><a id="19310" class="Symbol">)</a> <a id="19312" href="/Substitution/#19245" class="Bound">x</a>
<a id="19314" href="/Substitution/#19181" class="Function">compose-ext</a> <a id="19326" class="Symbol">{</a><a id="19327" class="Argument">x</a> <a id="19329" class="Symbol">=</a> <a id="19331" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="19332" class="Symbol">}</a> <a id="19334" class="Symbol">=</a> <a id="19336" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="19341" href="/Substitution/#19181" class="Function">compose-ext</a> <a id="19353" class="Symbol">{</a><a id="19354" class="Argument">x</a> <a id="19356" class="Symbol">=</a> <a id="19358" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="19360" href="/Substitution/#19360" class="Bound">x</a><a id="19361" class="Symbol">}</a> <a id="19363" class="Symbol">=</a> <a id="19365" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<p>To prove that composing renamings is equivalent to appying one after
the other using <code class="highlighter-rouge">rename</code>, we proceed by induction on the term <code class="highlighter-rouge">M</code>,
using the <code class="highlighter-rouge">compose-ext</code> lemma in the case for <code class="highlighter-rouge">M ≡ ƛ N</code>.</p>

<pre class="Agda"><a id="compose-rename"></a><a id="19589" href="/Substitution/#19589" class="Function">compose-rename</a> <a id="19604" class="Symbol">:</a> <a id="19606" class="Symbol">∀{</a><a id="19608" href="/Substitution/#19608" class="Bound">Γ</a> <a id="19610" href="/Substitution/#19610" class="Bound">Δ</a> <a id="19612" href="/Substitution/#19612" class="Bound">Σ</a><a id="19613" class="Symbol">}{</a><a id="19615" href="/Substitution/#19615" class="Bound">A</a><a id="19616" class="Symbol">}{</a><a id="19618" href="/Substitution/#19618" class="Bound">M</a> <a id="19620" class="Symbol">:</a> <a id="19622" href="/Substitution/#19608" class="Bound">Γ</a> <a id="19624" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="19626" href="/Substitution/#19615" class="Bound">A</a><a id="19627" class="Symbol">}{</a><a id="19629" href="/Substitution/#19629" class="Bound">ρ</a> <a id="19631" class="Symbol">:</a> <a id="19633" href="/Denotational/#23286" class="Function">Rename</a> <a id="19640" href="/Substitution/#19610" class="Bound">Δ</a> <a id="19642" href="/Substitution/#19612" class="Bound">Σ</a><a id="19643" class="Symbol">}{</a><a id="19645" href="/Substitution/#19645" class="Bound">ρ&#39;</a> <a id="19648" class="Symbol">:</a> <a id="19650" href="/Denotational/#23286" class="Function">Rename</a> <a id="19657" href="/Substitution/#19608" class="Bound">Γ</a> <a id="19659" href="/Substitution/#19610" class="Bound">Δ</a><a id="19660" class="Symbol">}</a> 
  <a id="19665" class="Symbol">→</a> <a id="19667" href="/Untyped/#6171" class="Function">rename</a> <a id="19674" href="/Substitution/#19629" class="Bound">ρ</a> <a id="19676" class="Symbol">(</a><a id="19677" href="/Untyped/#6171" class="Function">rename</a> <a id="19684" href="/Substitution/#19645" class="Bound">ρ&#39;</a> <a id="19687" href="/Substitution/#19618" class="Bound">M</a><a id="19688" class="Symbol">)</a> <a id="19690" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="19692" href="/Untyped/#6171" class="Function">rename</a> <a id="19699" class="Symbol">(</a><a id="19700" href="/Substitution/#19629" class="Bound">ρ</a> <a id="19702" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="19704" href="/Substitution/#19645" class="Bound">ρ&#39;</a><a id="19706" class="Symbol">)</a> <a id="19708" href="/Substitution/#19618" class="Bound">M</a>
<a id="19710" href="/Substitution/#19589" class="Function">compose-rename</a> <a id="19725" class="Symbol">{</a><a id="19726" class="Argument">M</a> <a id="19728" class="Symbol">=</a> <a id="19730" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="19732" href="/Substitution/#19732" class="Bound">x</a><a id="19733" class="Symbol">}</a> <a id="19735" class="Symbol">=</a> <a id="19737" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="19742" href="/Substitution/#19589" class="Function">compose-rename</a> <a id="19757" class="Symbol">{</a><a id="19758" href="/Substitution/#19758" class="Bound">Γ</a><a id="19759" class="Symbol">}{</a><a id="19761" href="/Substitution/#19761" class="Bound">Δ</a><a id="19762" class="Symbol">}{</a><a id="19764" href="/Substitution/#19764" class="Bound">Σ</a><a id="19765" class="Symbol">}{</a><a id="19767" href="/Substitution/#19767" class="Bound">A</a><a id="19768" class="Symbol">}{</a><a id="19770" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="19772" href="/Substitution/#19772" class="Bound">N</a><a id="19773" class="Symbol">}{</a><a id="19775" href="/Substitution/#19775" class="Bound">ρ</a><a id="19776" class="Symbol">}{</a><a id="19778" href="/Substitution/#19778" class="Bound">ρ&#39;</a><a id="19780" class="Symbol">}</a> <a id="19782" class="Symbol">=</a> <a id="19784" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="19789" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a> <a id="19792" href="/Substitution/#19804" class="Function">G</a>
  <a id="19796" class="Keyword">where</a>
  <a id="19804" href="/Substitution/#19804" class="Function">G</a> <a id="19806" class="Symbol">:</a> <a id="19808" href="/Untyped/#6171" class="Function">rename</a> <a id="19815" class="Symbol">(</a><a id="19816" href="/Untyped/#5845" class="Function">ext</a> <a id="19820" href="/Substitution/#19775" class="Bound">ρ</a><a id="19821" class="Symbol">)</a> <a id="19823" class="Symbol">(</a><a id="19824" href="/Untyped/#6171" class="Function">rename</a> <a id="19831" class="Symbol">(</a><a id="19832" href="/Untyped/#5845" class="Function">ext</a> <a id="19836" href="/Substitution/#19778" class="Bound">ρ&#39;</a><a id="19838" class="Symbol">)</a> <a id="19840" href="/Substitution/#19772" class="Bound">N</a><a id="19841" class="Symbol">)</a> <a id="19843" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="19845" href="/Untyped/#6171" class="Function">rename</a> <a id="19852" class="Symbol">(</a><a id="19853" href="/Untyped/#5845" class="Function">ext</a> <a id="19857" class="Symbol">(</a><a id="19858" href="/Substitution/#19775" class="Bound">ρ</a> <a id="19860" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="19862" href="/Substitution/#19778" class="Bound">ρ&#39;</a><a id="19864" class="Symbol">))</a> <a id="19867" href="/Substitution/#19772" class="Bound">N</a>
  <a id="19871" href="/Substitution/#19804" class="Function">G</a> <a id="19873" class="Symbol">=</a>
      <a id="19881" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
        <a id="19895" href="/Untyped/#6171" class="Function">rename</a> <a id="19902" class="Symbol">(</a><a id="19903" href="/Untyped/#5845" class="Function">ext</a> <a id="19907" href="/Substitution/#19775" class="Bound">ρ</a><a id="19908" class="Symbol">)</a> <a id="19910" class="Symbol">(</a><a id="19911" href="/Untyped/#6171" class="Function">rename</a> <a id="19918" class="Symbol">(</a><a id="19919" href="/Untyped/#5845" class="Function">ext</a> <a id="19923" href="/Substitution/#19778" class="Bound">ρ&#39;</a><a id="19925" class="Symbol">)</a> <a id="19927" href="/Substitution/#19772" class="Bound">N</a><a id="19928" class="Symbol">)</a>
      <a id="19936" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="19939" href="/Substitution/#19589" class="Function">compose-rename</a><a id="19953" class="Symbol">{</a><a id="19954" class="Argument">ρ</a> <a id="19956" class="Symbol">=</a> <a id="19958" href="/Untyped/#5845" class="Function">ext</a> <a id="19962" href="/Substitution/#19775" class="Bound">ρ</a><a id="19963" class="Symbol">}{</a><a id="19965" class="Argument">ρ&#39;</a> <a id="19968" class="Symbol">=</a> <a id="19970" href="/Untyped/#5845" class="Function">ext</a> <a id="19974" href="/Substitution/#19778" class="Bound">ρ&#39;</a><a id="19976" class="Symbol">}</a> <a id="19978" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
        <a id="19988" href="/Untyped/#6171" class="Function">rename</a> <a id="19995" class="Symbol">((</a><a id="19997" href="/Untyped/#5845" class="Function">ext</a> <a id="20001" href="/Substitution/#19775" class="Bound">ρ</a><a id="20002" class="Symbol">)</a> <a id="20004" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="20006" class="Symbol">(</a><a id="20007" href="/Untyped/#5845" class="Function">ext</a> <a id="20011" href="/Substitution/#19778" class="Bound">ρ&#39;</a><a id="20013" class="Symbol">))</a> <a id="20016" href="/Substitution/#19772" class="Bound">N</a>
      <a id="20024" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="20027" href="/Substitution/#11789" class="Function">rename-equal</a> <a id="20040" href="/Substitution/#19181" class="Function">compose-ext</a> <a id="20052" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
        <a id="20062" href="/Untyped/#6171" class="Function">rename</a> <a id="20069" class="Symbol">(</a><a id="20070" href="/Untyped/#5845" class="Function">ext</a> <a id="20074" class="Symbol">(</a><a id="20075" href="/Substitution/#19775" class="Bound">ρ</a> <a id="20077" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="20079" href="/Substitution/#19778" class="Bound">ρ&#39;</a><a id="20081" class="Symbol">))</a> <a id="20084" href="/Substitution/#19772" class="Bound">N</a>
      <a id="20092" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a>        
<a id="20102" href="/Substitution/#19589" class="Function">compose-rename</a> <a id="20117" class="Symbol">{</a><a id="20118" class="Argument">M</a> <a id="20120" class="Symbol">=</a> <a id="20122" href="/Substitution/#20122" class="Bound">L</a> <a id="20124" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="20126" href="/Substitution/#20126" class="Bound">M</a><a id="20127" class="Symbol">}</a> <a id="20129" class="Symbol">=</a> <a id="20131" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1408" class="Function">cong₂</a> <a id="20137" href="/Untyped/#4298" class="InductiveConstructor Operator">_·_</a> <a id="20141" href="/Substitution/#19589" class="Function">compose-rename</a> <a id="20156" href="/Substitution/#19589" class="Function">compose-rename</a></pre>

<p>The next lemma states that if a renaming and subtitution commute on
variables, then they also commute on terms. We explain the proof in
detail below.</p>

<pre class="Agda"><a id="commute-subst-rename"></a><a id="20347" href="/Substitution/#20347" class="Function">commute-subst-rename</a> <a id="20368" class="Symbol">:</a> <a id="20370" class="Symbol">∀{</a><a id="20372" href="/Substitution/#20372" class="Bound">Γ</a> <a id="20374" href="/Substitution/#20374" class="Bound">Δ</a><a id="20375" class="Symbol">}{</a><a id="20377" href="/Substitution/#20377" class="Bound">M</a> <a id="20379" class="Symbol">:</a> <a id="20381" href="/Substitution/#20372" class="Bound">Γ</a> <a id="20383" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="20385" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="20386" class="Symbol">}{</a><a id="20388" href="/Substitution/#20388" class="Bound">σ</a> <a id="20390" class="Symbol">:</a> <a id="20392" href="/Soundness/#2673" class="Function">Subst</a> <a id="20398" href="/Substitution/#20372" class="Bound">Γ</a> <a id="20400" href="/Substitution/#20374" class="Bound">Δ</a><a id="20401" class="Symbol">}</a>
                        <a id="20427" class="Symbol">{</a><a id="20428" href="/Substitution/#20428" class="Bound">ρ</a> <a id="20430" class="Symbol">:</a> <a id="20432" class="Symbol">∀{</a><a id="20434" href="/Substitution/#20434" class="Bound">Γ</a><a id="20435" class="Symbol">}</a> <a id="20437" class="Symbol">→</a> <a id="20439" href="/Denotational/#23286" class="Function">Rename</a> <a id="20446" href="/Substitution/#20434" class="Bound">Γ</a> <a id="20448" class="Symbol">(</a><a id="20449" href="/Substitution/#20434" class="Bound">Γ</a> <a id="20451" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="20453" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="20454" class="Symbol">)}</a>
     <a id="20462" class="Symbol">→</a> <a id="20464" class="Symbol">(∀{</a><a id="20467" href="/Substitution/#20467" class="Bound">x</a> <a id="20469" class="Symbol">:</a> <a id="20471" href="/Substitution/#20372" class="Bound">Γ</a> <a id="20473" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="20475" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="20476" class="Symbol">}</a> <a id="20478" class="Symbol">→</a> <a id="20480" href="/Untyped/#6623" class="Function">exts</a> <a id="20485" href="/Substitution/#20388" class="Bound">σ</a> <a id="20487" class="Symbol">{</a><a id="20488" class="Argument">B</a> <a id="20490" class="Symbol">=</a> <a id="20492" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="20493" class="Symbol">}</a> <a id="20495" class="Symbol">(</a><a id="20496" href="/Substitution/#20428" class="Bound">ρ</a> <a id="20498" href="/Substitution/#20467" class="Bound">x</a><a id="20499" class="Symbol">)</a> <a id="20501" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="20503" href="/Untyped/#6171" class="Function">rename</a> <a id="20510" href="/Substitution/#20428" class="Bound">ρ</a> <a id="20512" class="Symbol">(</a><a id="20513" href="/Substitution/#20388" class="Bound">σ</a> <a id="20515" href="/Substitution/#20467" class="Bound">x</a><a id="20516" class="Symbol">))</a>
     <a id="20524" class="Symbol">→</a> <a id="20526" href="/Untyped/#6931" class="Function">subst</a> <a id="20532" class="Symbol">(</a><a id="20533" href="/Untyped/#6623" class="Function">exts</a> <a id="20538" href="/Substitution/#20388" class="Bound">σ</a> <a id="20540" class="Symbol">{</a><a id="20541" class="Argument">B</a> <a id="20543" class="Symbol">=</a> <a id="20545" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="20546" class="Symbol">})</a> <a id="20549" class="Symbol">(</a><a id="20550" href="/Untyped/#6171" class="Function">rename</a> <a id="20557" href="/Substitution/#20428" class="Bound">ρ</a> <a id="20559" href="/Substitution/#20377" class="Bound">M</a><a id="20560" class="Symbol">)</a> <a id="20562" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="20564" href="/Untyped/#6171" class="Function">rename</a> <a id="20571" href="/Substitution/#20428" class="Bound">ρ</a> <a id="20573" class="Symbol">(</a><a id="20574" href="/Untyped/#6931" class="Function">subst</a> <a id="20580" href="/Substitution/#20388" class="Bound">σ</a> <a id="20582" href="/Substitution/#20377" class="Bound">M</a><a id="20583" class="Symbol">)</a>
<a id="20585" href="/Substitution/#20347" class="Function">commute-subst-rename</a> <a id="20606" class="Symbol">{</a><a id="20607" class="Argument">M</a> <a id="20609" class="Symbol">=</a> <a id="20611" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="20613" href="/Substitution/#20613" class="Bound">x</a><a id="20614" class="Symbol">}</a> <a id="20616" href="/Substitution/#20616" class="Bound">r</a> <a id="20618" class="Symbol">=</a> <a id="20620" href="/Substitution/#20616" class="Bound">r</a>
<a id="20622" href="/Substitution/#20347" class="Function">commute-subst-rename</a><a id="20642" class="Symbol">{</a><a id="20643" href="/Substitution/#20643" class="Bound">Γ</a><a id="20644" class="Symbol">}{</a><a id="20646" href="/Substitution/#20646" class="Bound">Δ</a><a id="20647" class="Symbol">}{</a><a id="20649" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="20651" href="/Substitution/#20651" class="Bound">N</a><a id="20652" class="Symbol">}{</a><a id="20654" href="/Substitution/#20654" class="Bound">σ</a><a id="20655" class="Symbol">}{</a><a id="20657" href="/Substitution/#20657" class="Bound">ρ</a><a id="20658" class="Symbol">}</a> <a id="20660" href="/Substitution/#20660" class="Bound">r</a> <a id="20662" class="Symbol">=</a>
   <a id="20667" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="20672" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a> <a id="20675" class="Symbol">(</a><a id="20676" href="/Substitution/#20347" class="Function">commute-subst-rename</a><a id="20696" class="Symbol">{</a><a id="20697" href="/Substitution/#20643" class="Bound">Γ</a> <a id="20699" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="20701" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="20702" class="Symbol">}{</a><a id="20704" href="/Substitution/#20646" class="Bound">Δ</a> <a id="20706" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="20708" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="20709" class="Symbol">}{</a><a id="20711" href="/Substitution/#20651" class="Bound">N</a><a id="20712" class="Symbol">}</a>
               <a id="20729" class="Symbol">{</a><a id="20730" href="/Untyped/#6623" class="Function">exts</a> <a id="20735" href="/Substitution/#20654" class="Bound">σ</a><a id="20736" class="Symbol">}{</a><a id="20738" class="Argument">ρ</a> <a id="20740" class="Symbol">=</a> <a id="20742" href="/Substitution/#20775" class="Function">ρ&#39;</a><a id="20744" class="Symbol">}</a> <a id="20746" class="Symbol">(λ</a> <a id="20749" class="Symbol">{</a><a id="20750" href="/Substitution/#20750" class="Bound">x</a><a id="20751" class="Symbol">}</a> <a id="20753" class="Symbol">→</a> <a id="20755" href="/Substitution/#20848" class="Function">H</a> <a id="20757" class="Symbol">{</a><a id="20758" href="/Substitution/#20750" class="Bound">x</a><a id="20759" class="Symbol">}))</a>
   <a id="20766" class="Keyword">where</a>
   <a id="20775" href="/Substitution/#20775" class="Function">ρ&#39;</a> <a id="20778" class="Symbol">:</a> <a id="20780" class="Symbol">∀</a> <a id="20782" class="Symbol">{</a><a id="20783" href="/Substitution/#20783" class="Bound">Γ</a><a id="20784" class="Symbol">}</a> <a id="20786" class="Symbol">→</a> <a id="20788" href="/Denotational/#23286" class="Function">Rename</a> <a id="20795" href="/Substitution/#20783" class="Bound">Γ</a> <a id="20797" class="Symbol">(</a><a id="20798" href="/Substitution/#20783" class="Bound">Γ</a> <a id="20800" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="20802" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="20803" class="Symbol">)</a>
   <a id="20808" href="/Substitution/#20775" class="Function">ρ&#39;</a> <a id="20811" class="Symbol">{</a><a id="20812" href="/Untyped/#3002" class="InductiveConstructor">∅</a><a id="20813" class="Symbol">}</a> <a id="20815" class="Symbol">=</a> <a id="20817" class="Symbol">λ</a> <a id="20819" class="Symbol">()</a>
   <a id="20825" href="/Substitution/#20775" class="Function">ρ&#39;</a> <a id="20828" class="Symbol">{</a><a id="20829" href="/Substitution/#20829" class="Bound">Γ</a> <a id="20831" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="20833" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="20834" class="Symbol">}</a> <a id="20836" class="Symbol">=</a> <a id="20838" href="/Untyped/#5845" class="Function">ext</a> <a id="20842" href="/Substitution/#20657" class="Bound">ρ</a>

   <a id="20848" href="/Substitution/#20848" class="Function">H</a> <a id="20850" class="Symbol">:</a> <a id="20852" class="Symbol">{</a><a id="20853" href="/Substitution/#20853" class="Bound">x</a> <a id="20855" class="Symbol">:</a> <a id="20857" href="/Substitution/#20643" class="Bound">Γ</a> <a id="20859" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="20861" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="20863" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="20865" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="20866" class="Symbol">}</a> <a id="20868" class="Symbol">→</a> <a id="20870" href="/Untyped/#6623" class="Function">exts</a> <a id="20875" class="Symbol">(</a><a id="20876" href="/Untyped/#6623" class="Function">exts</a> <a id="20881" href="/Substitution/#20654" class="Bound">σ</a><a id="20882" class="Symbol">)</a> <a id="20884" class="Symbol">(</a><a id="20885" href="/Untyped/#5845" class="Function">ext</a> <a id="20889" href="/Substitution/#20657" class="Bound">ρ</a> <a id="20891" href="/Substitution/#20853" class="Bound">x</a><a id="20892" class="Symbol">)</a> <a id="20894" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="20896" href="/Untyped/#6171" class="Function">rename</a> <a id="20903" class="Symbol">(</a><a id="20904" href="/Untyped/#5845" class="Function">ext</a> <a id="20908" href="/Substitution/#20657" class="Bound">ρ</a><a id="20909" class="Symbol">)</a> <a id="20911" class="Symbol">(</a><a id="20912" href="/Untyped/#6623" class="Function">exts</a> <a id="20917" href="/Substitution/#20654" class="Bound">σ</a> <a id="20919" href="/Substitution/#20853" class="Bound">x</a><a id="20920" class="Symbol">)</a>
   <a id="20925" href="/Substitution/#20848" class="Function">H</a> <a id="20927" class="Symbol">{</a><a id="20928" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="20929" class="Symbol">}</a> <a id="20931" class="Symbol">=</a> <a id="20933" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
   <a id="20941" href="/Substitution/#20848" class="Function">H</a> <a id="20943" class="Symbol">{</a><a id="20944" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="20946" href="/Substitution/#20946" class="Bound">y</a><a id="20947" class="Symbol">}</a> <a id="20949" class="Symbol">=</a>
     <a id="20956" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
       <a id="20969" href="/Untyped/#6623" class="Function">exts</a> <a id="20974" class="Symbol">(</a><a id="20975" href="/Untyped/#6623" class="Function">exts</a> <a id="20980" href="/Substitution/#20654" class="Bound">σ</a><a id="20981" class="Symbol">)</a> <a id="20983" class="Symbol">(</a><a id="20984" href="/Untyped/#5845" class="Function">ext</a> <a id="20988" href="/Substitution/#20657" class="Bound">ρ</a> <a id="20990" class="Symbol">(</a><a id="20991" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="20993" href="/Substitution/#20946" class="Bound">y</a><a id="20994" class="Symbol">))</a>
     <a id="21002" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
       <a id="21013" href="/Untyped/#6171" class="Function">rename</a> <a id="21020" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a> <a id="21023" class="Symbol">(</a><a id="21024" href="/Untyped/#6623" class="Function">exts</a> <a id="21029" href="/Substitution/#20654" class="Bound">σ</a> <a id="21031" class="Symbol">(</a><a id="21032" href="/Substitution/#20657" class="Bound">ρ</a> <a id="21034" href="/Substitution/#20946" class="Bound">y</a><a id="21035" class="Symbol">))</a> 
     <a id="21044" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="21047" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="21052" class="Symbol">(</a><a id="21053" href="/Untyped/#6171" class="Function">rename</a> <a id="21060" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a><a id="21062" class="Symbol">)</a> <a id="21064" href="/Substitution/#20660" class="Bound">r</a> <a id="21066" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="21075" href="/Untyped/#6171" class="Function">rename</a> <a id="21082" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a> <a id="21085" class="Symbol">(</a><a id="21086" href="/Untyped/#6171" class="Function">rename</a> <a id="21093" href="/Substitution/#20657" class="Bound">ρ</a> <a id="21095" class="Symbol">(</a><a id="21096" href="/Substitution/#20654" class="Bound">σ</a> <a id="21098" href="/Substitution/#20946" class="Bound">y</a><a id="21099" class="Symbol">))</a>
     <a id="21107" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="21110" href="/Substitution/#19589" class="Function">compose-rename</a> <a id="21125" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="21134" href="/Untyped/#6171" class="Function">rename</a> <a id="21141" class="Symbol">(</a><a id="21142" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a> <a id="21145" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="21147" href="/Substitution/#20657" class="Bound">ρ</a><a id="21148" class="Symbol">)</a> <a id="21150" class="Symbol">(</a><a id="21151" href="/Substitution/#20654" class="Bound">σ</a> <a id="21153" href="/Substitution/#20946" class="Bound">y</a><a id="21154" class="Symbol">)</a>
     <a id="21161" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="21164" href="/Substitution/#11789" class="Function">rename-equal</a> <a id="21177" class="Symbol">(λ</a> <a id="21180" class="Symbol">{</a><a id="21181" href="/Substitution/#21181" class="Bound">A</a><a id="21182" class="Symbol">}</a> <a id="21184" class="Symbol">{</a><a id="21185" href="/Substitution/#21185" class="Bound">x₁</a><a id="21187" class="Symbol">}</a> <a id="21189" class="Symbol">→</a> <a id="21191" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="21195" class="Symbol">)</a> <a id="21197" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="21206" href="/Untyped/#6171" class="Function">rename</a> <a id="21213" class="Symbol">((</a><a id="21215" href="/Untyped/#5845" class="Function">ext</a> <a id="21219" href="/Substitution/#20657" class="Bound">ρ</a><a id="21220" class="Symbol">)</a> <a id="21222" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="21224" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a><a id="21226" class="Symbol">)</a> <a id="21228" class="Symbol">(</a><a id="21229" href="/Substitution/#20654" class="Bound">σ</a> <a id="21231" href="/Substitution/#20946" class="Bound">y</a><a id="21232" class="Symbol">)</a>
     <a id="21239" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="21242" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#838" class="Function">sym</a> <a id="21246" href="/Substitution/#19589" class="Function">compose-rename</a> <a id="21261" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="21270" href="/Untyped/#6171" class="Function">rename</a> <a id="21277" class="Symbol">(</a><a id="21278" href="/Untyped/#5845" class="Function">ext</a> <a id="21282" href="/Substitution/#20657" class="Bound">ρ</a><a id="21283" class="Symbol">)</a> <a id="21285" class="Symbol">(</a><a id="21286" href="/Untyped/#6171" class="Function">rename</a> <a id="21293" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a> <a id="21296" class="Symbol">(</a><a id="21297" href="/Substitution/#20654" class="Bound">σ</a> <a id="21299" href="/Substitution/#20946" class="Bound">y</a><a id="21300" class="Symbol">))</a>
     <a id="21308" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
       <a id="21319" href="/Untyped/#6171" class="Function">rename</a> <a id="21326" class="Symbol">(</a><a id="21327" href="/Untyped/#5845" class="Function">ext</a> <a id="21331" href="/Substitution/#20657" class="Bound">ρ</a><a id="21332" class="Symbol">)</a> <a id="21334" class="Symbol">(</a><a id="21335" href="/Untyped/#6623" class="Function">exts</a> <a id="21340" href="/Substitution/#20654" class="Bound">σ</a> <a id="21342" class="Symbol">(</a><a id="21343" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="21345" href="/Substitution/#20946" class="Bound">y</a><a id="21346" class="Symbol">))</a>
     <a id="21354" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a>
<a id="21356" href="/Substitution/#20347" class="Function">commute-subst-rename</a> <a id="21377" class="Symbol">{</a><a id="21378" class="Argument">M</a> <a id="21380" class="Symbol">=</a> <a id="21382" href="/Substitution/#21382" class="Bound">L</a> <a id="21384" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="21386" href="/Substitution/#21386" class="Bound">M</a><a id="21387" class="Symbol">}{</a><a id="21389" class="Argument">ρ</a> <a id="21391" class="Symbol">=</a> <a id="21393" href="/Substitution/#21393" class="Bound">ρ</a><a id="21394" class="Symbol">}</a> <a id="21396" href="/Substitution/#21396" class="Bound">r</a> <a id="21398" class="Symbol">=</a>
   <a id="21403" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1408" class="Function">cong₂</a> <a id="21409" href="/Untyped/#4298" class="InductiveConstructor Operator">_·_</a> <a id="21413" class="Symbol">(</a><a id="21414" href="/Substitution/#20347" class="Function">commute-subst-rename</a><a id="21434" class="Symbol">{</a><a id="21435" class="Argument">M</a> <a id="21437" class="Symbol">=</a> <a id="21439" href="/Substitution/#21382" class="Bound">L</a><a id="21440" class="Symbol">}{</a><a id="21442" class="Argument">ρ</a> <a id="21444" class="Symbol">=</a> <a id="21446" href="/Substitution/#21393" class="Bound">ρ</a><a id="21447" class="Symbol">}</a> <a id="21449" href="/Substitution/#21396" class="Bound">r</a><a id="21450" class="Symbol">)</a>
             <a id="21465" class="Symbol">(</a><a id="21466" href="/Substitution/#20347" class="Function">commute-subst-rename</a><a id="21486" class="Symbol">{</a><a id="21487" class="Argument">M</a> <a id="21489" class="Symbol">=</a> <a id="21491" href="/Substitution/#21386" class="Bound">M</a><a id="21492" class="Symbol">}{</a><a id="21494" class="Argument">ρ</a> <a id="21496" class="Symbol">=</a> <a id="21498" href="/Substitution/#21393" class="Bound">ρ</a><a id="21499" class="Symbol">}</a> <a id="21501" href="/Substitution/#21396" class="Bound">r</a><a id="21502" class="Symbol">)</a></pre>

<p>The proof is by induction on the term <code class="highlighter-rouge">M</code>.</p>

<ul>
  <li>
    <p>If <code class="highlighter-rouge">M</code> is a variable, then we use the premise to conclude.</p>
  </li>
  <li>
    <p>If <code class="highlighter-rouge">M ≡ ƛ N</code>, we conclude using the induction hypothesis for
<code class="highlighter-rouge">N</code>. However, to use the induction hypothesis, we must show
that</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  exts (exts σ) (ext ρ x) ≡ rename (ext ρ) (exts σ x)
</code></pre></div>    </div>

    <p>We prove this equation by cases on x.</p>

    <ul>
      <li>
        <p>If <code class="highlighter-rouge">x = Z</code>, the two sides are equal by definition.</p>
      </li>
      <li>
        <p>If <code class="highlighter-rouge">x = S y</code>, we obtain the goal by the following equational reasoning.</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exts (exts σ) (ext ρ (S y))   ≡ rename S_ (exts σ (ρ y))    ≡ rename S_ (rename S_ (σ (ρ y)      (by the premise)   ≡ rename (ext ρ) (exts σ (S y))      (by compose-rename)   ≡ rename ((ext ρ) ∘ S_) (σ y)   ≡ rename (ext ρ) (rename S_ (σ y))   (by compose-rename)   ≡ rename (ext ρ) (exts σ (S y))
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>If <code class="highlighter-rouge">M</code> is an application, we obtain the goal using the induction
hypothesis for each subterm.</p>
  </li>
</ul>

<p>The last lemma needed to prove <code class="highlighter-rouge">sub-sub</code> states that the <code class="highlighter-rouge">exts</code>
function distributes with sequencing. It is a corollary of
<code class="highlighter-rouge">commute-subst-rename</code>. We describe the proof below.</p>

<pre class="Agda"><a id="subst-exts"></a><a id="22629" href="/Substitution/#22629" class="Function">subst-exts</a> <a id="22640" class="Symbol">:</a> <a id="22642" class="Symbol">∀{</a><a id="22644" href="/Substitution/#22644" class="Bound">Γ</a> <a id="22646" href="/Substitution/#22646" class="Bound">Δ</a> <a id="22648" href="/Substitution/#22648" class="Bound">Δ&#39;</a><a id="22650" class="Symbol">}{</a><a id="22652" href="/Substitution/#22652" class="Bound">A</a><a id="22653" class="Symbol">}{</a><a id="22655" href="/Substitution/#22655" class="Bound">x</a> <a id="22657" class="Symbol">:</a> <a id="22659" href="/Substitution/#22644" class="Bound">Γ</a> <a id="22661" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="22663" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="22665" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="22667" href="/Substitution/#22652" class="Bound">A</a><a id="22668" class="Symbol">}</a> <a id="22670" class="Symbol">{</a><a id="22671" href="/Substitution/#22671" class="Bound">σ₁</a> <a id="22674" class="Symbol">:</a> <a id="22676" href="/Soundness/#2673" class="Function">Subst</a> <a id="22682" href="/Substitution/#22644" class="Bound">Γ</a> <a id="22684" href="/Substitution/#22646" class="Bound">Δ</a><a id="22685" class="Symbol">}{</a><a id="22687" href="/Substitution/#22687" class="Bound">σ₂</a> <a id="22690" class="Symbol">:</a> <a id="22692" href="/Soundness/#2673" class="Function">Subst</a> <a id="22698" href="/Substitution/#22646" class="Bound">Δ</a> <a id="22700" href="/Substitution/#22648" class="Bound">Δ&#39;</a><a id="22702" class="Symbol">}</a>
   <a id="22707" class="Symbol">→</a> <a id="22709" class="Symbol">(</a><a id="22710" href="/Untyped/#6623" class="Function">exts</a> <a id="22715" href="/Substitution/#22671" class="Bound">σ₁</a> <a id="22718" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="22720" href="/Untyped/#6623" class="Function">exts</a> <a id="22725" href="/Substitution/#22687" class="Bound">σ₂</a><a id="22727" class="Symbol">)</a> <a id="22729" href="/Substitution/#22655" class="Bound">x</a> <a id="22731" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="22733" href="/Untyped/#6623" class="Function">exts</a> <a id="22738" class="Symbol">(</a><a id="22739" href="/Substitution/#22671" class="Bound">σ₁</a> <a id="22742" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="22744" href="/Substitution/#22687" class="Bound">σ₂</a><a id="22746" class="Symbol">)</a> <a id="22748" href="/Substitution/#22655" class="Bound">x</a>
<a id="22750" href="/Substitution/#22629" class="Function">subst-exts</a> <a id="22761" class="Symbol">{</a><a id="22762" class="Argument">x</a> <a id="22764" class="Symbol">=</a> <a id="22766" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="22767" class="Symbol">}</a> <a id="22769" class="Symbol">=</a> <a id="22771" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="22776" href="/Substitution/#22629" class="Function">subst-exts</a> <a id="22787" class="Symbol">{</a><a id="22788" class="Argument">A</a> <a id="22790" class="Symbol">=</a> <a id="22792" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="22793" class="Symbol">}{</a><a id="22795" class="Argument">x</a> <a id="22797" class="Symbol">=</a> <a id="22799" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="22801" href="/Substitution/#22801" class="Bound">x</a><a id="22802" class="Symbol">}{</a><a id="22804" href="/Substitution/#22804" class="Bound">σ₁</a><a id="22806" class="Symbol">}{</a><a id="22808" href="/Substitution/#22808" class="Bound">σ₂</a><a id="22810" class="Symbol">}</a> <a id="22812" class="Symbol">=</a>
   <a id="22817" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
     <a id="22828" class="Symbol">(</a><a id="22829" href="/Untyped/#6623" class="Function">exts</a> <a id="22834" href="/Substitution/#22804" class="Bound">σ₁</a> <a id="22837" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="22839" href="/Untyped/#6623" class="Function">exts</a> <a id="22844" href="/Substitution/#22808" class="Bound">σ₂</a><a id="22846" class="Symbol">)</a> <a id="22848" class="Symbol">(</a><a id="22849" href="/Untyped/#3446" class="InductiveConstructor Operator">S</a> <a id="22851" href="/Substitution/#22801" class="Bound">x</a><a id="22852" class="Symbol">)</a>
   <a id="22857" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
     <a id="22866" href="/Untyped/#6931" class="Function">subst</a> <a id="22872" class="Symbol">(</a><a id="22873" href="/Untyped/#6623" class="Function">exts</a> <a id="22878" href="/Substitution/#22808" class="Bound">σ₂</a><a id="22880" class="Symbol">)</a> <a id="22882" class="Symbol">(</a><a id="22883" href="/Untyped/#6171" class="Function">rename</a> <a id="22890" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a> <a id="22893" class="Symbol">(</a><a id="22894" href="/Substitution/#22804" class="Bound">σ₁</a> <a id="22897" href="/Substitution/#22801" class="Bound">x</a><a id="22898" class="Symbol">))</a>
   <a id="22904" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="22907" href="/Substitution/#20347" class="Function">commute-subst-rename</a><a id="22927" class="Symbol">{</a><a id="22928" class="Argument">M</a> <a id="22930" class="Symbol">=</a> <a id="22932" href="/Substitution/#22804" class="Bound">σ₁</a> <a id="22935" href="/Substitution/#22801" class="Bound">x</a><a id="22936" class="Symbol">}{</a><a id="22938" class="Argument">σ</a> <a id="22940" class="Symbol">=</a> <a id="22942" href="/Substitution/#22808" class="Bound">σ₂</a><a id="22944" class="Symbol">}{</a><a id="22946" class="Argument">ρ</a> <a id="22948" class="Symbol">=</a> <a id="22950" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a><a id="22952" class="Symbol">}</a> <a id="22954" class="Symbol">(λ</a> <a id="22957" class="Symbol">{</a><a id="22958" href="/Substitution/#22958" class="Bound">x₁</a><a id="22960" class="Symbol">}</a> <a id="22962" class="Symbol">→</a> <a id="22964" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="22968" class="Symbol">)</a> <a id="22970" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
     <a id="22977" href="/Untyped/#6171" class="Function">rename</a> <a id="22984" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a> <a id="22987" class="Symbol">(</a><a id="22988" href="/Untyped/#6931" class="Function">subst</a> <a id="22994" href="/Substitution/#22808" class="Bound">σ₂</a> <a id="22997" class="Symbol">(</a><a id="22998" href="/Substitution/#22804" class="Bound">σ₁</a> <a id="23001" href="/Substitution/#22801" class="Bound">x</a><a id="23002" class="Symbol">))</a>
   <a id="23008" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
     <a id="23017" href="/Untyped/#6171" class="Function">rename</a> <a id="23024" href="/Untyped/#3446" class="InductiveConstructor Operator">S_</a> <a id="23027" class="Symbol">((</a><a id="23029" href="/Substitution/#22804" class="Bound">σ₁</a> <a id="23032" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="23034" href="/Substitution/#22808" class="Bound">σ₂</a><a id="23036" class="Symbol">)</a> <a id="23038" href="/Substitution/#22801" class="Bound">x</a><a id="23039" class="Symbol">)</a>
   <a id="23044" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a></pre>

<p>The proof proceed by cases on <code class="highlighter-rouge">x</code>.</p>

<ul>
  <li>
    <p>If <code class="highlighter-rouge">x = Z</code>, the two sides are equal by the definition of <code class="highlighter-rouge">exts</code>
and sequencing.</p>
  </li>
  <li>
    <p>If <code class="highlighter-rouge">x = S x</code>, we unfold the first use of <code class="highlighter-rouge">exts</code> and sequencing, then
apply the lemma <code class="highlighter-rouge">commute-subst-rename</code>. We conclude by the
definition of sequencing.</p>
  </li>
</ul>

<p>Now we come to the proof of <code class="highlighter-rouge">sub-sub</code>, which we explain below.</p>

<pre class="Agda"><a id="sub-sub"></a><a id="23418" href="/Substitution/#23418" class="Function">sub-sub</a> <a id="23426" class="Symbol">:</a> <a id="23428" class="Symbol">∀{</a><a id="23430" href="/Substitution/#23430" class="Bound">Γ</a> <a id="23432" href="/Substitution/#23432" class="Bound">Δ</a> <a id="23434" href="/Substitution/#23434" class="Bound">Σ</a><a id="23435" class="Symbol">}{</a><a id="23437" href="/Substitution/#23437" class="Bound">A</a><a id="23438" class="Symbol">}{</a><a id="23440" href="/Substitution/#23440" class="Bound">M</a> <a id="23442" class="Symbol">:</a> <a id="23444" href="/Substitution/#23430" class="Bound">Γ</a> <a id="23446" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="23448" href="/Substitution/#23437" class="Bound">A</a><a id="23449" class="Symbol">}</a> <a id="23451" class="Symbol">{</a><a id="23452" href="/Substitution/#23452" class="Bound">σ₁</a> <a id="23455" class="Symbol">:</a> <a id="23457" href="/Soundness/#2673" class="Function">Subst</a> <a id="23463" href="/Substitution/#23430" class="Bound">Γ</a> <a id="23465" href="/Substitution/#23432" class="Bound">Δ</a><a id="23466" class="Symbol">}{</a><a id="23468" href="/Substitution/#23468" class="Bound">σ₂</a> <a id="23471" class="Symbol">:</a> <a id="23473" href="/Soundness/#2673" class="Function">Subst</a> <a id="23479" href="/Substitution/#23432" class="Bound">Δ</a> <a id="23481" href="/Substitution/#23434" class="Bound">Σ</a><a id="23482" class="Symbol">}</a> 
            <a id="23497" class="Symbol">→</a> <a id="23499" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="23501" href="/Substitution/#23468" class="Bound">σ₂</a> <a id="23504" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="23506" class="Symbol">(</a><a id="23507" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="23509" href="/Substitution/#23452" class="Bound">σ₁</a> <a id="23512" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="23514" href="/Substitution/#23440" class="Bound">M</a><a id="23515" class="Symbol">)</a> <a id="23517" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="23519" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="23521" href="/Substitution/#23452" class="Bound">σ₁</a> <a id="23524" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="23526" href="/Substitution/#23468" class="Bound">σ₂</a> <a id="23529" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="23531" href="/Substitution/#23440" class="Bound">M</a>
<a id="23533" href="/Substitution/#23418" class="Function">sub-sub</a> <a id="23541" class="Symbol">{</a><a id="23542" class="Argument">M</a> <a id="23544" class="Symbol">=</a> <a id="23546" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="23548" href="/Substitution/#23548" class="Bound">x</a><a id="23549" class="Symbol">}</a> <a id="23551" class="Symbol">=</a> <a id="23553" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a>
<a id="23558" href="/Substitution/#23418" class="Function">sub-sub</a> <a id="23566" class="Symbol">{</a><a id="23567" href="/Substitution/#23567" class="Bound">Γ</a><a id="23568" class="Symbol">}{</a><a id="23570" href="/Substitution/#23570" class="Bound">Δ</a><a id="23571" class="Symbol">}{</a><a id="23573" href="/Substitution/#23573" class="Bound">Σ</a><a id="23574" class="Symbol">}{</a><a id="23576" href="/Substitution/#23576" class="Bound">A</a><a id="23577" class="Symbol">}{</a><a id="23579" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="23581" href="/Substitution/#23581" class="Bound">N</a><a id="23582" class="Symbol">}{</a><a id="23584" href="/Substitution/#23584" class="Bound">σ₁</a><a id="23586" class="Symbol">}{</a><a id="23588" href="/Substitution/#23588" class="Bound">σ₂</a><a id="23590" class="Symbol">}</a> <a id="23592" class="Symbol">=</a>
   <a id="23597" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
     <a id="23608" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="23610" href="/Substitution/#23588" class="Bound">σ₂</a> <a id="23613" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="23615" class="Symbol">(</a><a id="23616" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="23618" href="/Substitution/#23584" class="Bound">σ₁</a> <a id="23621" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="23623" class="Symbol">(</a><a id="23624" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="23626" href="/Substitution/#23581" class="Bound">N</a><a id="23627" class="Symbol">))</a>
   <a id="23633" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
     <a id="23642" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="23644" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="23646" href="/Untyped/#6623" class="Function">exts</a> <a id="23651" href="/Substitution/#23588" class="Bound">σ₂</a> <a id="23654" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="23656" class="Symbol">(</a><a id="23657" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="23659" href="/Untyped/#6623" class="Function">exts</a> <a id="23664" href="/Substitution/#23584" class="Bound">σ₁</a> <a id="23667" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="23669" href="/Substitution/#23581" class="Bound">N</a><a id="23670" class="Symbol">)</a>
   <a id="23675" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="23678" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="23683" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a> <a id="23686" class="Symbol">(</a><a id="23687" href="/Substitution/#23418" class="Function">sub-sub</a><a id="23694" class="Symbol">{</a><a id="23695" class="Argument">M</a> <a id="23697" class="Symbol">=</a> <a id="23699" href="/Substitution/#23581" class="Bound">N</a><a id="23700" class="Symbol">}{</a><a id="23702" class="Argument">σ₁</a> <a id="23705" class="Symbol">=</a> <a id="23707" href="/Untyped/#6623" class="Function">exts</a> <a id="23712" href="/Substitution/#23584" class="Bound">σ₁</a><a id="23714" class="Symbol">}{</a><a id="23716" class="Argument">σ₂</a> <a id="23719" class="Symbol">=</a> <a id="23721" href="/Untyped/#6623" class="Function">exts</a> <a id="23726" href="/Substitution/#23588" class="Bound">σ₂</a><a id="23728" class="Symbol">})</a> <a id="23731" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
     <a id="23738" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="23740" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="23742" href="/Untyped/#6623" class="Function">exts</a> <a id="23747" href="/Substitution/#23584" class="Bound">σ₁</a> <a id="23750" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="23752" href="/Untyped/#6623" class="Function">exts</a> <a id="23757" href="/Substitution/#23588" class="Bound">σ₂</a> <a id="23760" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="23762" href="/Substitution/#23581" class="Bound">N</a>
   <a id="23767" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="23770" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="23775" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ_</a> <a id="23778" class="Symbol">(</a><a id="23779" href="/Substitution/#11058" class="Function">subst-equal</a><a id="23790" class="Symbol">{</a><a id="23791" class="Argument">M</a> <a id="23793" class="Symbol">=</a> <a id="23795" href="/Substitution/#23581" class="Bound">N</a><a id="23796" class="Symbol">}</a> <a id="23798" class="Symbol">(λ</a> <a id="23801" class="Symbol">{</a><a id="23802" href="/Substitution/#23802" class="Bound">A</a><a id="23803" class="Symbol">}{</a><a id="23805" href="/Substitution/#23805" class="Bound">x</a><a id="23806" class="Symbol">}</a> <a id="23808" class="Symbol">→</a> <a id="23810" href="/Substitution/#22629" class="Function">subst-exts</a><a id="23820" class="Symbol">{</a><a id="23821" class="Argument">x</a> <a id="23823" class="Symbol">=</a> <a id="23825" href="/Substitution/#23805" class="Bound">x</a><a id="23826" class="Symbol">}))</a> <a id="23830" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
     <a id="23837" href="/Untyped/#4238" class="InductiveConstructor Operator">ƛ</a> <a id="23839" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="23841" href="/Untyped/#6623" class="Function">exts</a> <a id="23846" class="Symbol">(</a> <a id="23848" href="/Substitution/#23584" class="Bound">σ₁</a> <a id="23851" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="23853" href="/Substitution/#23588" class="Bound">σ₂</a><a id="23855" class="Symbol">)</a> <a id="23857" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="23859" href="/Substitution/#23581" class="Bound">N</a>
   <a id="23864" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a>
<a id="23866" href="/Substitution/#23418" class="Function">sub-sub</a> <a id="23874" class="Symbol">{</a><a id="23875" class="Argument">M</a> <a id="23877" class="Symbol">=</a> <a id="23879" href="/Substitution/#23879" class="Bound">L</a> <a id="23881" href="/Untyped/#4298" class="InductiveConstructor Operator">·</a> <a id="23883" href="/Substitution/#23883" class="Bound">M</a><a id="23884" class="Symbol">}</a> <a id="23886" class="Symbol">=</a> <a id="23888" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1408" class="Function">cong₂</a> <a id="23894" href="/Untyped/#4298" class="InductiveConstructor Operator">_·_</a> <a id="23898" class="Symbol">(</a><a id="23899" href="/Substitution/#23418" class="Function">sub-sub</a><a id="23906" class="Symbol">{</a><a id="23907" class="Argument">M</a> <a id="23909" class="Symbol">=</a> <a id="23911" href="/Substitution/#23879" class="Bound">L</a><a id="23912" class="Symbol">})</a> <a id="23915" class="Symbol">(</a><a id="23916" href="/Substitution/#23418" class="Function">sub-sub</a><a id="23923" class="Symbol">{</a><a id="23924" class="Argument">M</a> <a id="23926" class="Symbol">=</a> <a id="23928" href="/Substitution/#23883" class="Bound">M</a><a id="23929" class="Symbol">})</a></pre>

<p>We proceed by induction on the term <code class="highlighter-rouge">M</code>.</p>

<ul>
  <li>
    <p>If <code class="highlighter-rouge">M = x</code>, then both sides are equal to <code class="highlighter-rouge">σ₂ (σ₁ x)</code>.</p>
  </li>
  <li>
    <p>If <code class="highlighter-rouge">M = ƛ N</code>, we first use the induction hypothesis to show that</p>

    <p>ƛ ⧼ exts σ₂ ⧽ (⧼ exts σ₁ ⧽ N) ≡ ƛ ⧼ exts σ₁ ⨟ exts σ₂ ⧽ N</p>

    <p>and then use the lemma <code class="highlighter-rouge">subst-exts</code> to show</p>

    <p>ƛ ⧼ exts σ₁ ⨟ exts σ₂ ⧽ N ≡ ƛ ⧼ exts ( σ₁ ⨟ σ₂) ⧽ N</p>
  </li>
  <li>
    <p>If <code class="highlighter-rouge">M</code> is an application, we use the induction hypothesis
for both subterms.</p>
  </li>
</ul>

<p>The following corollary of <code class="highlighter-rouge">sub-sub</code> specializes the first
substitution to a renaming.</p>

<pre class="Agda"><a id="rename-subst"></a><a id="24464" href="/Substitution/#24464" class="Function">rename-subst</a> <a id="24477" class="Symbol">:</a> <a id="24479" class="Symbol">∀{</a><a id="24481" href="/Substitution/#24481" class="Bound">Γ</a> <a id="24483" href="/Substitution/#24483" class="Bound">Δ</a> <a id="24485" href="/Substitution/#24485" class="Bound">Δ&#39;</a><a id="24487" class="Symbol">}{</a><a id="24489" href="/Substitution/#24489" class="Bound">M</a> <a id="24491" class="Symbol">:</a> <a id="24493" href="/Substitution/#24481" class="Bound">Γ</a> <a id="24495" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="24497" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="24498" class="Symbol">}{</a><a id="24500" href="/Substitution/#24500" class="Bound">ρ</a> <a id="24502" class="Symbol">:</a> <a id="24504" href="/Denotational/#23286" class="Function">Rename</a> <a id="24511" href="/Substitution/#24481" class="Bound">Γ</a> <a id="24513" href="/Substitution/#24483" class="Bound">Δ</a><a id="24514" class="Symbol">}{</a><a id="24516" href="/Substitution/#24516" class="Bound">σ</a> <a id="24518" class="Symbol">:</a> <a id="24520" href="/Soundness/#2673" class="Function">Subst</a> <a id="24526" href="/Substitution/#24483" class="Bound">Δ</a> <a id="24528" href="/Substitution/#24485" class="Bound">Δ&#39;</a><a id="24530" class="Symbol">}</a>
             <a id="24545" class="Symbol">→</a> <a id="24547" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="24549" href="/Substitution/#24516" class="Bound">σ</a> <a id="24551" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="24553" class="Symbol">(</a><a id="24554" href="/Untyped/#6171" class="Function">rename</a> <a id="24561" href="/Substitution/#24500" class="Bound">ρ</a> <a id="24563" href="/Substitution/#24489" class="Bound">M</a><a id="24564" class="Symbol">)</a> <a id="24566" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="24568" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="24570" href="/Substitution/#24516" class="Bound">σ</a> <a id="24572" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="24574" href="/Substitution/#24500" class="Bound">ρ</a> <a id="24576" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="24578" href="/Substitution/#24489" class="Bound">M</a>
<a id="24580" href="/Substitution/#24464" class="Function">rename-subst</a> <a id="24593" class="Symbol">{</a><a id="24594" href="/Substitution/#24594" class="Bound">Γ</a><a id="24595" class="Symbol">}{</a><a id="24597" href="/Substitution/#24597" class="Bound">Δ</a><a id="24598" class="Symbol">}{</a><a id="24600" href="/Substitution/#24600" class="Bound">Δ&#39;</a><a id="24602" class="Symbol">}{</a><a id="24604" href="/Substitution/#24604" class="Bound">M</a><a id="24605" class="Symbol">}{</a><a id="24607" href="/Substitution/#24607" class="Bound">ρ</a><a id="24608" class="Symbol">}{</a><a id="24610" href="/Substitution/#24610" class="Bound">σ</a><a id="24611" class="Symbol">}</a> <a id="24613" class="Symbol">=</a>
   <a id="24618" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
     <a id="24629" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="24631" href="/Substitution/#24610" class="Bound">σ</a> <a id="24633" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="24635" class="Symbol">(</a><a id="24636" href="/Untyped/#6171" class="Function">rename</a> <a id="24643" href="/Substitution/#24607" class="Bound">ρ</a> <a id="24645" href="/Substitution/#24604" class="Bound">M</a><a id="24646" class="Symbol">)</a>
   <a id="24651" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="24654" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="24659" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="24661" href="/Substitution/#24610" class="Bound">σ</a> <a id="24663" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="24665" class="Symbol">(</a><a id="24666" href="/Substitution/#14495" class="Function">rename-subst-ren</a><a id="24682" class="Symbol">{</a><a id="24683" class="Argument">M</a> <a id="24685" class="Symbol">=</a> <a id="24687" href="/Substitution/#24604" class="Bound">M</a><a id="24688" class="Symbol">})</a> <a id="24691" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
     <a id="24698" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="24700" href="/Substitution/#24610" class="Bound">σ</a> <a id="24702" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="24704" class="Symbol">(</a><a id="24705" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="24707" href="/Substitution/#6144" class="Function">ren</a> <a id="24711" href="/Substitution/#24607" class="Bound">ρ</a> <a id="24713" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="24715" href="/Substitution/#24604" class="Bound">M</a><a id="24716" class="Symbol">)</a>
   <a id="24721" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="24724" href="/Substitution/#23418" class="Function">sub-sub</a><a id="24731" class="Symbol">{</a><a id="24732" class="Argument">M</a> <a id="24734" class="Symbol">=</a> <a id="24736" href="/Substitution/#24604" class="Bound">M</a><a id="24737" class="Symbol">}</a> <a id="24739" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
     <a id="24746" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="24748" href="/Substitution/#6144" class="Function">ren</a> <a id="24752" href="/Substitution/#24607" class="Bound">ρ</a> <a id="24754" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="24756" href="/Substitution/#24610" class="Bound">σ</a> <a id="24758" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="24760" href="/Substitution/#24604" class="Bound">M</a>
   <a id="24765" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
     <a id="24774" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="24776" href="/Substitution/#24610" class="Bound">σ</a> <a id="24778" href="https://agda.github.io/agda-stdlib/Function.html#769" class="Function Operator">∘</a> <a id="24780" href="/Substitution/#24607" class="Bound">ρ</a> <a id="24782" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="24784" href="/Substitution/#24604" class="Bound">M</a>
   <a id="24789" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a></pre>

<h2 id="proof-of-seq-assoc">Proof of seq-assoc</h2>

<p>The proof of <code class="highlighter-rouge">seq-assoc</code> follows directly from <code class="highlighter-rouge">sub-sub</code> and the
definition of sequencing.</p>

<pre class="Agda"><a id="seq-assoc"></a><a id="24932" href="/Substitution/#24932" class="Function">seq-assoc</a> <a id="24942" class="Symbol">:</a> <a id="24944" class="Symbol">∀{</a><a id="24946" href="/Substitution/#24946" class="Bound">Γ</a> <a id="24948" href="/Substitution/#24948" class="Bound">Δ</a> <a id="24950" href="/Substitution/#24950" class="Bound">Σ</a> <a id="24952" href="/Substitution/#24952" class="Bound">Ψ</a> <a id="24954" class="Symbol">:</a> <a id="24956" href="/Untyped/#2980" class="Datatype">Context</a><a id="24963" class="Symbol">}{</a><a id="24965" href="/Substitution/#24965" class="Bound">B</a><a id="24966" class="Symbol">}</a> <a id="24968" class="Symbol">{</a><a id="24969" href="/Substitution/#24969" class="Bound">σ</a> <a id="24971" class="Symbol">:</a> <a id="24973" href="/Soundness/#2673" class="Function">Subst</a> <a id="24979" href="/Substitution/#24946" class="Bound">Γ</a> <a id="24981" href="/Substitution/#24948" class="Bound">Δ</a><a id="24982" class="Symbol">}</a> <a id="24984" class="Symbol">{</a><a id="24985" href="/Substitution/#24985" class="Bound">τ</a> <a id="24987" class="Symbol">:</a> <a id="24989" href="/Soundness/#2673" class="Function">Subst</a> <a id="24995" href="/Substitution/#24948" class="Bound">Δ</a> <a id="24997" href="/Substitution/#24950" class="Bound">Σ</a><a id="24998" class="Symbol">}</a>
             <a id="25013" class="Symbol">{</a><a id="25014" href="/Substitution/#25014" class="Bound">θ</a> <a id="25016" class="Symbol">:</a> <a id="25018" href="/Soundness/#2673" class="Function">Subst</a> <a id="25024" href="/Substitution/#24950" class="Bound">Σ</a> <a id="25026" href="/Substitution/#24952" class="Bound">Ψ</a><a id="25027" class="Symbol">}</a> <a id="25029" class="Symbol">{</a><a id="25030" href="/Substitution/#25030" class="Bound">x</a> <a id="25032" class="Symbol">:</a> <a id="25034" href="/Substitution/#24946" class="Bound">Γ</a> <a id="25036" href="/Untyped/#3365" class="Datatype Operator">∋</a> <a id="25038" href="/Substitution/#24965" class="Bound">B</a><a id="25039" class="Symbol">}</a>
          <a id="25051" class="Symbol">→</a> <a id="25053" class="Symbol">((</a><a id="25055" href="/Substitution/#24969" class="Bound">σ</a> <a id="25057" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="25059" href="/Substitution/#24985" class="Bound">τ</a><a id="25060" class="Symbol">)</a> <a id="25062" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="25064" href="/Substitution/#25014" class="Bound">θ</a><a id="25065" class="Symbol">)</a> <a id="25067" href="/Substitution/#25030" class="Bound">x</a> <a id="25069" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="25071" class="Symbol">(</a><a id="25072" href="/Substitution/#24969" class="Bound">σ</a> <a id="25074" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="25076" href="/Substitution/#24985" class="Bound">τ</a> <a id="25078" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="25080" href="/Substitution/#25014" class="Bound">θ</a><a id="25081" class="Symbol">)</a> <a id="25083" href="/Substitution/#25030" class="Bound">x</a>
<a id="25085" href="/Substitution/#24932" class="Function">seq-assoc</a><a id="25094" class="Symbol">{</a><a id="25095" href="/Substitution/#25095" class="Bound">Γ</a><a id="25096" class="Symbol">}{</a><a id="25098" href="/Substitution/#25098" class="Bound">Δ</a><a id="25099" class="Symbol">}{</a><a id="25101" href="/Substitution/#25101" class="Bound">Σ</a><a id="25102" class="Symbol">}{</a><a id="25104" href="/Substitution/#25104" class="Bound">Ψ</a><a id="25105" class="Symbol">}{</a><a id="25107" href="/Substitution/#25107" class="Bound">B</a><a id="25108" class="Symbol">}{</a><a id="25110" href="/Substitution/#25110" class="Bound">σ</a><a id="25111" class="Symbol">}{</a><a id="25113" href="/Substitution/#25113" class="Bound">τ</a><a id="25114" class="Symbol">}{</a><a id="25116" href="/Substitution/#25116" class="Bound">θ</a><a id="25117" class="Symbol">}{</a><a id="25119" href="/Substitution/#25119" class="Bound">x</a><a id="25120" class="Symbol">}</a> <a id="25122" class="Symbol">=</a>
    <a id="25128" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
      <a id="25140" class="Symbol">((</a><a id="25142" href="/Substitution/#25110" class="Bound">σ</a> <a id="25144" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="25146" href="/Substitution/#25113" class="Bound">τ</a><a id="25147" class="Symbol">)</a> <a id="25149" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="25151" href="/Substitution/#25116" class="Bound">θ</a><a id="25152" class="Symbol">)</a> <a id="25154" href="/Substitution/#25119" class="Bound">x</a>
    <a id="25160" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
      <a id="25170" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="25172" href="/Substitution/#25116" class="Bound">θ</a> <a id="25174" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="25176" class="Symbol">(</a><a id="25177" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="25179" href="/Substitution/#25113" class="Bound">τ</a> <a id="25181" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="25183" class="Symbol">(</a><a id="25184" href="/Substitution/#25110" class="Bound">σ</a> <a id="25186" href="/Substitution/#25119" class="Bound">x</a><a id="25187" class="Symbol">))</a>
    <a id="25194" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="25197" href="/Substitution/#23418" class="Function">sub-sub</a><a id="25204" class="Symbol">{</a><a id="25205" class="Argument">M</a> <a id="25207" class="Symbol">=</a> <a id="25209" href="/Substitution/#25110" class="Bound">σ</a> <a id="25211" href="/Substitution/#25119" class="Bound">x</a><a id="25212" class="Symbol">}</a> <a id="25214" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
      <a id="25222" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="25224" href="/Substitution/#25113" class="Bound">τ</a> <a id="25226" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="25228" href="/Substitution/#25116" class="Bound">θ</a> <a id="25230" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="25232" class="Symbol">(</a><a id="25233" href="/Substitution/#25110" class="Bound">σ</a> <a id="25235" href="/Substitution/#25119" class="Bound">x</a><a id="25236" class="Symbol">)</a>
    <a id="25242" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
      <a id="25252" class="Symbol">(</a><a id="25253" href="/Substitution/#25110" class="Bound">σ</a> <a id="25255" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="25257" href="/Substitution/#25113" class="Bound">τ</a> <a id="25259" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="25261" href="/Substitution/#25116" class="Bound">θ</a><a id="25262" class="Symbol">)</a> <a id="25264" href="/Substitution/#25119" class="Bound">x</a>
    <a id="25270" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a></pre>

<h2 id="proof-of-the-substitution-lemma">Proof of the substitution lemma</h2>

<p>We first prove the generalized form of the substitution lemma, showing
that a substitution <code class="highlighter-rouge">σ</code> commutes with the subusitution of <code class="highlighter-rouge">M</code> into
<code class="highlighter-rouge">N</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>⧼ exts σ ⧽ N [ ⧼ σ ⧽ M ] ≡ ⧼ σ ⧽ (N [ M ])
</code></pre></div></div>

<p>This proof is where the σ algebra pays off.  The proof is by direct
equational reasoning. Starting with the left-hand side, we apply σ
algebra equations, oriented left-to-right, until we arive at the
normal form</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>⧼ ⧼ σ ⧽ M • σ ⧽ N
</code></pre></div></div>

<p>We then do the same with the right-hand side, arriving at the same
normal form.</p>

<pre class="Agda"><a id="subst-commute"></a><a id="25844" href="/Substitution/#25844" class="Function">subst-commute</a> <a id="25858" class="Symbol">:</a> <a id="25860" class="Symbol">∀{</a><a id="25862" href="/Substitution/#25862" class="Bound">Γ</a> <a id="25864" href="/Substitution/#25864" class="Bound">Δ</a><a id="25865" class="Symbol">}{</a><a id="25867" href="/Substitution/#25867" class="Bound">N</a> <a id="25869" class="Symbol">:</a> <a id="25871" href="/Substitution/#25862" class="Bound">Γ</a> <a id="25873" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="25875" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="25877" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="25879" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="25880" class="Symbol">}{</a><a id="25882" href="/Substitution/#25882" class="Bound">M</a> <a id="25884" class="Symbol">:</a> <a id="25886" href="/Substitution/#25862" class="Bound">Γ</a> <a id="25888" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="25890" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="25891" class="Symbol">}{</a><a id="25893" href="/Substitution/#25893" class="Bound">σ</a> <a id="25895" class="Symbol">:</a> <a id="25897" href="/Soundness/#2673" class="Function">Subst</a> <a id="25903" href="/Substitution/#25862" class="Bound">Γ</a> <a id="25905" href="/Substitution/#25864" class="Bound">Δ</a> <a id="25907" class="Symbol">}</a>
    <a id="25913" class="Symbol">→</a> <a id="25915" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="25917" href="/Untyped/#6623" class="Function">exts</a> <a id="25922" href="/Substitution/#25893" class="Bound">σ</a> <a id="25924" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="25926" href="/Substitution/#25867" class="Bound">N</a> <a id="25928" href="/Untyped/#7475" class="Function Operator">[</a> <a id="25930" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="25932" href="/Substitution/#25893" class="Bound">σ</a> <a id="25934" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="25936" href="/Substitution/#25882" class="Bound">M</a> <a id="25938" href="/Untyped/#7475" class="Function Operator">]</a> <a id="25940" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="25942" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="25944" href="/Substitution/#25893" class="Bound">σ</a> <a id="25946" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="25948" class="Symbol">(</a><a id="25949" href="/Substitution/#25867" class="Bound">N</a> <a id="25951" href="/Untyped/#7475" class="Function Operator">[</a> <a id="25953" href="/Substitution/#25882" class="Bound">M</a> <a id="25955" href="/Untyped/#7475" class="Function Operator">]</a><a id="25956" class="Symbol">)</a>
<a id="25958" href="/Substitution/#25844" class="Function">subst-commute</a> <a id="25972" class="Symbol">{</a><a id="25973" href="/Substitution/#25973" class="Bound">Γ</a><a id="25974" class="Symbol">}{</a><a id="25976" href="/Substitution/#25976" class="Bound">Δ</a><a id="25977" class="Symbol">}{</a><a id="25979" href="/Substitution/#25979" class="Bound">N</a><a id="25980" class="Symbol">}{</a><a id="25982" href="/Substitution/#25982" class="Bound">M</a><a id="25983" class="Symbol">}{</a><a id="25985" href="/Substitution/#25985" class="Bound">σ</a><a id="25986" class="Symbol">}</a> <a id="25988" class="Symbol">=</a>
     <a id="25995" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
       <a id="26008" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26010" href="/Untyped/#6623" class="Function">exts</a> <a id="26015" href="/Substitution/#25985" class="Bound">σ</a> <a id="26017" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26019" href="/Substitution/#25979" class="Bound">N</a> <a id="26021" href="/Untyped/#7475" class="Function Operator">[</a> <a id="26023" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26025" href="/Substitution/#25985" class="Bound">σ</a> <a id="26027" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26029" href="/Substitution/#25982" class="Bound">M</a> <a id="26031" href="/Untyped/#7475" class="Function Operator">]</a>
     <a id="26038" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
       <a id="26049" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26051" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="26062" class="Symbol">(</a><a id="26063" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26065" href="/Substitution/#25985" class="Bound">σ</a> <a id="26067" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26069" href="/Substitution/#25982" class="Bound">M</a><a id="26070" class="Symbol">)</a> <a id="26072" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26074" class="Symbol">(</a><a id="26075" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26077" href="/Untyped/#6623" class="Function">exts</a> <a id="26082" href="/Substitution/#25985" class="Bound">σ</a> <a id="26084" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26086" href="/Substitution/#25979" class="Bound">N</a><a id="26087" class="Symbol">)</a>
     <a id="26094" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="26097" href="/Substitution/#11058" class="Function">subst-equal</a><a id="26108" class="Symbol">{</a><a id="26109" class="Argument">M</a> <a id="26111" class="Symbol">=</a> <a id="26113" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26115" href="/Untyped/#6623" class="Function">exts</a> <a id="26120" href="/Substitution/#25985" class="Bound">σ</a> <a id="26122" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26124" href="/Substitution/#25979" class="Bound">N</a><a id="26125" class="Symbol">}</a>
          <a id="26137" class="Symbol">(λ</a> <a id="26140" class="Symbol">{</a><a id="26141" href="/Substitution/#26141" class="Bound">A</a><a id="26142" class="Symbol">}{</a><a id="26144" href="/Substitution/#26144" class="Bound">x</a><a id="26145" class="Symbol">}</a> <a id="26147" class="Symbol">→</a> <a id="26149" href="/Substitution/#16691" class="Function">subst-Z-cons-ids-x</a><a id="26167" class="Symbol">{</a><a id="26168" class="Argument">A</a> <a id="26170" class="Symbol">=</a> <a id="26172" href="/Substitution/#26141" class="Bound">A</a><a id="26173" class="Symbol">}{</a><a id="26175" class="Argument">x</a> <a id="26177" class="Symbol">=</a> <a id="26179" href="/Substitution/#26144" class="Bound">x</a><a id="26180" class="Symbol">})</a> <a id="26183" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="26192" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26194" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26196" href="/Substitution/#25985" class="Bound">σ</a> <a id="26198" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26200" href="/Substitution/#25982" class="Bound">M</a> <a id="26202" href="/Substitution/#3029" class="Function Operator">•</a> <a id="26204" href="/Substitution/#2646" class="Function">ids</a> <a id="26208" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26210" class="Symbol">(</a><a id="26211" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26213" href="/Untyped/#6623" class="Function">exts</a> <a id="26218" href="/Substitution/#25985" class="Bound">σ</a> <a id="26220" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26222" href="/Substitution/#25979" class="Bound">N</a><a id="26223" class="Symbol">)</a>
     <a id="26230" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="26233" href="/Substitution/#23418" class="Function">sub-sub</a><a id="26240" class="Symbol">{</a><a id="26241" class="Argument">M</a> <a id="26243" class="Symbol">=</a> <a id="26245" href="/Substitution/#25979" class="Bound">N</a><a id="26246" class="Symbol">}</a> <a id="26248" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="26257" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26259" class="Symbol">(</a><a id="26260" href="/Untyped/#6623" class="Function">exts</a> <a id="26265" href="/Substitution/#25985" class="Bound">σ</a><a id="26266" class="Symbol">)</a> <a id="26268" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="26270" class="Symbol">((</a><a id="26272" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26274" href="/Substitution/#25985" class="Bound">σ</a> <a id="26276" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26278" href="/Substitution/#25982" class="Bound">M</a><a id="26279" class="Symbol">)</a> <a id="26281" href="/Substitution/#3029" class="Function Operator">•</a> <a id="26283" href="/Substitution/#2646" class="Function">ids</a><a id="26286" class="Symbol">)</a> <a id="26288" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26290" href="/Substitution/#25979" class="Bound">N</a>
     <a id="26297" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="26300" href="/Substitution/#11058" class="Function">subst-equal</a><a id="26311" class="Symbol">{</a><a id="26312" class="Argument">M</a> <a id="26314" class="Symbol">=</a> <a id="26316" href="/Substitution/#25979" class="Bound">N</a><a id="26317" class="Symbol">}</a>
         <a id="26328" class="Symbol">(λ</a> <a id="26331" class="Symbol">{</a><a id="26332" href="/Substitution/#26332" class="Bound">A</a><a id="26333" class="Symbol">}{</a><a id="26335" href="/Substitution/#26335" class="Bound">x</a><a id="26336" class="Symbol">}</a> <a id="26338" class="Symbol">→</a> <a id="26340" href="/Substitution/#12692" class="Function">cong-seqL</a><a id="26349" class="Symbol">{</a><a id="26350" class="Argument">σ</a> <a id="26352" class="Symbol">=</a> <a id="26354" href="/Untyped/#6623" class="Function">exts</a> <a id="26359" href="/Substitution/#25985" class="Bound">σ</a><a id="26360" class="Symbol">}{</a><a id="26362" class="Argument">σ&#39;</a> <a id="26365" class="Symbol">=</a> <a id="26367" class="Symbol">((</a><a id="26369" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="26371" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="26372" class="Symbol">)</a> <a id="26374" href="/Substitution/#3029" class="Function Operator">•</a> <a id="26376" class="Symbol">(</a><a id="26377" href="/Substitution/#25985" class="Bound">σ</a> <a id="26379" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="26381" href="/Substitution/#2774" class="Function">↑</a><a id="26382" class="Symbol">))}</a>
            <a id="26398" class="Symbol">{</a><a id="26399" class="Argument">x</a> <a id="26401" class="Symbol">=</a> <a id="26403" href="/Substitution/#26335" class="Bound">x</a><a id="26404" class="Symbol">}</a> <a id="26406" class="Symbol">(λ</a> <a id="26409" class="Symbol">{</a><a id="26410" href="/Substitution/#26410" class="Bound">x</a><a id="26411" class="Symbol">}</a> <a id="26413" class="Symbol">→</a> <a id="26415" href="/Substitution/#15803" class="Function">exts-cons-shift-x</a><a id="26432" class="Symbol">{</a><a id="26433" class="Argument">x</a> <a id="26435" class="Symbol">=</a> <a id="26437" href="/Substitution/#26410" class="Bound">x</a><a id="26438" class="Symbol">})</a> <a id="26441" class="Symbol">)</a> <a id="26443" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="26452" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26454" class="Symbol">(</a><a id="26455" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="26457" href="/Untyped/#3401" class="InductiveConstructor">Z</a> <a id="26459" href="/Substitution/#3029" class="Function Operator">•</a> <a id="26461" class="Symbol">(</a><a id="26462" href="/Substitution/#25985" class="Bound">σ</a> <a id="26464" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="26466" href="/Substitution/#2774" class="Function">↑</a><a id="26467" class="Symbol">))</a> <a id="26470" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="26472" class="Symbol">(</a><a id="26473" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26475" href="/Substitution/#25985" class="Bound">σ</a> <a id="26477" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26479" href="/Substitution/#25982" class="Bound">M</a> <a id="26481" href="/Substitution/#3029" class="Function Operator">•</a> <a id="26483" href="/Substitution/#2646" class="Function">ids</a><a id="26486" class="Symbol">)</a> <a id="26488" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26490" href="/Substitution/#25979" class="Bound">N</a>
     <a id="26497" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="26500" href="/Substitution/#11058" class="Function">subst-equal</a><a id="26511" class="Symbol">{</a><a id="26512" class="Argument">M</a> <a id="26514" class="Symbol">=</a> <a id="26516" href="/Substitution/#25979" class="Bound">N</a><a id="26517" class="Symbol">}</a> <a id="26519" class="Symbol">(λ</a> <a id="26522" class="Symbol">{</a><a id="26523" href="/Substitution/#26523" class="Bound">A</a><a id="26524" class="Symbol">}{</a><a id="26526" href="/Substitution/#26526" class="Bound">x</a><a id="26527" class="Symbol">}</a> <a id="26529" class="Symbol">→</a> <a id="26531" href="/Substitution/#8698" class="Function">sub-dist</a><a id="26539" class="Symbol">{</a><a id="26540" class="Argument">M</a> <a id="26542" class="Symbol">=</a> <a id="26544" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="26546" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="26547" class="Symbol">}{</a><a id="26549" class="Argument">x</a> <a id="26551" class="Symbol">=</a> <a id="26553" href="/Substitution/#26526" class="Bound">x</a><a id="26554" class="Symbol">})</a> <a id="26557" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="26566" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26568" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26570" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26572" href="/Substitution/#25985" class="Bound">σ</a> <a id="26574" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26576" href="/Substitution/#25982" class="Bound">M</a> <a id="26578" href="/Substitution/#3029" class="Function Operator">•</a> <a id="26580" href="/Substitution/#2646" class="Function">ids</a> <a id="26584" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26586" class="Symbol">(</a><a id="26587" href="/Untyped/#4186" class="InductiveConstructor Operator">`</a> <a id="26589" href="/Untyped/#3401" class="InductiveConstructor">Z</a><a id="26590" class="Symbol">)</a> <a id="26592" href="/Substitution/#3029" class="Function Operator">•</a> <a id="26594" class="Symbol">((</a><a id="26596" href="/Substitution/#25985" class="Bound">σ</a> <a id="26598" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="26600" href="/Substitution/#2774" class="Function">↑</a><a id="26601" class="Symbol">)</a> <a id="26603" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="26605" class="Symbol">(</a><a id="26606" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26608" href="/Substitution/#25985" class="Bound">σ</a> <a id="26610" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26612" href="/Substitution/#25982" class="Bound">M</a> <a id="26614" href="/Substitution/#3029" class="Function Operator">•</a> <a id="26616" href="/Substitution/#2646" class="Function">ids</a><a id="26619" class="Symbol">))</a> <a id="26622" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26624" href="/Substitution/#25979" class="Bound">N</a>
     <a id="26631" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4134" class="Function Operator">≡⟨⟩</a>
       <a id="26642" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26644" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26646" href="/Substitution/#25985" class="Bound">σ</a> <a id="26648" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26650" href="/Substitution/#25982" class="Bound">M</a> <a id="26652" href="/Substitution/#3029" class="Function Operator">•</a> <a id="26654" class="Symbol">((</a><a id="26656" href="/Substitution/#25985" class="Bound">σ</a> <a id="26658" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="26660" href="/Substitution/#2774" class="Function">↑</a><a id="26661" class="Symbol">)</a> <a id="26663" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="26665" class="Symbol">(</a><a id="26666" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26668" href="/Substitution/#25985" class="Bound">σ</a> <a id="26670" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26672" href="/Substitution/#25982" class="Bound">M</a> <a id="26674" href="/Substitution/#3029" class="Function Operator">•</a> <a id="26676" href="/Substitution/#2646" class="Function">ids</a><a id="26679" class="Symbol">))</a> <a id="26682" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26684" href="/Substitution/#25979" class="Bound">N</a>
     <a id="26691" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="26694" href="/Substitution/#11058" class="Function">subst-equal</a><a id="26705" class="Symbol">{</a><a id="26706" class="Argument">M</a> <a id="26708" class="Symbol">=</a> <a id="26710" href="/Substitution/#25979" class="Bound">N</a><a id="26711" class="Symbol">}</a> <a id="26713" class="Symbol">(λ</a> <a id="26716" class="Symbol">{</a><a id="26717" href="/Substitution/#26717" class="Bound">A</a><a id="26718" class="Symbol">}</a> <a id="26720" class="Symbol">{</a><a id="26721" href="/Substitution/#26721" class="Bound">x</a><a id="26722" class="Symbol">}</a> <a id="26724" class="Symbol">→</a> <a id="26726" href="/Substitution/#9785" class="Function">cons-congR</a> <a id="26737" class="Symbol">{</a><a id="26738" class="Argument">x</a> <a id="26740" class="Symbol">=</a> <a id="26742" href="/Substitution/#26721" class="Bound">x</a><a id="26743" class="Symbol">}</a>
                                        <a id="26785" class="Symbol">λ</a> <a id="26787" class="Symbol">{</a><a id="26788" href="/Substitution/#26788" class="Bound">x</a><a id="26789" class="Symbol">}</a> <a id="26791" class="Symbol">→</a> <a id="26793" href="/Substitution/#24932" class="Function">seq-assoc</a><a id="26802" class="Symbol">{</a><a id="26803" class="Argument">σ</a> <a id="26805" class="Symbol">=</a> <a id="26807" href="/Substitution/#25985" class="Bound">σ</a><a id="26808" class="Symbol">})</a> <a id="26811" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="26820" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26822" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26824" href="/Substitution/#25985" class="Bound">σ</a> <a id="26826" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26828" href="/Substitution/#25982" class="Bound">M</a> <a id="26830" href="/Substitution/#3029" class="Function Operator">•</a> <a id="26832" class="Symbol">(</a><a id="26833" href="/Substitution/#25985" class="Bound">σ</a> <a id="26835" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="26837" href="/Substitution/#2774" class="Function">↑</a> <a id="26839" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="26841" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="26843" href="/Substitution/#25985" class="Bound">σ</a> <a id="26845" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26847" href="/Substitution/#25982" class="Bound">M</a> <a id="26849" href="/Substitution/#3029" class="Function Operator">•</a> <a id="26851" href="/Substitution/#2646" class="Function">ids</a><a id="26854" class="Symbol">)</a> <a id="26856" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="26858" href="/Substitution/#25979" class="Bound">N</a>
     <a id="26865" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="26868" class="Symbol">(</a><a id="26869" href="/Substitution/#11058" class="Function">subst-equal</a><a id="26880" class="Symbol">{</a><a id="26881" class="Argument">M</a> <a id="26883" class="Symbol">=</a> <a id="26885" href="/Substitution/#25979" class="Bound">N</a><a id="26886" class="Symbol">}</a> <a id="26888" class="Symbol">λ</a> <a id="26890" class="Symbol">{</a><a id="26891" href="/Substitution/#26891" class="Bound">A</a><a id="26892" class="Symbol">}</a> <a id="26894" class="Symbol">{</a><a id="26895" href="/Substitution/#26895" class="Bound">x</a><a id="26896" class="Symbol">}</a> <a id="26898" class="Symbol">→</a> <a id="26900" href="/Substitution/#9785" class="Function">cons-congR</a> <a id="26911" class="Symbol">{</a><a id="26912" class="Argument">x</a> <a id="26914" class="Symbol">=</a> <a id="26916" href="/Substitution/#26895" class="Bound">x</a><a id="26917" class="Symbol">}</a>
                              <a id="26949" class="Symbol">λ</a> <a id="26951" class="Symbol">{</a><a id="26952" href="/Substitution/#26952" class="Bound">x</a><a id="26953" class="Symbol">}</a> <a id="26955" class="Symbol">→</a> <a id="26957" href="/Substitution/#12932" class="Function">cong-seqR</a> <a id="26967" class="Symbol">{</a><a id="26968" class="Argument">σ</a> <a id="26970" class="Symbol">=</a> <a id="26972" href="/Substitution/#25985" class="Bound">σ</a><a id="26973" class="Symbol">}</a> <a id="26975" class="Symbol">λ</a> <a id="26977" class="Symbol">{</a><a id="26978" href="/Substitution/#26978" class="Bound">A</a><a id="26979" class="Symbol">}{</a><a id="26981" href="/Substitution/#26981" class="Bound">x</a><a id="26982" class="Symbol">}</a> <a id="26984" class="Symbol">→</a> <a id="26986" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="26990" class="Symbol">)</a> <a id="26992" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="27001" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="27003" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="27005" href="/Substitution/#25985" class="Bound">σ</a> <a id="27007" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="27009" href="/Substitution/#25982" class="Bound">M</a> <a id="27011" href="/Substitution/#3029" class="Function Operator">•</a> <a id="27013" class="Symbol">(</a><a id="27014" href="/Substitution/#25985" class="Bound">σ</a> <a id="27016" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="27018" href="/Substitution/#2646" class="Function">ids</a><a id="27021" class="Symbol">)</a> <a id="27023" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="27025" href="/Substitution/#25979" class="Bound">N</a>
     <a id="27032" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="27035" class="Symbol">(</a><a id="27036" href="/Substitution/#11058" class="Function">subst-equal</a><a id="27047" class="Symbol">{</a><a id="27048" class="Argument">M</a> <a id="27050" class="Symbol">=</a> <a id="27052" href="/Substitution/#25979" class="Bound">N</a><a id="27053" class="Symbol">}</a> <a id="27055" class="Symbol">λ</a> <a id="27057" class="Symbol">{</a><a id="27058" href="/Substitution/#27058" class="Bound">A</a><a id="27059" class="Symbol">}</a> <a id="27061" class="Symbol">{</a><a id="27062" href="/Substitution/#27062" class="Bound">x</a><a id="27063" class="Symbol">}</a> <a id="27065" class="Symbol">→</a> <a id="27067" href="/Substitution/#9785" class="Function">cons-congR</a><a id="27077" class="Symbol">{</a><a id="27078" class="Argument">x</a> <a id="27080" class="Symbol">=</a> <a id="27082" href="/Substitution/#27062" class="Bound">x</a><a id="27083" class="Symbol">}</a> <a id="27085" class="Symbol">(</a><a id="27086" href="/Substitution/#18643" class="Function">sub-idR-x</a><a id="27095" class="Symbol">{</a><a id="27096" class="Argument">σ</a> <a id="27098" class="Symbol">=</a> <a id="27100" href="/Substitution/#25985" class="Bound">σ</a><a id="27101" class="Symbol">}))</a> <a id="27105" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="27114" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="27116" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="27118" href="/Substitution/#25985" class="Bound">σ</a> <a id="27120" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="27122" href="/Substitution/#25982" class="Bound">M</a> <a id="27124" href="/Substitution/#3029" class="Function Operator">•</a> <a id="27126" href="/Substitution/#25985" class="Bound">σ</a> <a id="27128" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="27130" href="/Substitution/#25979" class="Bound">N</a>
     <a id="27137" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="27140" href="/Substitution/#11058" class="Function">subst-equal</a><a id="27151" class="Symbol">{</a><a id="27152" class="Argument">M</a> <a id="27154" class="Symbol">=</a> <a id="27156" href="/Substitution/#25979" class="Bound">N</a><a id="27157" class="Symbol">}</a> <a id="27159" class="Symbol">(λ</a> <a id="27162" class="Symbol">{</a><a id="27163" href="/Substitution/#27163" class="Bound">A</a><a id="27164" class="Symbol">}{</a><a id="27166" href="/Substitution/#27166" class="Bound">x</a><a id="27167" class="Symbol">}</a> <a id="27169" class="Symbol">→</a> <a id="27171" href="/Substitution/#9785" class="Function">cons-congR</a><a id="27181" class="Symbol">{</a><a id="27182" class="Argument">x</a> <a id="27184" class="Symbol">=</a> <a id="27186" href="/Substitution/#27166" class="Bound">x</a><a id="27187" class="Symbol">}</a> <a id="27189" class="Symbol">(</a><a id="27190" href="/Substitution/#8578" class="Function">sub-idL-x</a><a id="27199" class="Symbol">{</a><a id="27200" class="Argument">σ</a> <a id="27202" class="Symbol">=</a> <a id="27204" href="/Substitution/#25985" class="Bound">σ</a><a id="27205" class="Symbol">}))</a> <a id="27209" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="27218" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="27220" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="27222" href="/Substitution/#25985" class="Bound">σ</a> <a id="27224" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="27226" href="/Substitution/#25982" class="Bound">M</a> <a id="27228" href="/Substitution/#3029" class="Function Operator">•</a> <a id="27230" class="Symbol">(</a><a id="27231" href="/Substitution/#2646" class="Function">ids</a> <a id="27235" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="27237" href="/Substitution/#25985" class="Bound">σ</a><a id="27238" class="Symbol">)</a> <a id="27240" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="27242" href="/Substitution/#25979" class="Bound">N</a>
     <a id="27249" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="27252" class="Symbol">(</a><a id="27253" href="/Substitution/#11058" class="Function">subst-equal</a><a id="27264" class="Symbol">{</a><a id="27265" class="Argument">M</a> <a id="27267" class="Symbol">=</a> <a id="27269" href="/Substitution/#25979" class="Bound">N</a><a id="27270" class="Symbol">}</a> <a id="27272" class="Symbol">λ</a> <a id="27274" class="Symbol">{</a><a id="27275" href="/Substitution/#27275" class="Bound">A</a><a id="27276" class="Symbol">}{</a><a id="27278" href="/Substitution/#27278" class="Bound">x</a><a id="27279" class="Symbol">}</a> <a id="27281" class="Symbol">→</a> <a id="27283" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#838" class="Function">sym</a> <a id="27287" class="Symbol">(</a><a id="27288" href="/Substitution/#8698" class="Function">sub-dist</a><a id="27296" class="Symbol">{</a><a id="27297" class="Argument">x</a> <a id="27299" class="Symbol">=</a> <a id="27301" href="/Substitution/#27278" class="Bound">x</a><a id="27302" class="Symbol">}))</a> <a id="27306" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="27315" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="27317" href="/Substitution/#25982" class="Bound">M</a> <a id="27319" href="/Substitution/#3029" class="Function Operator">•</a> <a id="27321" href="/Substitution/#2646" class="Function">ids</a> <a id="27325" href="/Substitution/#3375" class="Function Operator">⨟</a> <a id="27327" href="/Substitution/#25985" class="Bound">σ</a> <a id="27329" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="27331" href="/Substitution/#25979" class="Bound">N</a>
     <a id="27338" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="27341" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#838" class="Function">sym</a> <a id="27345" class="Symbol">(</a><a id="27346" href="/Substitution/#23418" class="Function">sub-sub</a><a id="27353" class="Symbol">{</a><a id="27354" class="Argument">M</a> <a id="27356" class="Symbol">=</a> <a id="27358" href="/Substitution/#25979" class="Bound">N</a><a id="27359" class="Symbol">})</a> <a id="27362" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="27371" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="27373" href="/Substitution/#25985" class="Bound">σ</a> <a id="27375" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="27377" class="Symbol">(</a><a id="27378" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="27380" href="/Substitution/#25982" class="Bound">M</a> <a id="27382" href="/Substitution/#3029" class="Function Operator">•</a> <a id="27384" href="/Substitution/#2646" class="Function">ids</a> <a id="27388" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="27390" href="/Substitution/#25979" class="Bound">N</a><a id="27391" class="Symbol">)</a>
     <a id="27398" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="27401" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#1170" class="Function">cong</a> <a id="27406" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="27408" href="/Substitution/#25985" class="Bound">σ</a> <a id="27410" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="27412" class="Symbol">(</a><a id="27413" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#838" class="Function">sym</a> <a id="27417" class="Symbol">(</a><a id="27418" href="/Substitution/#11058" class="Function">subst-equal</a><a id="27429" class="Symbol">{</a><a id="27430" class="Argument">M</a> <a id="27432" class="Symbol">=</a> <a id="27434" href="/Substitution/#25979" class="Bound">N</a><a id="27435" class="Symbol">}λ{</a><a id="27438" href="/Substitution/#27438" class="Bound">A</a><a id="27439" class="Symbol">}{</a><a id="27441" href="/Substitution/#27441" class="Bound">x</a><a id="27442" class="Symbol">}</a> <a id="27444" class="Symbol">→</a> <a id="27446" href="/Substitution/#16691" class="Function">subst-Z-cons-ids-x</a><a id="27464" class="Symbol">{</a><a id="27465" class="Argument">x</a> <a id="27467" class="Symbol">=</a> <a id="27469" href="/Substitution/#27441" class="Bound">x</a><a id="27470" class="Symbol">}))</a> <a id="27474" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="27483" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="27485" href="/Substitution/#25985" class="Bound">σ</a> <a id="27487" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="27489" class="Symbol">(</a><a id="27490" href="/Substitution/#25979" class="Bound">N</a> <a id="27492" href="/Untyped/#7475" class="Function Operator">[</a> <a id="27494" href="/Substitution/#25982" class="Bound">M</a> <a id="27496" href="/Untyped/#7475" class="Function Operator">]</a><a id="27497" class="Symbol">)</a>
     <a id="27504" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a></pre>

<p>A corollary of <code class="highlighter-rouge">subst-commute</code> is that <code class="highlighter-rouge">rename</code> also commutes with
substitution. In the proof below, we first exchange <code class="highlighter-rouge">rename ρ</code> for
the substitution <code class="highlighter-rouge">⧼ ren ρ ⧽</code>, and apply <code class="highlighter-rouge">subst-commute</code>, and
then convert back to <code class="highlighter-rouge">rename ρ</code>.</p>

<pre class="Agda"><a id="rename-subst-commute"></a><a id="27760" href="/Substitution/#27760" class="Function">rename-subst-commute</a> <a id="27781" class="Symbol">:</a> <a id="27783" class="Symbol">∀{</a><a id="27785" href="/Substitution/#27785" class="Bound">Γ</a> <a id="27787" href="/Substitution/#27787" class="Bound">Δ</a><a id="27788" class="Symbol">}{</a><a id="27790" href="/Substitution/#27790" class="Bound">N</a> <a id="27792" class="Symbol">:</a> <a id="27794" href="/Substitution/#27785" class="Bound">Γ</a> <a id="27796" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="27798" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="27800" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="27802" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="27803" class="Symbol">}{</a><a id="27805" href="/Substitution/#27805" class="Bound">M</a> <a id="27807" class="Symbol">:</a> <a id="27809" href="/Substitution/#27785" class="Bound">Γ</a> <a id="27811" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="27813" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="27814" class="Symbol">}{</a><a id="27816" href="/Substitution/#27816" class="Bound">ρ</a> <a id="27818" class="Symbol">:</a> <a id="27820" href="/Denotational/#23286" class="Function">Rename</a> <a id="27827" href="/Substitution/#27785" class="Bound">Γ</a> <a id="27829" href="/Substitution/#27787" class="Bound">Δ</a> <a id="27831" class="Symbol">}</a>
    <a id="27837" class="Symbol">→</a> <a id="27839" class="Symbol">(</a><a id="27840" href="/Untyped/#6171" class="Function">rename</a> <a id="27847" class="Symbol">(</a><a id="27848" href="/Untyped/#5845" class="Function">ext</a> <a id="27852" href="/Substitution/#27816" class="Bound">ρ</a><a id="27853" class="Symbol">)</a> <a id="27855" href="/Substitution/#27790" class="Bound">N</a><a id="27856" class="Symbol">)</a> <a id="27858" href="/Untyped/#7475" class="Function Operator">[</a> <a id="27860" href="/Untyped/#6171" class="Function">rename</a> <a id="27867" href="/Substitution/#27816" class="Bound">ρ</a> <a id="27869" href="/Substitution/#27805" class="Bound">M</a> <a id="27871" href="/Untyped/#7475" class="Function Operator">]</a> <a id="27873" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="27875" href="/Untyped/#6171" class="Function">rename</a> <a id="27882" href="/Substitution/#27816" class="Bound">ρ</a> <a id="27884" class="Symbol">(</a><a id="27885" href="/Substitution/#27790" class="Bound">N</a> <a id="27887" href="/Untyped/#7475" class="Function Operator">[</a> <a id="27889" href="/Substitution/#27805" class="Bound">M</a> <a id="27891" href="/Untyped/#7475" class="Function Operator">]</a><a id="27892" class="Symbol">)</a>
<a id="27894" href="/Substitution/#27760" class="Function">rename-subst-commute</a> <a id="27915" class="Symbol">{</a><a id="27916" href="/Substitution/#27916" class="Bound">Γ</a><a id="27917" class="Symbol">}{</a><a id="27919" href="/Substitution/#27919" class="Bound">Δ</a><a id="27920" class="Symbol">}{</a><a id="27922" href="/Substitution/#27922" class="Bound">N</a><a id="27923" class="Symbol">}{</a><a id="27925" href="/Substitution/#27925" class="Bound">M</a><a id="27926" class="Symbol">}{</a><a id="27928" href="/Substitution/#27928" class="Bound">ρ</a><a id="27929" class="Symbol">}</a> <a id="27931" class="Symbol">=</a>
     <a id="27938" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4076" class="Function Operator">begin</a>
       <a id="27951" class="Symbol">(</a><a id="27952" href="/Untyped/#6171" class="Function">rename</a> <a id="27959" class="Symbol">(</a><a id="27960" href="/Untyped/#5845" class="Function">ext</a> <a id="27964" href="/Substitution/#27928" class="Bound">ρ</a><a id="27965" class="Symbol">)</a> <a id="27967" href="/Substitution/#27922" class="Bound">N</a><a id="27968" class="Symbol">)</a> <a id="27970" href="/Untyped/#7475" class="Function Operator">[</a> <a id="27972" href="/Untyped/#6171" class="Function">rename</a> <a id="27979" href="/Substitution/#27928" class="Bound">ρ</a> <a id="27981" href="/Substitution/#27925" class="Bound">M</a> <a id="27983" href="/Untyped/#7475" class="Function Operator">]</a>
     <a id="27990" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="27993" href="/Substitution/#10468" class="Function">cong-sub</a> <a id="28002" class="Symbol">(λ{</a><a id="28005" href="/Substitution/#28005" class="Bound">A</a><a id="28006" class="Symbol">}{</a><a id="28008" href="/Substitution/#28008" class="Bound">x</a><a id="28009" class="Symbol">}</a> <a id="28011" class="Symbol">→</a> <a id="28013" href="/Substitution/#13312" class="Function">cong-subst-zero</a> <a id="28029" class="Symbol">(</a><a id="28030" href="/Substitution/#14495" class="Function">rename-subst-ren</a><a id="28046" class="Symbol">{</a><a id="28047" class="Argument">M</a> <a id="28049" class="Symbol">=</a> <a id="28051" href="/Substitution/#27925" class="Bound">M</a><a id="28052" class="Symbol">}))</a>
                 <a id="28073" class="Symbol">(</a><a id="28074" href="/Substitution/#14495" class="Function">rename-subst-ren</a><a id="28090" class="Symbol">{</a><a id="28091" class="Argument">M</a> <a id="28093" class="Symbol">=</a> <a id="28095" href="/Substitution/#27922" class="Bound">N</a><a id="28096" class="Symbol">})</a> <a id="28099" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="28108" class="Symbol">(</a><a id="28109" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="28111" href="/Substitution/#6144" class="Function">ren</a> <a id="28115" class="Symbol">(</a><a id="28116" href="/Untyped/#5845" class="Function">ext</a> <a id="28120" href="/Substitution/#27928" class="Bound">ρ</a><a id="28121" class="Symbol">)</a> <a id="28123" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="28125" href="/Substitution/#27922" class="Bound">N</a><a id="28126" class="Symbol">)</a> <a id="28128" href="/Untyped/#7475" class="Function Operator">[</a> <a id="28130" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="28132" href="/Substitution/#6144" class="Function">ren</a> <a id="28136" href="/Substitution/#27928" class="Bound">ρ</a> <a id="28138" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="28140" href="/Substitution/#27925" class="Bound">M</a> <a id="28142" href="/Untyped/#7475" class="Function Operator">]</a>
     <a id="28149" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="28152" href="/Substitution/#10468" class="Function">cong-sub</a> <a id="28161" class="Symbol">((λ</a> <a id="28165" class="Symbol">{</a><a id="28166" href="/Substitution/#28166" class="Bound">A</a><a id="28167" class="Symbol">}{</a><a id="28169" href="/Substitution/#28169" class="Bound">x</a><a id="28170" class="Symbol">}</a> <a id="28172" class="Symbol">→</a> <a id="28174" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="28178" class="Symbol">))</a> <a id="28181" class="Symbol">(</a><a id="28182" href="/Substitution/#11058" class="Function">subst-equal</a><a id="28193" class="Symbol">{</a><a id="28194" class="Argument">M</a> <a id="28196" class="Symbol">=</a> <a id="28198" href="/Substitution/#27922" class="Bound">N</a><a id="28199" class="Symbol">}</a> <a id="28201" href="/Substitution/#14064" class="Function">ren-ext-x</a><a id="28210" class="Symbol">)</a> <a id="28212" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="28221" class="Symbol">(</a><a id="28222" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="28224" href="/Untyped/#6623" class="Function">exts</a> <a id="28229" class="Symbol">(</a><a id="28230" href="/Substitution/#6144" class="Function">ren</a> <a id="28234" href="/Substitution/#27928" class="Bound">ρ</a><a id="28235" class="Symbol">)</a> <a id="28237" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="28239" href="/Substitution/#27922" class="Bound">N</a><a id="28240" class="Symbol">)</a> <a id="28242" href="/Untyped/#7475" class="Function Operator">[</a> <a id="28244" href="/Substitution/#2131" class="Function Operator">⧼</a> <a id="28246" href="/Substitution/#6144" class="Function">ren</a> <a id="28250" href="/Substitution/#27928" class="Bound">ρ</a> <a id="28252" href="/Substitution/#2131" class="Function Operator">⧽</a> <a id="28254" href="/Substitution/#27925" class="Bound">M</a> <a id="28256" href="/Untyped/#7475" class="Function Operator">]</a>
     <a id="28263" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="28266" href="/Substitution/#25844" class="Function">subst-commute</a><a id="28279" class="Symbol">{</a><a id="28280" class="Argument">N</a> <a id="28282" class="Symbol">=</a> <a id="28284" href="/Substitution/#27922" class="Bound">N</a><a id="28285" class="Symbol">}</a> <a id="28287" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="28296" href="/Untyped/#6931" class="Function">subst</a> <a id="28302" class="Symbol">(</a><a id="28303" href="/Substitution/#6144" class="Function">ren</a> <a id="28307" href="/Substitution/#27928" class="Bound">ρ</a><a id="28308" class="Symbol">)</a> <a id="28310" class="Symbol">(</a><a id="28311" href="/Substitution/#27922" class="Bound">N</a> <a id="28313" href="/Untyped/#7475" class="Function Operator">[</a> <a id="28315" href="/Substitution/#27925" class="Bound">M</a> <a id="28317" href="/Untyped/#7475" class="Function Operator">]</a><a id="28318" class="Symbol">)</a>
     <a id="28325" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">≡⟨</a> <a id="28328" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#838" class="Function">sym</a> <a id="28332" class="Symbol">(</a><a id="28333" href="/Substitution/#14495" class="Function">rename-subst-ren</a><a id="28349" class="Symbol">)</a> <a id="28351" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4193" class="Function Operator">⟩</a>
       <a id="28360" href="/Untyped/#6171" class="Function">rename</a> <a id="28367" href="/Substitution/#27928" class="Bound">ρ</a> <a id="28369" class="Symbol">(</a><a id="28370" href="/Substitution/#27922" class="Bound">N</a> <a id="28372" href="/Untyped/#7475" class="Function Operator">[</a> <a id="28374" href="/Substitution/#27925" class="Bound">M</a> <a id="28376" href="/Untyped/#7475" class="Function Operator">]</a><a id="28377" class="Symbol">)</a>
     <a id="28384" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#4374" class="Function Operator">∎</a></pre>

<p>To present the substitution lemma, we introduce the following notation
for substituting a term <code class="highlighter-rouge">M</code> for index 1 within term <code class="highlighter-rouge">N</code>.</p>

<pre class="Agda"><a id="_〔_〕"></a><a id="28540" href="/Substitution/#28540" class="Function Operator">_〔_〕</a> <a id="28545" class="Symbol">:</a> <a id="28547" class="Symbol">∀</a> <a id="28549" class="Symbol">{</a><a id="28550" href="/Substitution/#28550" class="Bound">Γ</a> <a id="28552" href="/Substitution/#28552" class="Bound">A</a> <a id="28554" href="/Substitution/#28554" class="Bound">B</a> <a id="28556" href="/Substitution/#28556" class="Bound">C</a><a id="28557" class="Symbol">}</a>
        <a id="28567" class="Symbol">→</a> <a id="28569" href="/Substitution/#28550" class="Bound">Γ</a> <a id="28571" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="28573" href="/Substitution/#28554" class="Bound">B</a> <a id="28575" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="28577" href="/Substitution/#28556" class="Bound">C</a> <a id="28579" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="28581" href="/Substitution/#28552" class="Bound">A</a>
        <a id="28591" class="Symbol">→</a> <a id="28593" href="/Substitution/#28550" class="Bound">Γ</a> <a id="28595" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="28597" href="/Substitution/#28554" class="Bound">B</a>
          <a id="28609" class="Comment">---------</a>
        <a id="28627" class="Symbol">→</a> <a id="28629" href="/Substitution/#28550" class="Bound">Γ</a> <a id="28631" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="28633" href="/Substitution/#28556" class="Bound">C</a> <a id="28635" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="28637" href="/Substitution/#28552" class="Bound">A</a>
<a id="28639" href="/Substitution/#28540" class="Function Operator">_〔_〕</a> <a id="28644" class="Symbol">{</a><a id="28645" href="/Substitution/#28645" class="Bound">Γ</a><a id="28646" class="Symbol">}</a> <a id="28648" class="Symbol">{</a><a id="28649" href="/Substitution/#28649" class="Bound">A</a><a id="28650" class="Symbol">}</a> <a id="28652" class="Symbol">{</a><a id="28653" href="/Substitution/#28653" class="Bound">B</a><a id="28654" class="Symbol">}</a> <a id="28656" class="Symbol">{</a><a id="28657" href="/Substitution/#28657" class="Bound">C</a><a id="28658" class="Symbol">}</a> <a id="28660" href="/Substitution/#28660" class="Bound">N</a> <a id="28662" href="/Substitution/#28662" class="Bound">M</a> <a id="28664" class="Symbol">=</a>
   <a id="28669" href="/Untyped/#6931" class="Function">subst</a> <a id="28675" class="Symbol">{</a><a id="28676" href="/Substitution/#28645" class="Bound">Γ</a> <a id="28678" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="28680" href="/Substitution/#28653" class="Bound">B</a> <a id="28682" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="28684" href="/Substitution/#28657" class="Bound">C</a><a id="28685" class="Symbol">}</a> <a id="28687" class="Symbol">{</a><a id="28688" href="/Substitution/#28645" class="Bound">Γ</a> <a id="28690" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="28692" href="/Substitution/#28657" class="Bound">C</a><a id="28693" class="Symbol">}</a> <a id="28695" class="Symbol">(</a><a id="28696" href="/Untyped/#6623" class="Function">exts</a> <a id="28701" class="Symbol">(</a><a id="28702" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="28713" href="/Substitution/#28662" class="Bound">M</a><a id="28714" class="Symbol">))</a> <a id="28717" class="Symbol">{</a><a id="28718" href="/Substitution/#28649" class="Bound">A</a><a id="28719" class="Symbol">}</a> <a id="28721" href="/Substitution/#28660" class="Bound">N</a></pre>

<p>The substitution lemma is stated as follows and proved as a corollary
of the <code class="highlighter-rouge">subst-commute</code> lemma.</p>

<pre class="Agda"><a id="substitution"></a><a id="28849" href="/Substitution/#28849" class="Function">substitution</a> <a id="28862" class="Symbol">:</a> <a id="28864" class="Symbol">∀{</a><a id="28866" href="/Substitution/#28866" class="Bound">Γ</a><a id="28867" class="Symbol">}{</a><a id="28869" href="/Substitution/#28869" class="Bound">M</a> <a id="28871" class="Symbol">:</a> <a id="28873" href="/Substitution/#28866" class="Bound">Γ</a> <a id="28875" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="28877" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="28879" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="28881" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="28883" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="28885" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="28886" class="Symbol">}{</a><a id="28888" href="/Substitution/#28888" class="Bound">N</a> <a id="28890" class="Symbol">:</a> <a id="28892" href="/Substitution/#28866" class="Bound">Γ</a> <a id="28894" href="/Untyped/#3018" class="InductiveConstructor Operator">,</a> <a id="28896" href="/Untyped/#2694" class="InductiveConstructor">★</a> <a id="28898" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="28900" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="28901" class="Symbol">}{</a><a id="28903" href="/Substitution/#28903" class="Bound">L</a> <a id="28905" class="Symbol">:</a> <a id="28907" href="/Substitution/#28866" class="Bound">Γ</a> <a id="28909" href="/Untyped/#4150" class="Datatype Operator">⊢</a> <a id="28911" href="/Untyped/#2694" class="InductiveConstructor">★</a><a id="28912" class="Symbol">}</a>
    <a id="28918" class="Symbol">→</a> <a id="28920" class="Symbol">(</a><a id="28921" href="/Substitution/#28869" class="Bound">M</a> <a id="28923" href="/Untyped/#7475" class="Function Operator">[</a> <a id="28925" href="/Substitution/#28888" class="Bound">N</a> <a id="28927" href="/Untyped/#7475" class="Function Operator">]</a><a id="28928" class="Symbol">)</a> <a id="28930" href="/Untyped/#7475" class="Function Operator">[</a> <a id="28932" href="/Substitution/#28903" class="Bound">L</a> <a id="28934" href="/Untyped/#7475" class="Function Operator">]</a> <a id="28936" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="28938" class="Symbol">(</a><a id="28939" href="/Substitution/#28869" class="Bound">M</a> <a id="28941" href="/Substitution/#28540" class="Function Operator">〔</a> <a id="28943" href="/Substitution/#28903" class="Bound">L</a> <a id="28945" href="/Substitution/#28540" class="Function Operator">〕</a><a id="28946" class="Symbol">)</a> <a id="28948" href="/Untyped/#7475" class="Function Operator">[</a> <a id="28950" class="Symbol">(</a><a id="28951" href="/Substitution/#28888" class="Bound">N</a> <a id="28953" href="/Untyped/#7475" class="Function Operator">[</a> <a id="28955" href="/Substitution/#28903" class="Bound">L</a> <a id="28957" href="/Untyped/#7475" class="Function Operator">]</a><a id="28958" class="Symbol">)</a> <a id="28960" href="/Untyped/#7475" class="Function Operator">]</a>
<a id="28962" href="/Substitution/#28849" class="Function">substitution</a><a id="28974" class="Symbol">{</a><a id="28975" class="Argument">M</a> <a id="28977" class="Symbol">=</a> <a id="28979" href="/Substitution/#28979" class="Bound">M</a><a id="28980" class="Symbol">}{</a><a id="28982" class="Argument">N</a> <a id="28984" class="Symbol">=</a> <a id="28986" href="/Substitution/#28986" class="Bound">N</a><a id="28987" class="Symbol">}{</a><a id="28989" class="Argument">L</a> <a id="28991" class="Symbol">=</a> <a id="28993" href="/Substitution/#28993" class="Bound">L</a><a id="28994" class="Symbol">}</a> <a id="28996" class="Symbol">=</a>
   <a id="29001" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.Core.html#838" class="Function">sym</a> <a id="29005" class="Symbol">(</a><a id="29006" href="/Substitution/#25844" class="Function">subst-commute</a><a id="29019" class="Symbol">{</a><a id="29020" class="Argument">N</a> <a id="29022" class="Symbol">=</a> <a id="29024" href="/Substitution/#28979" class="Bound">M</a><a id="29025" class="Symbol">}{</a><a id="29027" class="Argument">M</a> <a id="29029" class="Symbol">=</a> <a id="29031" href="/Substitution/#28986" class="Bound">N</a><a id="29032" class="Symbol">}{</a><a id="29034" class="Argument">σ</a> <a id="29036" class="Symbol">=</a> <a id="29038" href="/Untyped/#7359" class="Function">subst-zero</a> <a id="29049" href="/Substitution/#28993" class="Bound">L</a><a id="29050" class="Symbol">})</a></pre>

<h2 id="notes">Notes</h2>

<p>Most of the properties and proofs in this file are based on the paper
<em>Autosubst: Reasoning with de Bruijn Terms and Parallel Substitution</em>
by Schafer, Tebbi, and Smolka (ITP 2015). That paper, in turn, is
based on the paper of Abadi, Cardelli, Curien, and Levy (1991) that
defines the σ algebra.</p>


  </div>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/Untyped/">Prev</a>
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/Substitution.lagda">Source</a>
    
    
    &bullet;
    <a alt="Next chapter" href="/LambdaReduction/">Next</a>
    
</p>


</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Programming Language Foundations in Agda
</h2><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Philip Wadler</li>
          <li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wadler"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wadler</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wen Kokke</li>
          <li><a class="u-email" href="mailto:wen.kokke@ed.ac.uk">wen.kokke@ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wenkokke"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wenkokke</span></a></li><li><a href="https://www.twitter.com/wenkokke"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">wenkokke</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
  </div>
</footer>
<!-- Import jQuery -->
<script type="text/javascript" src="/assets/jquery.js"></script>

<!-- Script which allows for foldable code blocks -->
<script type="text/javascript">
 $('div.foldable pre').each(function(){
     var autoHeight = $(this).height();
     var lineHeight = parseFloat($(this).css('line-height'));

     var plus    = $("<div></div>");
     var horLine = $("<div></div>");
     var verLine = $("<div></div>");
     $(this).prepend(plus);
     plus.css({
         'position'         : 'relative',
         'float'            : 'right',
         'right'            : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'width'            : lineHeight,
         'height'           : lineHeight});
     verLine.css({
         'position'         : 'relative',
         'height'           : lineHeight,
         'width'            : '3px',
         'background-color' : '#C1E0FF'});
     horLine.css({
         'position'         : 'relative',
         'top'              : '-' + (0.5 * lineHeight + 1.5) + 'px',
         'left'             : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'height'           : '3px',
         'width'            : lineHeight,
         'background-color' : '#C1E0FF'});
     plus.append(verLine);
     plus.append(horLine);

     $(this).height(2.0 * lineHeight);
     $(this).css('overflow','hidden');

     $(this).click(function(){
         if ($(this).height() == autoHeight) {
             $(this).height(2.0 * lineHeight);
             plus.show();
         }
         else {
             $(this).height('auto');
             plus.hide();
         }
     });
 });
</script>

<!-- Import KaTeX -->
<script type="text/javascript" src="/assets/katex.js"></script>

<!-- Script which renders TeX using KaTeX -->
<script type="text/javascript">
 $("script[type='math/tex']").replaceWith(
     function(){
         var tex = $(this).text();
         return "<span class=\"inline-equation\">" +
                katex.renderToString(tex) +
                "</span>";
     });
 $("script[type='math/tex; mode=display']").replaceWith(
     function(){
         var tex = $(this).text().replace(/%.*?(\n|$)/g,"");
         return "<div class=\"equation\">" +
                katex.renderToString("\\displaystyle "+tex) +
                "</div>";
     });
</script>
</body>

</html>
